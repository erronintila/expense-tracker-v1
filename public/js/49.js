(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{885:function(e,r,s){"use strict";s.r(r);var t=s(1),o=s.n(t),n=s(161),a=s(28),i=s(41),l={components:{Form:n.a,UserDialogSelector:a.a},data:function(){return{formDataLoaded:!0,loader:!1,usersParameters:{params:{is_superadmin:!1}},form:{code:"",description:"",remarks:"",notes:"",user:this.$store.getters.user.is_admin&&this.mixin_can("select specific users on expense reports")?null:this.$store.getters.user,expenses:[],status:null,from:o()().startOf("week").format("YYYY-MM-DD"),to:o()().endOf("week").format("YYYY-MM-DD")},errors:{date_range:[],code:[],description:[],remarks:[],notes:[],user_id:[],expenses:[]},rules:{}}},methods:{onUpdate:function(e){this.form=e||this.form},selectUser:function(e){this.form.user=null!=e&&null!=e?e:null},resetUser:function(){this.form.user=null},onSave:function(e){var r=this;this.loader=!0,e.user_id=null==e.user?null:e.user.id,i.a.store(e).then((function(e){r.mixin_successDialog(e.data.status,e.data.message),r.$router.push({name:"user.expense_reports.index"}),r.loader=!1})).catch((function(e){r.errors=e.response.data.errors,r.mixin_showErrors(e),r.loader=!1}))}},watch:{"form.user":function(){this.errors.user_id=[]}}},u=s(4),c=Object(u.a)(l,(function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[e.formDataLoaded?s("v-card",{staticClass:"elevation-0 pt-0"},[s("v-card-title",{staticClass:"pt-0"},[s("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(r){return e.$router.go(-1)}}},[s("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),s("v-spacer"),e._v(" "),s("h4",{staticClass:"title green--text"},[e._v("New Expense Report")])],1),e._v(" "),s("v-container",[s("Form",{attrs:{expenseReportForm:e.form,expenseReportErrors:e.errors,expenseReportRules:e.rules},on:{"on-save":e.onSave,"on-update":e.onUpdate},scopedSlots:e._u([{key:"userSelector",fn:function(){return[s("v-row",[s("v-col",[s("v-text-field",{attrs:{value:e.form.user?e.form.user.full_name:"No Employee","error-messages":e.errors.user_id,label:"Employee",readonly:""},on:{input:function(r){e.errors.user_id=[]}},scopedSlots:e._u([e.mixin_can("select specific users on expense reports")?{key:"append",fn:function(){return[s("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:e.form.user,usersParameters:e.usersParameters},on:{selectUser:e.selectUser,onReset:e.resetUser},scopedSlots:e._u([{key:"openDialog",fn:function(r){var t=r.bind,o=r.on;return[s("v-btn",e._g(e._b({attrs:{fab:"",color:"primary",text:"","x-small":""}},"v-btn",t,!1),o),[s("v-icon",{attrs:{dark:""}},[e._v("mdi-magnify")])],1)]}}],null,!1,2729772431)})]},proxy:!0}:null],null,!0)})],1)],1)]},proxy:!0}])})],1)],1):s("loader-component")],1)}),[],!1,null,null,null);r.default=c.exports}}]);