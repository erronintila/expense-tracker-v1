(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{130:function(e,r){e.exports="/images/user.png?5405d77c51fb46a0cbf26cb96fe4da4d"},24:function(e,r,s){"use strict";var o=s(10),t=s.n(o);function a(e,r){for(var s=0;s<r.length;s++){var o=r[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var n=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,s,o;return r=e,(s=[{key:"get",value:function(e){return t.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return t.a.get("/api/users",e)}},{key:"show",value:function(e,r){return t.a.get("/api/users/".concat(e),r)}},{key:"store",value:function(e){return t.a.post("/api/users",e)}},{key:"update",value:function(e,r){return t.a.put("/api/users/".concat(e),r)}},{key:"delete",value:function(e,r){return t.a.delete("/api/users/".concat(e),r)}},{key:"restore",value:function(e,r){return t.a.put("/api/users/restore/".concat(e),r)}},{key:"updatePassword",value:function(e,r){return t.a.put("/api/users/update_password/".concat(e),r)}},{key:"resetPassword",value:function(e,r){return t.a.put("/api/users/reset_password/".concat(e),r)}},{key:"verifyEmail",value:function(e,r){return t.a.put("/api/users/verify_email/".concat(e),r)}},{key:"updateFund",value:function(e,r){return t.a.put("/api/users/update_fund/".concat(e),r)}},{key:"updateSettings",value:function(e,r){return t.a.put("/api/users/update_settings/".concat(e),r)}},{key:"updatePermissions",value:function(e,r){return t.a.put("/api/users/update_permissions/".concat(e),r)}},{key:"updateProfile",value:function(e,r){return t.a.put("/api/users/update_profile/".concat(e),r)}},{key:"updateActivation",value:function(e,r){return t.a.put("/api/users/update_activation/".concat(e),r)}},{key:"export",value:function(){return t.a.get("/api/users/export/data")}}])&&a(r.prototype,s),o&&a(r,o),e}();r.a=new n},27:function(e,r,s){"use strict";var o={name:"page-header",props:{title:""}},t=s(4),a=Object(t.a)(o,(function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[s("v-card-title",{staticClass:"pt-0"},[s("h4",{staticClass:"title green--text"},[e._v(e._s(e.title))]),e._v(" "),s("v-spacer"),e._v(" "),e._t("actions")],2),e._v(" "),s("v-card-subtitle",[e._t("sub-actions")],2)],1)}),[],!1,null,null,null);r.a=a.exports},874:function(e,r,s){"use strict";s.r(r);var o=s(1),t=s.n(o),a=s(27),n={name:"profile-card",props:{hover:{type:Boolean,default:!1},image_url:{default:s(130)},form:{type:Object,default:function(){return{id:null,code:null,first_name:null,middle_name:"",last_name:null,suffix:"",gender:null,birthdate:null,mobile_number:null,telephone_number:"",address:null,fund:0,remaining_fund:0,username:"",email:null,password:"password",password_confirmation:"password",is_admin:!1,is_superadmin:!1,can_login:!0,type:"",job:null,old_permissions:[],permissions:[],old_role:"",role:"Standard User"}}}}},i=s(4),l=Object(i.a)(n,(function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("v-card",{staticClass:"mx-auto mt-3",attrs:{outlined:"",elevation:e.hover?5:2}},[s("v-card-text",[s("v-row",{attrs:{align:"center",justify:"center"}},[s("v-col",{attrs:{cols:"12",align:"center",justify:"center"}},[s("v-avatar",{staticClass:"profile",attrs:{color:"grey",size:"200"}},[s("v-img",{attrs:{src:e.image_url}})],1)],1)],1),e._v(" "),s("v-row",[s("v-col",{attrs:{cols:"12",align:"center",justify:"center"}},[s("div",[e._v("\n                    "+e._s(null==e.form.job||null==e.form.job.department?"":e.form.job.department.name)+"\n                ")]),e._v(" "),s("h3",{staticClass:"display-1 green--text"},[e._v("\n                    "+e._s(e.form.last_name+", "+(e.form.first_name||"")+" "+(e.form.suffix||""))+"\n                ")]),e._v(" "),s("p",[e._v("\n                    "+e._s(null==e.form.job?"":e.form.job.name)+"\n                ")]),e._v(" "),s("div",{staticClass:"text--primary"},[e._v("\n                    "+e._s(e.form.mobile_number)),s("br"),e._v("\n                    "+e._s(e.form.email)+"\n                ")])])],1)],1),e._v(" "),e._t("actions"),e._v(" "),s("v-row",{staticClass:"mt-4"})],2)}),[],!1,null,null,null).exports,d=s(24),u={name:"change-password",data:function(){var e=this;return{showOldPassword:!1,showNewPassword:!1,showRetypePassword:!1,dialogPassword:!1,old_password:"",password:"",password_confirmation:"",rules:{password_confirmation:[function(e){return!!e||"Retype password is required"},function(r){return e.password===e.password_confirmation||"Passwords do not match"}]},errors:{old_password:[],password:[],password_confirmation:[]}}},methods:{onSave:function(){var e=this;this.$refs.form_password.validate()&&d.a.updatePassword(this.$store.getters.user.id,{old_password:this.old_password,password:this.password,password_confirmation:this.password_confirmation}).then((function(r){e.mixin_successDialog(r.data.status,r.data.message),e.dialogPassword=!1,e.old_password="",e.password="",e.password_confirmation="",e.$refs.form_password.resetValidation()})).catch((function(r){e.mixin_showErrors(r),r.response&&r.response.data&&(e.errors=r.response.data.errors)}))},closePasswordDialog:function(){this.dialogPassword=!1,this.old_password="",this.password="",this.password_confirmation="",this.$refs.form_password.resetValidation()}}},m=Object(i.a)(u,(function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("v-dialog",{attrs:{persistent:"",width:"500"},scopedSlots:e._u([{key:"activator",fn:function(r){var s=r.on,o=r.attrs;return[e._t("openDialog",null,null,{attrs:o,on:s})]}}],null,!0),model:{value:e.dialogPassword,callback:function(r){e.dialogPassword=r},expression:"dialogPassword"}},[e._v(" "),s("v-card",[s("v-card-title",{staticClass:"headline"},[e._v("\n            Change Password\n        ")]),e._v(" "),s("v-form",{ref:"form_password"},[s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.old_password,color:"success",label:"Old Password",name:"password",type:e.showOldPassword?"text":"password","append-icon":e.showOldPassword?"mdi-eye":"mdi-eye-off"},on:{input:function(){e.errors.old_password=[]},"click:append":function(r){e.showOldPassword=!e.showOldPassword}},model:{value:e.old_password,callback:function(r){e.old_password=r},expression:"old_password"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minimumLength(8)),"error-messages":e.errors.password,color:"success",label:"New Password",name:"password",type:e.showNewPassword?"text":"password","append-icon":e.showNewPassword?"mdi-eye":"mdi-eye-off"},on:{input:function(){e.errors.password=[]},"click:append":function(r){e.showNewPassword=!e.showNewPassword}},model:{value:e.password,callback:function(r){e.password=r},expression:"password"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-text-field",{attrs:{rules:e.rules.password_confirmation,"error-messages":e.errors.password_confirmation,color:"success",label:"Re-type Password",name:"confirm_password",type:e.showRetypePassword?"text":"password","append-icon":e.showRetypePassword?"mdi-eye":"mdi-eye-off"},on:{input:function(){e.errors.password_confirmation=[]},"click:append":function(r){e.showRetypePassword=!e.showRetypePassword}},model:{value:e.password_confirmation,callback:function(r){e.password_confirmation=r},expression:"password_confirmation"}})],1)],1)],1)],1),e._v(" "),s("v-card-actions",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closePasswordDialog}},[e._v("\n                    Cancel\n                ")]),e._v(" "),s("v-btn",{attrs:{color:"primary",text:""},on:{click:e.onSave}},[e._v("\n                    Save\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,c={components:{PageHeader:a.a,ProfileCard:l,ChangePassword:m},data:function(){return{image_url:s(130),formDataLoaded:!1,dialog:!1,menu:!1,form:{id:null,code:null,first_name:null,middle_name:"",last_name:null,suffix:"",gender:null,birthdate:null,mobile_number:null,telephone_number:"",address:null,fund:0,remaining_fund:0,username:"",email:null,password:"password",password_confirmation:"password",is_admin:!1,is_superadmin:!1,can_login:!0,type:"",job:null,old_permissions:[],permissions:[],old_role:"",role:"Standard User"},rules:{username:[],first_name:[],middle_name:[],last_name:[],suffix:[],gender:[],birthdate:[],job:[],mobile_number:[],telephone_number:[],email:[],address:[]},errors:{code:[],first_name:[],middle_name:[],last_name:[],suffix:[],gender:[],birthdate:[],job:[],mobile_number:[],telephone_number:[],email:[],address:[],username:[],role:[],can_login:[],has_fund:[],fund:[]}}},methods:{onSave:function(){var e=this;this.$refs.form.validate(),this.$refs.form.validate()&&d.a.updateProfile(this.form.id,{code:this.form.code,first_name:this.form.first_name,middle_name:this.form.middle_name,last_name:this.form.last_name,suffix:this.form.suffix,gender:this.form.gender,birthdate:this.form.birthdate,mobile_number:this.form.mobile_number,telephone_number:this.form.telephone_number,address:this.form.address,fund:this.form.fund,remaining_fund:this.form.remaining_fund,username:this.form.username,email:this.form.email,password:"password",password_confirmation:"password",is_admin:this.form.is_admin,is_superadmin:this.form.is_superadmin,can_login:this.form.can_login,type:this.form.type,job_id:null==this.form.job?null:this.form.job.id}).then((function(r){e.mixin_successDialog(r.data.status,r.data.message),e.$store.dispatch("AUTH_USER")})).catch((function(r){e.mixin_showErrors(r),e.errors=r.response.data.errors}))}},computed:{maxDate:function(){return t()().format("YYYY-MM-DD")},lastUpdated:function(){return t()(this.form.updated_at).format("MMM DD, YYYY HH:mm:ss")}},activated:function(){var e=this;this.$store.dispatch("AUTH_USER").then((function(r){e.form=r,e.formDataLoaded=!0}))}},f=Object(i.a)(c,(function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",[e.formDataLoaded?s("v-card",{staticClass:"elevation-0 pt-0"},[s("page-header",{attrs:{title:"Profile"},scopedSlots:e._u([{key:"sub-actions",fn:function(){return[e._v("\n                Last updated: "+e._s(e.lastUpdated)+"\n            ")]},proxy:!0}])}),e._v(" "),s("v-card-text",[s("v-container",[s("v-row",[s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-hover",{scopedSlots:e._u([{key:"default",fn:function(r){var o=r.hover;return[s("profile-card",{attrs:{form:e.form,image_url:e.image_url,hover:o},scopedSlots:e._u([{key:"actions",fn:function(){return[s("change-password",{scopedSlots:e._u([{key:"openDialog",fn:function(r){var o=r.attrs,t=r.on;return[s("v-btn",e._g(e._b({attrs:{text:"",color:"primary"}},"v-btn",o,!1),t),[e._v("\n                                                Change Password\n                                            ")])]}}],null,!0)})]},proxy:!0}],null,!0)})]}}])})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"8"}},[s("v-form",{ref:"form"},[s("v-row",[s("v-col",{attrs:{cols:"12",md:"12"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,counter:100,"error-messages":e.errors.username,label:"Username",required:""},on:{input:function(r){e.errors.username=[]}},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,counter:100,"error-messages":e.errors.first_name,label:"First Name",required:""},on:{input:function(r){e.errors.first_name=[]}},model:{value:e.form.first_name,callback:function(r){e.$set(e.form,"first_name",r)},expression:"form.first_name"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.rules.middle_name,counter:100,"error-messages":e.errors.middle_name,label:"Middle Name"},on:{input:function(r){e.errors.middle_name=[]}},model:{value:e.form.middle_name,callback:function(r){e.$set(e.form,"middle_name",r)},expression:"form.middle_name"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,counter:100,"error-messages":e.errors.last_name,label:"Last Name",required:""},on:{input:function(r){e.errors.last_name=[]}},model:{value:e.form.last_name,callback:function(r){e.$set(e.form,"last_name",r)},expression:"form.last_name"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-combobox",{attrs:{rules:e.rules.suffix,counter:30,items:["Jr","Sr","II","III"],"error-messages":e.errors.suffix,label:"Suffix"},on:{input:function(r){e.errors.suffix=[]}},model:{value:e.form.suffix,callback:function(r){e.$set(e.form,"suffix",r)},expression:"form.suffix"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-select",{attrs:{rules:e.rules.gender,items:["Male","Female"],"error-messages":e.errors.gender,label:"Gender",required:""},on:{input:function(r){e.errors.gender=[]}},model:{value:e.form.gender,callback:function(r){e.$set(e.form,"gender",r)},expression:"form.gender"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-menu",{ref:"menu",attrs:{transition:"scale-transition","offset-y":"","min-width":"290px","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,t=r.attrs;return[s("v-text-field",e._g(e._b({attrs:{rules:e.rules.birthdate,"error-messages":e.errors.birthdate,label:"Birthdate ",readonly:""},on:{input:function(r){e.errors.birthdate=[]}},model:{value:e.form.birthdate,callback:function(r){e.$set(e.form,"birthdate",r)},expression:"form.birthdate"}},"v-text-field",t,!1),o))]}}]),model:{value:e.menu,callback:function(r){e.menu=r},expression:"menu"}},[e._v(" "),s("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"success",max:e.maxDate},model:{value:e.form.birthdate,callback:function(r){e.$set(e.form,"birthdate",r)},expression:"form.birthdate"}})],1)],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,counter:30,"error-messages":e.errors.mobile_number,label:"Mobile Number",type:"number"},on:{input:function(r){e.errors.mobile_number=[]}},model:{value:e.form.mobile_number,callback:function(r){e.$set(e.form,"mobile_number",r)},expression:"form.mobile_number"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.rules.telephone_number,counter:30,"error-messages":e.errors.telephone_number,label:"Telephone Number",type:"number"},on:{input:function(r){e.errors.telephone_number=[]}},model:{value:e.form.telephone_number,callback:function(r){e.$set(e.form,"telephone_number",r)},expression:"form.telephone_number"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12",md:"4"}},[s("v-text-field",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.email,label:"Email Address"},on:{input:function(r){e.errors.email=[]}},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),e._v(" "),s("v-col",{attrs:{cols:"12"}},[s("v-textarea",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.address,label:"Address",rows:"1"},on:{input:function(r){e.errors.address=[]}},model:{value:e.form.address,callback:function(r){e.$set(e.form,"address",r)},expression:"form.address"}})],1)],1),e._v(" "),s("v-row",[s("v-spacer"),e._v(" "),s("v-btn",{attrs:{color:"primary"},on:{click:e.onSave}},[e._v("Update Profile")])],1)],1)],1)],1)],1)],1)],1):s("loader-component")],1)}),[],!1,null,null,null);r.default=f.exports}}]);