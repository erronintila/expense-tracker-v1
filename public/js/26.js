(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{41:function(e,t,a){"use strict";var n=a(10),r=a.n(n);function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"getAll",value:function(e){return r.a.get("/api/expense_reports",e)}},{key:"get",value:function(e){return r.a.get("/api/data/expense_reports",e)}},{key:"show",value:function(e,t){return r.a.get("/api/expense_reports/".concat(e),t)}},{key:"store",value:function(e){return r.a.post("/api/expense_reports",e)}},{key:"update",value:function(e,t){return r.a.put("/api/expense_reports/".concat(e),t)}},{key:"delete",value:function(e,t){return r.a.delete("/api/expense_reports/".concat(e),t)}},{key:"restore",value:function(e,t){return r.a.put("/api/expense_reports/restore/".concat(e),t)}},{key:"submit",value:function(e,t){return r.a.put("/api/expense_reports/submit/".concat(e),t)}},{key:"approve",value:function(e,t){return r.a.put("/api/expense_reports/approve/".concat(e),t)}},{key:"reject",value:function(e,t){return r.a.put("/api/expense_reports/reject/".concat(e),t)}},{key:"duplicate",value:function(e,t){return r.a.put("/api/expense_reports/duplicate/".concat(e),t)}},{key:"export",value:function(){return r.a.get("/api/expense_reports/export/data")}}])&&o(t.prototype,a),n&&o(t,n),e}();t.a=new s},68:function(e,t,a){"use strict";var n=a(10),r=a.n(n);function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"getAll",value:function(e){return r.a.get("/api/payments",e)}},{key:"get",value:function(e){return r.a.get("/api/data/payments",e)}},{key:"show",value:function(e,t){return r.a.get("/api/payments/".concat(e),t)}},{key:"store",value:function(e){return r.a.post("/api/payments",e)}},{key:"update",value:function(e,t){return r.a.put("/api/payments/".concat(e),t)}},{key:"delete",value:function(e,t){return r.a.delete("/api/payments/".concat(e),t)}},{key:"restore",value:function(e,t){return r.a.put("/api/payments/restore/".concat(e),t)}},{key:"export",value:function(){return r.a.get("/api/payments/export/data")}}])&&o(t.prototype,a),n&&o(t,n),e}();t.a=new s},891:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=(a(50),a(68)),s=a(41);function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d={data:function(){return{loading:!0,formDataLoaded:!1,valid:!1,menu:!1,date_range:[r()().startOf("week").format("YYYY-MM-DD"),r()().endOf("week").format("YYYY-MM-DD")],user:"",code:"",reference_no:"",voucher_no:"",description:"",date:"",cheque_no:"",cheque_date:"",amount:"",payee:"",payee_address:"",payee_phone:"",remarks:"",notes:"",headers:[{text:"Period",value:"period",sortable:!1},{text:"Code",value:"code",sortable:!1},{text:"Description",value:"description",sortable:!1},{text:"Amount",value:"total",sortable:!1},{text:"Balance",value:"balance",sortable:!1},{text:"Actions",value:"actions",sortable:!1},{text:"",value:"data-table-expand",sortable:!1}],items:[],total:0,totalAmount:0,totalItems:0,options:{sortBy:["created_at"],sortDesc:[!0],page:1,itemsPerPage:10},totalExpenseBalanceAmount:0,amountToBeReimbursed:0,form:{amount:0,cheque_date:"",cheque_no:"",code:"",date:"",description:"",user:{id:0,full_name:""},expense_reports:[],notes:"",reference_no:"",remarks:"",status:"",voucher_no:"",created:{created_at:null,created_by:{name:""}},updated:{updated_at:null,updated_by:{name:""}},deleted:{deleted_at:null,deleted_by:{name:""}},submitted:{submitted_at:null,submitted_by:{name:""}},reviewed:{reviewed_at:null,reviewed_by:{name:""}},approved:{approved_at:null,approved_by:{name:""}},rejected:{rejected_at:null,rejected_by:{name:""}},logs:[]}}},methods:{getData:function(){var e=this,t={};this.$route.params.isDeleted&&(t={params:{isDeleted:!0}}),o.a.show(this.$route.params.id,t).then((function(t){var a=t.data.data;e.code=a.code,e.reference_no=a.reference_no,e.voucher_no=a.voucher_no,e.description=a.description,e.date=a.date,e.cheque_no=a.cheque_no,e.cheque_date=a.cheque_date,e.amount=a.amount,e.payee=a.payee,e.payee_address=a.payee_address,e.payee_phone=a.payee_phone,e.remarks=a.remarks,e.notes=a.notes,e.items=a.expense_reports,e.user="".concat(a.last_name,", ").concat(a.first_name," ").concat(a.middle_name),e.form.amount=a.amount,e.form.cheque_date=a.cheque_date,e.form.cheque_no=a.cheque_no,e.form.code=a.code,e.form.date=a.date,e.form.description=a.description,e.form.user=a.user,e.form.notes=a.notes,e.form.reference_no=a.reference_no,e.form.remarks=a.remarks,e.form.status=a.status,e.form.voucher_no=a.voucher_no,e.form.created=a.created,e.form.updated=a.updated,e.form.deleted=a.deleted,e.form.submitted=a.submitted,e.form.reviewed=a.reviewed,e.form.approved=a.approved,e.form.rejected=a.rejected,e.form.logs=a.logs,e.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))})).catch((function(t){e.mixin_showErrors(t),e.$router.push({name:"user.payments.index"},(function(){}))}))},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,a){var n=e.options,r=n.sortBy,o=n.sortDesc,i=n.page,u=n.itemsPerPage,c=e.form.user.id,d=(e.date_range,e.$route.params.id);s.a.getAll({params:{sortBy:r[0],sortType:o[0]?"desc":"asc",page:i,itemsPerPage:u,user_id:c,payment_id:d,admin_page:!0}}).then((function(a){var n=a.data.data,r=a.data.meta.total;e.loading=!1,e.formDataLoaded=!0,t({items:n,total:r})})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,e.formDataLoaded=!0,a()}))}))},deletePayment:function(){var e=this;this.$confirm("Do you want to delete this payment?").then((function(t){t&&(e.loader=!0,o.a.delete(e.$route.params.id,{params:{ids:[e.$route.params.id]}}).then((function(t){e.mixin_successDialog(t.data.status,t.data.message),e.$router.push({name:"user.payments.index"})})).catch((function(t){e.mixin_showErrors(t)})))}))}},computed:{params:function(e){return u(u({},this.options),{},c({query:this.user},"query",this.date_range))}},watch:{params:{immediate:!0,deep:!0,handler:function(){var e=this;this.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))}},items:function(){this.total=this.items.reduce((function(e,t){return e+t.total}),0),this.totalExpenseBalanceAmount=this.items.reduce((function(e,t){return e+t.total}),0),this.amountToBeReimbursed=this.items.reduce((function(e,t){return e+t.balance}),0)}},created:function(){this.getData()},activated:function(){this.getData()},deactivated:function(){this.form.expense_reports=[],Object.assign(this.$data.form,this.$options.data())}},l=a(4),v=Object(l.a)(d,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.formDataLoaded?a("v-card",{staticClass:"elevation-0 pt-0"},[a("v-card-title",{staticClass:"pt-0"},[a("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(t){return e.$router.go(-1)}}},[a("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),a("v-spacer"),e._v(" "),a("h4",{staticClass:"title green--text"},[e._v("Payment Details")])],1),e._v(" "),a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"8"}},[a("div",[e._v("\n                            "+e._s(e.form.user.full_name)+"\n                        ")]),e._v(" "),a("div",{staticClass:"display-1 green--text"},[e._v("\n                            PHP "+e._s(e.mixin_formatNumber(e.form.amount))+"\n                        ")]),e._v(" "),a("div",[e._v("Date: "+e._s(e.form.date))])]),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("div",{staticClass:"headline green--text"},[e._v("\n                            #"+e._s(e.form.code)+"\n                        ")]),e._v(" "),a("div",[e._v("Voucher: "+e._s(e.form.voucher_no))]),e._v(" "),a("div",[e._v("\n                            Status:\n                            "),a("v-btn",{attrs:{color:e.form.status.color,"x-small":"",dark:""}},[e._v("\n                                "+e._s(e.form.status.status)+"\n                            ")])],1)])],1),e._v(" "),a("v-divider"),e._v(" "),a("v-row",[a("v-col",[e._v("Description: "+e._s(e.form.description)+" ")])],1),e._v(" "),a("v-divider"),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-data-table",{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.items,loading:e.loading,options:e.options,"server-items-length":e.totalItems,"footer-props":{itemsPerPageOptions:[10,20,50,100],showFirstLastPage:!0,firstIcon:"mdi-page-first",lastIcon:"mdi-page-last",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"},"show-expand":"","single-expand":"","item-key":"id"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.period",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(a.from)+" ~ "+e._s(a.to)+"\n                            ")]}},{key:"item.actions",fn:function(t){var n=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.$router.push("/expense_reports/"+n.id)}}},[e._v("\n                                    mdi-eye\n                                ")])]}},{key:"expanded-item",fn:function(t){var n=t.headers,r=t.item;return[a("td",{attrs:{colspan:n.length}},[a("v-container",[a("table",[a("tr",[a("td",[a("strong",[e._v("Created")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v("\n                                                    "+e._s(e.mixin_formatDate(r.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                                ")])]),e._v(" "),a("tr",[a("td",[a("strong",[e._v("Reimbursable\n                                                        Amount")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v("\n                                                    "+e._s(e.mixin_formatNumber(r.total_reimbursable))+"\n                                                ")])]),e._v(" "),a("tr",[a("td",[a("strong",[e._v("Paid")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v("\n                                                    "+e._s(e.mixin_formatNumber(r.paid))+"\n                                                ")])]),e._v(" "),r.balance>0?a("tr",[a("td",[a("strong",[e._v("Balance")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v("\n                                                    "+e._s(e.mixin_formatNumber(r.balance))+"\n                                                ")])]):e._e(),e._v(" "),a("tr",[a("td",[a("strong",[e._v("Status")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v("\n                                                    "+e._s(null==r.status?"":r.status.status)+"\n                                                    ("+e._s(null==r.status?"":r.status.remarks)+")\n                                                ")])]),e._v(" "),r.remarks?a("tr",[a("td",[a("strong",[e._v("Remarks")])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v(e._s(r.remarks))])]):e._e()])])],1)]}},{key:"item.total",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e.mixin_formatNumber(a.total))+"\n                            ")]}},{key:"item.user",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(a.last_name+", "+a.first_name)+"\n                            ")]}},{key:"item.updated_at",fn:function(t){var a=t.item;return[e._v("\n                                "+e._s(e.mixin_getHumanDate(a.updated_at))+"\n                            ")]}}],null,!0)},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e.items.length>0?a("template",{slot:"body.append"},[a("tr",{staticClass:"green--text hidden-md-and-up"},[a("td",{staticClass:"title"},[e._v("\n                                        Total:\n                                        "),a("strong",[e._v(e._s(e.totalAmount))])])]),e._v(" "),a("tr",{staticClass:"green--text hidden-sm-and-down"},[a("td",{staticClass:"title"},[e._v("Total")]),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td"),e._v(" "),a("td",[a("strong",[e._v(e._s(e.totalAmount))])]),e._v(" "),a("td"),e._v(" "),a("td")])]):e._e()],2)],1)],1),e._v(" "),a("v-divider"),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"8"}},[a("div",[e._v("Remarks : "+e._s(e.form.remarks))])]),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("table",{attrs:{width:"100%"}},[a("tbody",[a("tr",[a("td",[e._v("\n                                        Total Expense Amount Balance\n                                    ")]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",{staticClass:"green--text text--darken-4 text-right"},[e._v("\n                                        "+e._s(e.mixin_formatNumber(e.totalExpenseBalanceAmount))+"\n                                    ")])]),e._v(" "),a("tr",[a("td",[e._v("\n                                        Paid Amount\n                                    ")]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",{staticClass:"green--text text--darken-4 text-right"},[e._v("\n                                        (-)\n                                        "+e._s(e.mixin_formatNumber(e.form.amount))+"\n                                    ")])]),e._v(" "),a("tr",[a("td",{attrs:{colspan:"3"}},[a("v-divider")],1)]),e._v(" "),a("tr",[a("th",{staticClass:"text-left"},[e._v("\n                                        Amount to be reimbursed\n                                    ")]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",{staticClass:"green--text text--darken-4 text-right"},[e._v("\n                                        "+e._s(e.mixin_formatNumber(e.amountToBeReimbursed))+"\n                                    ")])])])])])],1),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"8"}},[e._v("\n                        Notes : "+e._s(e.form.notes)+"\n                    ")]),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("div",{staticClass:"text-right"},[a("v-btn",{attrs:{color:"green",dark:""},on:{click:e.deletePayment}},[e._v("\n                                Delete Payment\n                            ")])],1)])],1),e._v(" "),a("v-divider",{staticClass:"mb-4"}),e._v(" "),a("v-row",{staticClass:"text--secondary text-caption"},[a("v-col",{attrs:{cols:"12",md:"12"}},[a("div",[e._v("History :")]),e._v(" "),a("div",[a("table",{staticClass:"table",attrs:{width:"100%"}},[a("tbody",e._l(e.form.logs,(function(t){return a("tr",{key:t.id},[a("td",[e._v("\n                                            "+e._s(e.mixin_formatDate(t.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                        ")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v("\n                                            "+e._s(null==t.causer?"System":t.causer.name)+"\n                                        ")]),e._v(" "),a("td",[e._v("-")]),e._v(" "),a("td",[e._v(e._s(t.description))])])})),0)])])])],1)],1)],1)],1):a("loader-component")],1)}),[],!1,null,null,null);t.default=v.exports}}]);