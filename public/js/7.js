(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{219:function(t,e,r){t.exports=r(231)},231:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function i(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{i({},"")}catch(t){i=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var a=e&&e.prototype instanceof p?e:p,s=Object.create(a.prototype),o=new D(n||[]);return s._invoke=function(t,e,r){var n="suspendedStart";return function(a,s){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw s;return w()}for(r.method=a,r.arg=s;;){var o=r.delegate;if(o){var i=b(o,r);if(i){if(i===u)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=c(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,o),s}function c(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function p(){}function d(){}function f(){}var m={};m[a]=function(){return this};var h=Object.getPrototypeOf,v=h&&h(h(k([])));v&&v!==e&&r.call(v,a)&&(m=v);var _=f.prototype=p.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){i(t,e,(function(t){return this._invoke(e,t)}))}))}function y(t,e){var n;this._invoke=function(a,s){function o(){return new e((function(n,o){!function n(a,s,o,i){var l=c(t[a],t,s);if("throw"!==l.type){var u=l.arg,p=u.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,o,i)}),(function(t){n("throw",t,o,i)})):e.resolve(p).then((function(t){u.value=t,o(u)}),(function(t){return n("throw",t,o,i)}))}i(l.arg)}(a,s,n,o)}))}return n=n?n.then(o,o):o()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=c(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function Y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return s.next=s}}return{next:w}}function w(){return{value:void 0,done:!0}}return d.prototype=_.constructor=f,f.constructor=d,d.displayName=i(f,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,o,"GeneratorFunction")),t.prototype=Object.create(_),t},t.awrap=function(t){return{__await:t}},g(y.prototype),y.prototype[s]=function(){return this},t.AsyncIterator=y,t.async=function(e,r,n,a,s){void 0===s&&(s=Promise);var o=new y(l(e,r,n,a),s);return t.isGeneratorFunction(r)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},g(_),i(_,o,"Generator"),_[a]=function(){return this},_.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Y),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var i=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(i&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(i){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=e&&e<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=t,o.arg=e,s?(this.method="next",this.next=s.finallyLoc,u):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),Y(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var a=n.arg;Y(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=n}catch(t){Function("r","regeneratorRuntime = r")(n)}},24:function(t,e,r){"use strict";var n=r(10),a=r.n(n);function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"get",value:function(t){return a.a.get("/api/data/users",t)}},{key:"getAll",value:function(t){return a.a.get("/api/users",t)}},{key:"show",value:function(t,e){return a.a.get("/api/users/".concat(t),e)}},{key:"store",value:function(t){return a.a.post("/api/users",t)}},{key:"update",value:function(t,e){return a.a.put("/api/users/".concat(t),e)}},{key:"delete",value:function(t,e){return a.a.delete("/api/users/".concat(t),e)}},{key:"restore",value:function(t,e){return a.a.put("/api/users/restore/".concat(t),e)}},{key:"updatePassword",value:function(t,e){return a.a.put("/api/users/update_password/".concat(t),e)}},{key:"resetPassword",value:function(t,e){return a.a.put("/api/users/reset_password/".concat(t),e)}},{key:"verifyEmail",value:function(t,e){return a.a.put("/api/users/verify_email/".concat(t),e)}},{key:"updateFund",value:function(t,e){return a.a.put("/api/users/update_fund/".concat(t),e)}},{key:"updateSettings",value:function(t,e){return a.a.put("/api/users/update_settings/".concat(t),e)}},{key:"updatePermissions",value:function(t,e){return a.a.put("/api/users/update_permissions/".concat(t),e)}},{key:"updateProfile",value:function(t,e){return a.a.put("/api/users/update_profile/".concat(t),e)}},{key:"updateActivation",value:function(t,e){return a.a.put("/api/users/update_activation/".concat(t),e)}},{key:"export",value:function(){return a.a.get("/api/users/export/data")}}])&&s(e.prototype,r),n&&s(e,n),t}();e.a=new o},27:function(t,e,r){"use strict";var n={name:"page-header",props:{title:""}},a=r(4),s=Object(a.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-card-title",{staticClass:"pt-0"},[r("h4",{staticClass:"title green--text"},[t._v(t._s(t.title))]),t._v(" "),r("v-spacer"),t._v(" "),t._t("actions")],2),t._v(" "),r("v-card-subtitle",[t._t("sub-actions")],2)],1)}),[],!1,null,null,null);e.a=s.exports},28:function(t,e,r){"use strict";var n=r(24);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var i={props:{selectedUsers:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedUser:{type:Object,default:null},usersParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["first_name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},getDataFromApi:function(){var t=this;return this.loading=!0,new Promise((function(e,r){var a=t.options,o=a.sortBy,i=a.sortDesc,l=a.page,c=a.itemsPerPage,u={search:t.filters.search.trim().toLowerCase(),sortBy:o[0],sortType:i[0]?"desc":"asc",page:l,itemsPerPage:c,isSelection:!0,is_active:!0},p={};p=t.usersParameters&&t.usersParameters.params?{params:s(s({},u),t.usersParameters.params)}:{params:s({},u)},n.a.getAll(p).then((function(r){t.loading=!1,e(r.data)})).catch((function(e){t.mixin_showErrors(e),t.loading=!1,r()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedUser=null,this.options={sortBy:["last_name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedUser)},selectUser:function(t){this.computedSelectedUser=t,this.$emit("selectUser",t)},getJobName:function(t){return t.job?t.job.name:""},getDepartmentName:function(t){return t.job&&t.job.department?t.job.department.name:""}},watch:{"filters.search":function(){var t=this;""==this.filters.search&&this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},params:{handler:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},deep:!0},dialog:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))}},computed:{params:function(t){return s({},this.options)},computedSelectedUser:{get:function(){return this.selectedUser?this.selectedUser:null},set:function(t){return t}}},created:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))}},l=r(4),c=Object(l.a)(i,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[t._t("openDialog",null,null,{attrs:n,on:r,computedSelectedUser:t.computedSelectedUser})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-card-title",[t._v("\n                Employees\n                "),r("v-spacer"),t._v(" "),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1),t._v(" "),r("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[r("v-list-item-group",{attrs:{"active-class":"green--text",multiple:t.multipleSelection},on:{change:t.selectUser},model:{value:t.computedSelectedUser,callback:function(e){t.computedSelectedUser=e},expression:"computedSelectedUser"}},[t._l(t.collections.items,(function(e,n){return[r("v-list-item",{key:n,attrs:{value:e}},[[r("v-list-item-content",[r("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),t._v(" "),r("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:t._s(t.getJobName(e))}}),t._v(" "),r("v-list-item-subtitle",{domProps:{textContent:t._s(t.getDepartmentName(e))}})],1)]],2)]}))],2)],1),t._v(" "),r("div",[r("v-pagination",{attrs:{length:t.meta.last_page,"total-visible":7},model:{value:t.options.page,callback:function(e){t.$set(t.options,"page",e)},expression:"options.page"}})],1),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.onReset}},[t._v("\n                    Reset\n                ")]),t._v(" "),r("v-spacer"),t._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.a=c.exports},41:function(t,e,r){"use strict";var n=r(10),a=r.n(n);function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getAll",value:function(t){return a.a.get("/api/expense_reports",t)}},{key:"get",value:function(t){return a.a.get("/api/data/expense_reports",t)}},{key:"show",value:function(t,e){return a.a.get("/api/expense_reports/".concat(t),e)}},{key:"store",value:function(t){return a.a.post("/api/expense_reports",t)}},{key:"update",value:function(t,e){return a.a.put("/api/expense_reports/".concat(t),e)}},{key:"delete",value:function(t,e){return a.a.delete("/api/expense_reports/".concat(t),e)}},{key:"restore",value:function(t,e){return a.a.put("/api/expense_reports/restore/".concat(t),e)}},{key:"submit",value:function(t,e){return a.a.put("/api/expense_reports/submit/".concat(t),e)}},{key:"approve",value:function(t,e){return a.a.put("/api/expense_reports/approve/".concat(t),e)}},{key:"reject",value:function(t,e){return a.a.put("/api/expense_reports/reject/".concat(t),e)}},{key:"duplicate",value:function(t,e){return a.a.put("/api/expense_reports/duplicate/".concat(t),e)}},{key:"export",value:function(){return a.a.get("/api/expense_reports/export/data")}}])&&s(e.prototype,r),n&&s(e,n),t}();e.a=new o},51:function(t,e,r){"use strict";var n=r(1),a=r.n(n),s={props:{dateRange:{type:Array,default:function(){return[a()().startOf("month").format("YYYY-MM-DD"),a()().endOf("month").format("YYYY-MM-DD")]}},datePreset:{type:String,default:"Custom"},datePresets:{type:Array,default:function(){return[{label:"Today",range:[a()().format("YYYY-MM-DD"),a()().format("YYYY-MM-DD")]},{label:"Yesterday",range:[a()().subtract(1,"days").format("YYYY-MM-DD"),a()().subtract(1,"days").format("YYYY-MM-DD")]},{label:"This Week",range:[a()().startOf("week").format("YYYY-MM-DD"),a()().endOf("week").format("YYYY-MM-DD")]},{label:"Last Week",range:[a()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),a()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")]},{label:"This Month",range:[a()().startOf("month").format("YYYY-MM-DD"),a()().endOf("month").format("YYYY-MM-DD")]},{label:"Last Month",range:[a()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),a()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")]},{label:"This Quarter",range:[a()().startOf("quarter").format("YYYY-MM-DD"),a()().endOf("quarter").format("YYYY-MM-DD")]},{label:"Last Quarter",range:[a()().subtract(1,"quarters").startOf("quarter").format("YYYY-MM-DD"),a()().subtract(1,"quarters").endOf("quarter").format("YYYY-MM-DD")]},{label:"This Year",range:[a()().startOf("year").format("YYYY-MM-DD"),a()().endOf("year").format("YYYY-MM-DD")]},{label:"Last Year",range:[a()().subtract(1,"years").startOf("year").format("YYYY-MM-DD"),a()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]},{label:"Last 5 Years",range:[a()().subtract(5,"years").startOf("year").format("YYYY-MM-DD"),a()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]}]}}},data:function(){return{range:[],preset:{},presets:[],dialog:!1}},methods:{onCancel:function(){this.dialog=!1,this.preset={}},onSave:function(){if(this.range&&2==this.range.length){var t=this.range.sort((function(t,e){return new Date(t)-new Date(e)}));return this.$refs.dialog.save(t),void this.$emit("on-change",t)}this.dialog=!0}},computed:{dateRangeText:function(){return this.range&&this.range.length?this.range.sort((function(t,e){return new Date(t)-new Date(e)})).join(" ~ "):""}},watch:{preset:function(){this.preset&&Object.keys(this.preset).length&&(this.range=this.preset.range)},dateRange:{immediate:!0,handler:function(t,e){this.range=t}},datePreset:{immediate:!0,handler:function(t,e){this.preset=t}},datePresets:{immediate:!0,handler:function(t,e){this.presets=t}}}},o=r(4),i=Object(o.a)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{ref:"dialog",attrs:{"return-value":t.range,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.range=e},"update:return-value":function(e){t.range=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[t._t("openDialog",null,null,{on:r,attrs:n,dateRangeText:t.dateRangeText})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),r("v-card",[r("v-container",[r("v-row",[r("v-col",[r("div",{staticClass:"text-center"},[r("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-btn",t._g(t._b({attrs:{color:"primary",dark:"",text:""}},"v-btn",a,!1),n),[r("v-icon",[t._v("mdi-calendar")]),t._v(" \n                  "+t._s(t.dateRangeText)+"\n                ")],1)]}}])},[t._v(" "),r("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"200px"}},[r("v-list-item-group",{model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}},t._l(t.presets,(function(e,n){return r("v-list-item",{key:n,attrs:{value:e}},[r("v-list-item-title",[t._v("\n                      "+t._s(e.label)+"\n                    ")])],1)})),1)],1)],1)],1),t._v(" "),t.range&&2!=t.range.length?r("div",{staticClass:"overline red--text text-capitalize"},[t._v("\n            *select 1 more\n          ")]):t._e()])],1),t._v(" "),r("v-divider")],1),t._v(" "),r("v-date-picker",{attrs:{color:"green","no-title":"",range:"",scrollable:""},on:{change:function(e){t.preset={}}},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}},[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),r("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onSave}},[t._v(" OK ")])],1)],1)],1)}),[],!1,null,null,null);e.a=i.exports},52:function(t,e,r){"use strict";var n=r(10),a=r.n(n);function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,(r=[{key:"getAll",value:function(t){return a.a.get("/api/expense_types",t)}},{key:"get",value:function(t){return a.a.get("/api/data/expense_types",t)}},{key:"show",value:function(t,e){return a.a.get("/api/expense_types/".concat(t),e)}},{key:"store",value:function(t){return a.a.post("/api/expense_types",t)}},{key:"update",value:function(t,e){return a.a.put("/api/expense_types/".concat(t),e)}},{key:"delete",value:function(t,e){return a.a.delete("/api/expense_types/".concat(t),e)}},{key:"restore",value:function(t,e){return a.a.put("/api/expense_types/restore/".concat(t),e)}}])&&s(e.prototype,r),n&&s(e,n),t}();e.a=new o},884:function(t,e,r){"use strict";r.r(e);var n=r(219),a=r.n(n),s=r(1),o=r.n(s),i=(r(50),r(27)),l=r(51),c=r(28),u=r(41),p=r(52);function d(t,e,r,n,a,s,o){try{var i=t[s](o),l=i.value}catch(t){return void r(t)}i.done?e(l):Promise.resolve(l).then(n,a)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function m(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){h(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var v={components:{DateRangePicker:l.a,UserDialogSelector:c.a,PageHeader:i.a},data:function(){return{formDataLoaded:!1,loading:!0,warning:null,headers:[{text:"Report No.",value:"code"},{text:"Period",value:"date"},{text:"Employee",value:"user"},{text:"Amount",value:"total"},{text:"Last Updated",value:"updated_at"},{text:"Status",value:"status.status",sortable:!1},{text:"Actions",value:"actions",sortable:!1},{text:"",value:"data-table-expand"}],items:[],user:this.$store.getters.user.is_admin&&this.mixin_can("view all users expense reports")?null:this.$store.getters.user,users:[],date_range:[o()().startOf("month").format("YYYY-MM-DD"),o()().endOf("month").format("YYYY-MM-DD")],preset:"",presets:["Today","Yesterday","Last 7 Days","Last 30 Days","This Week","This Month","This Quarter","This Year","Last Week","Last Month","Last Quarter","Last Year","Last 5 Years"],totalAmount:0,totalUnsubmitted:0,totalUnapproved:0,status:"All Expense Reports",statuses:["All Expense Reports","Unsubmitted Expense Reports","Submitted Expense Reports","Approved Expense Reports","Rejected Expense Reports","Released Payment","Reimbursed Expense Reports","Deleted Expense Reports"],selected:[],search:"",totalItems:0,options:{sortBy:["created_at"],sortDesc:[!0],page:1,itemsPerPage:10},expense_types:[],reports_by_user:[],reports_by_expense:[],reports_by_date:[]}},methods:{onSearch:function(){var t=this;this.getDataFromApi().then((function(e){t.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total,t.formDataLoaded=!0}))}))},selectUser:function(t){this.selected=[],this.user=null!=t&&null!=t?t:null},resetUser:function(){this.selected=[],this.user=null},showAllUnsubmitted:function(){this.$store.getters.user.is_admin&&(this.user=null),this.status="Unsubmitted Expense Reports",this.updateDates([o()("0000-01-01").format("YYYY-MM-DD"),o()().format("YYYY-MM-DD")])},showAllUnapproved:function(){this.$store.getters.user.is_admin&&(this.user=null),this.status="Submitted Expense Reports",this.updateDates([o()("0000-01-01").format("YYYY-MM-DD"),o()().format("YYYY-MM-DD")])},loadTotalCountReportStatus:function(){var t=this,e={params:{total_count:!0}};this.$store.getters.user.is_admin||(e.params.user_id=this.$store.getters.user.id),u.a.get(e).then((function(e){var r,n,a,s=null!==(r=e.data)&&void 0!==r?r:0;t.totalUnsubmitted=null!==(n=s.data.total_unsubmitted)&&void 0!==n?n:0,t.totalUnapproved=null!==(a=s.data.total_unapproved)&&void 0!==a?a:0})).catch((function(e){t.mixin_showErrors(e)}))},loadExpenseTypes:function(){var t=this;p.a.get({params:{only:!0}}).then((function(e){t.expense_types=e.data.data})).catch((function(e){t.mixin_showErrors(e)}))},loadReportData:function(t){var e=this;return new Promise((function(r,n){var a=null==e.selected?[]:e.selected.map((function(t){return t.id})),s="";switch(t){case"all_expenses":s="/api/data/print_report?by_expense_id=true&ids=".concat(a);break;case"expenses_by_user":s="/api/data/print_report?by_user_id=true&ids=".concat(a);break;case"expenses_by_date":s="/api/data/print_report?by_date=true&ids=".concat(a)}axios.get(s).then((function(t){var e=t.data.data;r(e)})).catch((function(t){e.mixin_showErrors(t),n()}))}))},printReport:function(t,e,n){var a=this,s=[],i=[],l={},c={},u=null,p=null,d=null,f="";0!=this.selected.length?this.loadReportData(e).then((function(t){var h=t.map((function(t){return new Date(t.expense_date)})),v=new Date(Math.max.apply(null,h)),_=new Date(Math.min.apply(null,h));switch(e){case"all_expenses":s.push({text:"Date",style:"tableOfExpensesHeader"}),s.push({text:"Particulars",style:"tableOfExpensesHeader"}),l={},f="Report No. : "+a.selected.map((function(t){return t.code}));break;case"expenses_by_user":s.push({text:"Employee",style:"tableOfExpensesHeader"}),l={},f="";break;case"expenses_by_date":s.push({text:"Date",style:"tableOfExpensesHeader"}),l={},f="Period: ".concat(o()(_).format("YYYY-MM-DD")," ~ ").concat(o()(v).format("YYYY-MM-DD"))}a.expense_types.forEach((function(t){s.push({text:t.name,style:"tableOfExpensesHeader"})})),s.push({text:"Total",style:"tableOfExpensesHeader"}),t.forEach((function(t){if("all_expenses"==e?p!==t.expense_id:"expenses_by_user"==e?u!==t.user_id:d!==t.expense_date){switch(l={},u=t.user_id,d=t.expense_date,p=t.expense_id,a.expense_types.forEach((function(t){c[t.name]=0})),e){case"all_expenses":var r=t.expense_details&&"null"!=t.expense_details?JSON.parse(t.expense_details).map((function(t){return"".concat(null==t.sub_type_name?"":t.sub_type_name+"/ ").concat(t.description,": ").concat(t.total)+"\n"})).join(""):[];l=m(m({Date:t.expense_date,Particulars:t.expense_description+"\n"+r},c),{},{Total:0});break;case"expenses_by_user":l=m(m({User:"".concat(t.last_name,", ").concat(t.first_name," ").concat(null==t.middle_name?"":t.middle_name," ").concat(null==t.suffix?"":t.suffix)},c),{},{Total:0});break;case"expenses_by_date":l=m(m({Date:t.expense_date},c),{},{Total:0})}i.push(l)}if(l[t.expense_type_name]=t.expense_amount,"Total"in l){var n=0;a.expense_types.forEach((function(t){n+=l[t.name]})),l.Total=n}})),a.expense_types.forEach((function(t){c[t.name]=a.mixin_formatNumber(i.reduce((function(e,r){return e+r[t.name]}),0))})),"all_expenses"==e?i.push(m(m({Total:"Total",Particulars:""},c),{},{TotalAmount:a.mixin_formatNumber(i.reduce((function(t,e){return t+e.Total}),0))})):i.push(m(m({Total:"Total"},c),{},{TotalAmount:a.mixin_formatNumber(i.reduce((function(t,e){return t+e.Total}),0))}));var g=i.map((function(t){return Object.values(t)})).map((function(t){for(var e=[],r=0;r<t.length;r++)e.push({text:t[r],style:"tableOfExpensesBody"});return e})),y=[];y.push(s),g.forEach((function(t){y.push(t)}));var b=r(233);if(null==b.vfs){var x=r(234);b.vfs=x.pdfMake.vfs}b.fonts={Roboto:{normal:"Roboto-Regular.ttf",bold:"Roboto-Medium.ttf",italics:"Roboto-Italic.ttf",bolditalics:"Roboto-MediumItalic.ttf"}};var Y=["Prepared by:","Recommended by:","Checked by:","Approved by:"];"all_expenses"!=e&&(Y=["Prepared by:","Checked by:","Approved by:","Voucher No."]);var D=Y.map((function(t){return{text:"".concat(t,"\n\n                        ___________________________________"),style:"tableSignaturesBody"}})),k=a.printFormat(f,s,y,D);n?b.createPdf(k).download("expense_report.pdf"):b.createPdf(k).open()})):this.mixin_errorDialog("Error","No items selected")},printFormat:function(t,e,r,n){return{pageSize:this.print_format.pageSize,pageOrientation:this.print_format.pageOrientation,pageMargins:this.print_format.pageMargins,defaultStyle:this.print_format.defaultStyle,footer:function(t,e){return{columns:[{text:"Generated from Twin-Circa Marketing Expense Tracker ".concat(o()().format("YYYY-MM-DD HH:mm:ss")),width:500,margin:[36,0,36,0],style:"pageFooter"},{text:"Page "+t.toString()+" of "+e,alignment:"right",style:"pageFooter",margin:[0,0,36,0]}]}},content:[{columns:[{text:"",style:"subheader1"},{text:["Expense Summary Report"],style:"header1"},{image:this.base64Image,fit:[72*this.$store.getters.settings.expense_report.print_format.background.width,72*this.$store.getters.settings.expense_report.print_format.background.height],style:"header2"}]},{text:t,style:"subheader1"},{style:"tableOfExpenses",table:{headerRows:1,widths:e.map((function(t,r){return e.length-1==r?"*":"auto"})),body:r},layout:{hLineWidth:function(t,e){return 0===t||e.table.body.length,.5},vLineWidth:function(t,e){return 0===t||e.table.widths.length,.5},hLineColor:function(t,e){return 0===t||e.table.body.length,"gray"},vLineColor:function(t,e){return 0===t||e.table.widths.length,"gray"},fillColor:function(t,e,r){return t%2==0?"#dbdbdb":null}}},{unbreakable:!0,columns:n}],styles:{header1:{fontSize:13,bold:!1,alignment:"center"},header2:{alignment:"right"},subheader1:{fontSize:10},tableSignatures:{margin:[0,5,0,15]},tableSignaturesBody:{fontSize:10},tableOfExpenses:{margin:[0,5,0,15]},tableOfExpensesHeader:{bold:!0,fontSize:9,color:"white",fillColor:"#4caf50",alignment:"center"},tableOfExpensesBody:{fontSize:9},signatures:{fontSize:10},pageFooter:{fontSize:8}}}},updateDates:function(t){this.date_range=t},getDataFromApi:function(){var t=this;return this.loading=!0,new Promise((function(e,r){var n=t.options,a=n.sortBy,s=n.sortDesc,o=n.page,i=n.itemsPerPage,l=t.search.trim().toLowerCase(),c=t.status,p=t.user?t.user.id:null,d=t.date_range;u.a.getAll({params:{search:l,sortBy:a[0],sortType:s[0]?"desc":"asc",page:o,itemsPerPage:i,user_id:p,status:c,start_date:d[0],end_date:d[1]?d[1]:d[0],admin_page:!0}}).then((function(r){var n=r.data.data,a=r.data.meta.total;t.loading=!1,e({items:n,total:a})})).catch((function(e){t.mixin_showErrors(e),t.loading=!1,r()}))}))},onRefresh:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.loadTotalCountReportStatus(),this.loadExpenseTypes(),this.selected=[],this.$store.dispatch("AUTH_NOTIFICATIONS"),this.$store.dispatch("AUTH_SETTINGS")},onShow:function(t){var e={id:t.id};t.deleted_at&&(e={id:t.id,isDeleted:!0}),this.$router.push({name:"user.expense_reports.show",params:e})},onEdit:function(t){"Approved"!=t.status.status?"Deleted"!=t.status.status?"Paid/Reimbursed"!=t.status.status?this.$router.push({name:"user.expense_reports.edit",params:{id:t.id}}):this.mixin_errorDialog("Error","Paid/reimbursed expense report can't be edited"):this.mixin_errorDialog("Error","Report has been deleted"):this.mixin_errorDialog("Error","Report has been approved")},onDelete:function(){var t=this;this.selected.map((function(t){return t.status.status})).includes("Deleted")?this.mixin_errorDialog("Error","Report has already been deleted"):this.$store.getters.user.is_admin||!this.selected.map((function(t){return t.status.status})).includes("Approved")?this.selected.map((function(t){return t.status.status})).includes("Paid/Reimbursed")?this.mixin_errorDialog("Error","Paid/reimbursed expense reports can't be deleted"):0!=this.selected.length?this.$confirm("Do you want to delete expense report(s)?").then((function(e){if(e){var r=t.selected.map((function(t){return t.id}));u.a.delete(r).then((function(e){t.mixin_successDialog(e.data.status,e.data.message),t.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total,t.formDataLoaded=!0})),t.loadTotalCountReportStatus(),t.selected=[]})).catch((function(e){t.mixin_showErrors(e)}))}})):this.mixin_errorDialog("Error","No item(s) selected"):this.mixin_errorDialog("Error","Approved expense reports can't be deleted")},onUpdate:function(t,e){var r=this,n="",a=this.selected.map((function(t){return t.id}));switch(t){case"submit":n="/api/expense_reports/submit/".concat(a);break;case"approve":n="/api/expense_reports/approve/".concat(a);break;case"reject":n="/api/expense_reports/reject/".concat(a);break;case"duplicate":n="/api/expense_reports/duplicate/".concat(a);break;default:n="/api/expense_reports/".concat(a)}this.$confirm("Do you want to ".concat(t," expense report(s)?")).then((function(t){t&&axios({method:e,url:n}).then((function(t){r.mixin_successDialog(t.data.status,t.data.message),r.getDataFromApi().then((function(t){r.items=t.items,r.totalItems=t.total,r.formDataLoaded=!0})),r.selected=[],r.loadTotalCountReportStatus(),r.$store.dispatch("AUTH_NOTIFICATIONS")})).catch((function(t){r.mixin_showErrors(t)}))}))},onSubmit:function(){if(0!=this.selected.length)if(this.selected.filter((function(t){return"Unsubmitted"===t.status.status})).length<=0)this.mixin_errorDialog("Error","No selected unsubmitted report(s)");else{var t=this.$store.getters.settings.submission_period,e="",r=o.a.min(this.selected.filter((function(t){return"Unsubmitted"===t.status.status})).map((function(t){return o()(t.from)}))).format("YYYY-MM-DD");switch(t){case"Weekly":e=o()(r).endOf("week").format("YYYY-MM-DD");break;case"Monthly":e=o()(r).endOf("month").format("YYYY-MM-DD");break;default:var n=this.$store.getters.settings.expense_encoding_period,a=o.a.min(this.selected.filter((function(t){return"Unsubmitted"===t.status.status})).map((function(t){return o()(t.from).add(n-1,"days")}))).format("YYYY-MM-DD");e=o()(a).format("YYYY-MM-DD")}this.mixin_can("submit expense reports beyond due date")||o()(o()()).isSameOrBefore(e,"day")?this.onUpdate("submit","put"):this.mixin_errorDialog("Error (Not Allowed)","Last submission was ".concat(e))}else this.mixin_errorDialog("Error","No item(s) selected")},onReview:function(){this.onUpdate("review","put")},onApprove:function(){this.onUpdate("approve","put")},onReject:function(){var t,e=this;return(t=a.a.mark((function t(){var r,n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$dialog.prompt({text:"Please specify an appropriate reason for rejection",title:"Do you want to reject expense report(s)?"});case 2:(r=t.sent)&&(n=e.selected.map((function(t){return t.id})),u.a.reject(n,{notes:r}).then((function(t){e.mixin_successDialog("Success",t.data.message),e.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total,e.formDataLoaded=!0})),e.$store.dispatch("AUTH_NOTIFICATIONS"),e.selected=[]})).catch((function(t){e.mixin_showErrors(t)})));case 4:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,a){var s=t.apply(e,r);function o(t){d(s,n,a,o,i,"next",t)}function i(t){d(s,n,a,o,i,"throw",t)}o(void 0)}))})()},onDuplicate:function(){this.onUpdate("duplicate","put")},show_edit:function(t){if(!this.mixin_can("edit expense reports"))return!1;if(t){if(null!=t.approved_at)return!1;if(null!=t.deleted_at)return!1}return!0}},watch:{search:function(){var t=this;""==this.search&&this.getDataFromApi().then((function(e){t.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total,t.formDataLoaded=!0}))}))},params:{immediate:!0,deep:!0,handler:function(){var t=this;this.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total,t.formDataLoaded=!0}))}},items:function(){this.totalAmount=this.mixin_formatNumber(this.items.reduce((function(t,e){return t+e.total}),0))},selected:function(){if(this.selected.map((function(t){return t.status.status})).includes("Unsubmitted")){var t=this.$store.getters.settings.submission_period,e="",r=o.a.min(this.selected.map((function(t){return o()(t.from)}))).format("YYYY-MM-DD");switch(t){case"Weekly":e=o()(r).endOf("week").format("YYYY-MM-DD");break;case"Monthly":e=o()(r).endOf("month").format("YYYY-MM-DD");break;default:var n=this.$store.getters.settings.expense_encoding_period,a=o.a.min(this.selected.map((function(t){return o()(t.from).add(n-1,"days")}))).format("YYYY-MM-DD");e=o()(a).format("YYYY-MM-DD")}this.warning="Last Submission Date: ".concat(e)}else if(this.selected.map((function(t){return t.status.status})).includes("Submitted")){var s=this.$store.getters.settings.approval_period,i=o.a.min(this.selected.map((function(t){return o()(t.submitted_at)}))).format("YYYY-MM-DD"),l=o()(i).add(s,"days").format("YYYY-MM-DD");this.warning="Last Approval Date: ".concat(l,"; First Submitted Report: ").concat(i)}else 0==this.selected.length&&(this.warning=null)}},computed:{params:function(t){var e;return m(m({},this.options),{},(h(e={query:this.status},"query",this.user),h(e,"query",this.date_range),e))},minDate:function(){var t=this.$store.getters.settings;if(t)switch(t.submission_period){case"Weekly":return o()().startOf("week").format("YYYY-MM-DD");case"Monthly":return o()().startOf("month").format("YYYY-MM-DD");default:return o()().startOf("day").format("YYYY-MM-DD")}return o()().startOf("day").format("YYYY-MM-DD")},maxDate:function(){var t=this.$store.getters.settings,e=o()().format("YYYY-MM-DD"),r=o()().endOf("day").format("YYYY-MM-DD");if(t){switch(t.submission_period){case"Weekly":r=o()().endOf("week").format("YYYY-MM-DD");break;case"Monthly":r=o()().endOf("month").format("YYYY-MM-DD");break;default:r=o()().endOf("day").format("YYYY-MM-DD")}return r}return e},formattedDateRange:function(){var t=o()(this.date_range[0]).format("MMM DD, YYYY"),e=o()(this.date_range[1]).format("MMM DD, YYYY");return JSON.stringify(t)==JSON.stringify(e)||null==JSON.stringify(e)?t:"".concat(t," ~ ").concat(e)},print_format:function(){return{pageSize:{width:72*this.$store.getters.settings.expense_report.print_format.pageSize.width,height:72*this.$store.getters.settings.expense_report.print_format.pageSize.height},pageOrientation:this.$store.getters.settings.expense_report.print_format.pageOrientation,pageMargins:[72*this.$store.getters.settings.expense_report.print_format.pageMargins.left,72*this.$store.getters.settings.expense_report.print_format.pageMargins.top,72*this.$store.getters.settings.expense_report.print_format.pageMargins.right,72*this.$store.getters.settings.expense_report.print_format.pageMargins.bottom],defaultStyle:{font:this.$store.getters.settings.expense_report.print_format.defaultStyle.font}}},base64Image:function(){var t=this.$store.getters.settings.expense_report.print_format.background.image;return t||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII="},isValidSubmit:function(){return 0!=this.selected.length&&!(this.selectedCount.submitted>0||this.selectedCount.approved>0||this.selectedCount.rejected>0||this.selectedCount.deleted>0)},isValidApprove:function(){var t=this.selected.length;this.selected.filter((function(t){return null==t.approved_at})).length;return 0!=t&&(!(this.selectedCount.approved>0||this.selectedCount.rejected>0||this.selectedCount.deleted>0)&&!!this.$store.getters.user.is_admin)},isValidReject:function(){var t=this.selected.length;this.selected.filter((function(t){return null==t.submitted_at})).length;return 0!=t&&(!(this.selectedCount.rejected>0||this.selectedCount.deleted>0)&&!!this.$store.getters.user.is_admin)},isValidDelete:function(){var t=this.selected.length;this.selected.filter((function(t){return null==t.deleted_at})).length;return 0!=t&&!(this.selectedCount.deleted>0)},isValidDuplicate:function(){return 1===this.selected.length},isValidPrint:function(){var t=this.selected.filter((function(t){return null==t.submitted_at||null!=t.deleted_at})).length;return 0!=this.selected.length&&!(t>0)},selectedCount:function(){return{submitted:this.selected.filter((function(t){return null!=t.submitted_at&&null==t.approved_at&&null==t.rejected_at&&null==t.deleted_at})).length,approved:this.selected.filter((function(t){return null!=t.submitted_at&&null!=t.approved_at&&null==t.rejected_at&&null==t.deleted_at})).length,rejected:this.selected.filter((function(t){return null!=t.rejected_at&&null==t.deleted_at})).length,deleted:this.selected.filter((function(t){return null!=t.deleted_at})).length}}},activated:function(){var t=this;this.$route.params.status&&(this.status=this.$route.params.status),this.$route.params.date_range&&(this.date_range=this.$route.params.date_range),this.$store.dispatch("AUTH_USER"),this.loadTotalCountReportStatus(),this.loadExpenseTypes(),this.getDataFromApi().then((function(e){t.items=e.items,t.totalItems=e.total,t.formDataLoaded=!0}))}},_=r(4),g=Object(_.a)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.formDataLoaded?r("v-card",{staticClass:"elevation-0 pt-0"},[r("page-header",{attrs:{title:"Expense Reports"},scopedSlots:t._u([{key:"actions",fn:function(){return[r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([t.mixin_can("add expense reports")?{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-btn",t._g(t._b({staticClass:"elevation-3 mr-2",attrs:{color:"green",to:{name:"user.expense_reports.create"},dark:"",fab:"","x-small":""}},"v-btn",a,!1),n),[r("v-icon",{attrs:{dark:""}},[t._v("mdi-plus")])],1)]}}:null],null,!0)},[t._v(" "),r("span",[t._v("Add New")])])]},proxy:!0},{key:"sub-actions",fn:function(){return[r("DateRangePicker",{ref:"dateRangePicker",attrs:{dateRange:t.date_range},on:{"on-change":t.updateDates},scopedSlots:t._u([{key:"openDialog",fn:function(e){var n=e.on,a=e.attrs,s=e.dateRangeText;return[r("v-btn",t._g(t._b({staticClass:"ml-0 pl-0",attrs:{text:""}},"v-btn",a,!1),n),[t._v("\n                            "+t._s(s)+"\n                        ")])]}}])})]},proxy:!0}])}),t._v(" "),r("v-row",{staticClass:"ml-4 mb-2"},[t.selected.length>0?r("v-chip",{staticClass:"mr-2",attrs:{color:"green",dark:"",close:"",small:"","close-icon":"mdi-close"},on:{"click:close":function(e){t.selected=[]}}},[t._v("\n                "+t._s(t.selected.length)+" Selected\n            ")]):t._e(),t._v(" "),r("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":"",right:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[null!=t.status?r("v-chip",t._g(t._b({staticClass:"mr-2",attrs:{small:""}},"v-chip",a,!1),n),[t._v("\n                        "+t._s(t.status)+"\n                    ")]):t._e()]}}])},[t._v(" "),r("v-card",[r("v-list",[r("v-list-item",[r("v-select",{attrs:{items:t.statuses,label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1)],1)],1),t._v(" "),t.$store.getters.user.is_admin&&t.mixin_can("view all users expense reports")?r("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:t.user,usersParameters:{params:{is_superadmin:!1}}},on:{selectUser:t.selectUser,onReset:t.resetUser},scopedSlots:t._u([{key:"openDialog",fn:function(e){var n=e.bind,a=e.on,s=e.computedSelectedUser;return[r("v-chip",t._g(t._b({staticClass:"mr-2 mb-2",attrs:{small:""}},"v-chip",n,!1),a),[t._v("\n                        "+t._s(s?s.name:"All Employees")+"\n                    ")])]}}],null,!1,2347878303)}):t._e(),t._v(" "),r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-refresh"},on:{"click:close":t.onRefresh}},[t._v("\n                Refresh\n            ")]),t._v(" "),t.totalUnsubmitted>0?r("v-chip",{staticClass:"mr-2",attrs:{color:"red",dark:"",small:"",close:"","close-icon":"mdi-alert"},on:{"click:close":t.showAllUnsubmitted}},[t._v("\n                Unsubmitted ("+t._s(t.totalUnsubmitted)+")\n            ")]):t._e(),t._v(" "),t.totalUnapproved>0?r("v-chip",{staticClass:"mr-2",attrs:{color:"red",dark:"",close:"",small:"","close-icon":"mdi-alert"},on:{"click:close":t.showAllUnapproved}},[t._v("\n                For Approval ("+t._s(t.totalUnapproved)+")\n            ")]):t._e()],1),t._v(" "),t.selected.length>0?r("v-row",{staticClass:"ml-4"},[t.isValidSubmit?r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-send",color:"blue",dark:""},on:{"click:close":t.onSubmit}},[t._v("\n                Submit\n            ")]):t._e(),t._v(" "),t.isValidApprove?r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-check",color:"green",dark:""},on:{"click:close":t.onApprove}},[t._v("\n                Approve\n            ")]):t._e(),t._v(" "),t.isValidReject?r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-cancel",color:"red",dark:""},on:{"click:close":t.onReject}},[t._v("\n                Reject\n            ")]):t._e(),t._v(" "),t.isValidDelete?r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-close",color:"red",dark:""},on:{"click:close":t.onDelete}},[t._v("\n                Delete\n            ")]):t._e(),t._v(" "),t.isValidDuplicate?r("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-content-copy"},on:{"click:close":t.onDuplicate}},[t._v("\n                Duplicate\n            ")]):t._e()],1):t._e(),t._v(" "),r("v-card-subtitle",[r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),r("v-card-text",[r("v-data-table",{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.items,loading:t.loading,options:t.options,"server-items-length":t.totalItems,"footer-props":{itemsPerPageOptions:[10,20,50,100],showFirstLastPage:!0,firstIcon:"mdi-page-first",lastIcon:"mdi-page-last",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"},"show-expand":"","single-expand":"","show-select":"","item-key":"id"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"item.status.status",fn:function(e){var n=e.item;return[r("v-chip",{attrs:{color:n.status.color,dark:"",small:""}},[t._v(t._s(n.status.status))])]}},{key:"item.date",fn:function(e){var r=e.item;return[t._v("\n                    "+t._s(r.from)+" ~ "+t._s(r.to)+"\n                ")]}},{key:"expanded-item",fn:function(e){var n=e.headers,a=e.item;return[r("td",{attrs:{colspan:n.length}},[r("v-container",[r("table",[r("tr",[r("td",[r("strong",[t._v("Reimbursable Amount")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatNumber(a.total_reimbursable))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Paid")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatNumber(a.paid))+"\n                                    ")])]),t._v(" "),a.balance>0?r("tr",[r("td",[r("strong",[t._v("Balance")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatNumber(a.balance))+"\n                                    ")])]):t._e(),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Status")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(a.status.status)+"\n                                        ("+t._s(a.status.remarks)+")\n                                    ")])]),t._v(" "),a.remarks?r("tr",[r("td",[r("strong",[t._v("Remarks")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v(t._s(a.remarks))])]):t._e(),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Created")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(a.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Submitted")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(a.submitted_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Approved")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(a.approved_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Late Submitted")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v(t._s(a.is_late_submitted))])]),t._v(" "),r("tr",[r("td",[r("strong",[t._v("Late Approved")])]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v(t._s(a.is_late_approved))])])])])],1)]}},{key:"item.total",fn:function(e){var r=e.item;return[t._v("\n                    "+t._s(t.mixin_formatNumber(r.total))+"\n                ")]}},{key:"item.user",fn:function(e){var r=e.item;return[t._v("\n                    "+t._s(r.user.last_name+", "+r.user.first_name)+"\n                ")]}},{key:"item.updated_at",fn:function(e){var r=e.item;return[t._v("\n                    "+t._s(t.mixin_getHumanDate(r.updated_at))+"\n                ")]}},{key:"item.actions",fn:function(e){var n=e.item;return[r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.onShow(n)}}},[t._v("\n                        mdi-eye\n                    ")]),t._v(" "),t.show_edit(n)?r("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.onEdit(n)}}},[t._v("\n                        mdi-pencil\n                    ")]):t._e(),t._v(" "),n.is_late_submitted||n.is_late_approved?r("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,a=e.attrs;return[r("v-icon",t._g(t._b({attrs:{color:"red",dark:""}},"v-icon",a,!1),n),[t._v("\n                                mdi-alert-circle-outline\n                            ")])]}}],null,!0)},[t._v(" "),n.is_late_submitted?r("div",[t._v("\n                            Late Submitted\n                        ")]):t._e(),t._v(" "),n.is_late_approved?r("div",[t._v("\n                            Late Approved\n                        ")]):t._e()]):t._e()]}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t._v(" "),t.items.length>0?r("template",{slot:"body.append"},[r("tr",{staticClass:"green--text hidden-md-and-up"},[r("td",{staticClass:"title"},[t._v("\n                            Total: "),r("strong",[t._v(t._s(t.totalAmount))])])]),t._v(" "),r("tr",{staticClass:"green--text hidden-sm-and-down"},[r("td",{staticClass:"title"},[t._v("Total")]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td",[r("strong",[t._v(t._s(t.totalAmount))])]),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td"),t._v(" "),r("td")])]):t._e()],2),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",md:"8"}},[r("div",[r("h4",{staticClass:"green--text"},[t._v("\n                            Note:\n                        ")]),t._v(" "),r("h4",{staticClass:"grey--text"},[t._v("\n                            Due of submission of expense reports :\n                            "+t._s(t.$store.getters.settings.submission_period)+"\n                            ("+t._s(t.maxDate)+")\n                        ")]),t._v(" "),r("h4",{staticClass:"grey--text"},[t._v("\n                            Approval period of expense reports :\n                            "+t._s(t.$store.getters.settings.approval_period)+"\n                            days upon submission\n                        ")]),t._v(" "),t.warning?r("h4",{staticClass:"red--text"},[t._v("\n                            "+t._s(t.warning)+"\n                        ")]):t._e()])]),t._v(" "),t.isValidPrint?r("v-col",{attrs:{cols:"12",md:"4"}},[r("div",{staticClass:"text-right"},[r("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.attrs,a=e.on;return[r("v-btn",t._g(t._b({attrs:{color:"green",dark:""}},"v-btn",n,!1),a),[t._v("\n                                    Print\n                                ")])]}}],null,!1,3416937892)},[t._v(" "),r("v-list",[r("v-list-item",{on:{click:function(e){return t.printReport("","all_expenses",!1)}}},[r("v-list-item-title",[t._v("\n                                        Group by expense\n                                    ")])],1),t._v(" "),t.$store.getters.user.is_admin?r("v-list-item",{on:{click:function(e){return t.printReport("","expenses_by_user",!1)}}},[r("v-list-item-title",[t._v("\n                                        Group by user\n                                    ")])],1):t._e(),t._v(" "),r("v-list-item",{on:{click:function(e){return t.printReport("","expenses_by_date",!1)}}},[r("v-list-item-title",[t._v("\n                                        Group by date\n                                    ")])],1)],1)],1),t._v(" "),r("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.attrs,a=e.on;return[r("v-btn",t._g(t._b({attrs:{color:"green",dark:""}},"v-btn",n,!1),a),[t._v("\n                                    Export to PDF\n                                ")])]}}],null,!1,406309944)},[t._v(" "),r("v-list",[r("v-list-item",{on:{click:function(e){return t.printReport("","all_expenses",!0)}}},[r("v-list-item-title",[t._v("\n                                        Group by expense\n                                    ")])],1),t._v(" "),t.$store.getters.user.is_admin?r("v-list-item",{on:{click:function(e){return t.printReport("","expenses_by_user",!0)}}},[r("v-list-item-title",[t._v("\n                                        Group by user\n                                    ")])],1):t._e(),t._v(" "),r("v-list-item",{on:{click:function(e){return t.printReport("","expenses_by_date",!0)}}},[r("v-list-item-title",[t._v("\n                                        Group by date\n                                    ")])],1)],1)],1)],1)]):t._e()],1)],1)],1):r("loader-component")],1)}),[],!1,null,null,null);e.default=g.exports}}]);