(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{149:function(e,t,r){"use strict";var n=r(10),a=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getAll",value:function(e){return a.a.get("/api/permissions",e)}},{key:"get",value:function(e){return a.a.get("/api/data/permissions",e)}}])&&o(t.prototype,r),n&&o(t,n),e}();t.a=new s},150:function(e,t,r){"use strict";var n=r(59),a={props:{selectedDepartment:{type:Object,default:null},selectedJob:{type:Object,default:null},parameters:{type:Object,default:function(){}},rules:{type:Array,default:function(){return[]}},errors:{type:Array,default:function(){return[]}},showAll:{type:Boolean,default:!1}},data:function(){return{department:null,jobs:[],job:null}},methods:{getDataFromApi:function(){var e=this;this.department&&this.department.id;return new Promise((function(t,r){n.a.getAll({params:{department_id:e.department?e.department.id:null,itemsPerPage:200,isSelection:!0}}).then((function(e){t(e.data)})).catch((function(t){e.mixin_showErrors(t),r()}))}))},onReset:function(){var e=this;this.job=null,this.getDataFromApi().then((function(t){e.jobs=t.data,e.showAll&&e.jobs.unshift({id:null,name:"All Job Designations"})})),this.$emit("onReset")},onChange:function(e){var t=this;this.job=e,this.getDataFromApi().then((function(e){t.jobs=e.data,t.showAll&&t.jobs.unshift({id:null,name:"All Job Designations"})})),this.$emit("onChange",e)}},created:function(){var e=this;this.getDataFromApi().then((function(t){e.jobs=t.data,e.showAll&&e.jobs.unshift({id:null,name:"All Job Designations"})}))},activated:function(){var e=this;this.getDataFromApi().then((function(t){e.jobs=t.data,e.showAll&&e.jobs.unshift({id:null,name:"All Job Designations"})}))},watch:{selectedJob:{deep:!0,immediate:!0,handler:function(e,t){this.job=e}},selectedDepartment:{deep:!0,immediate:!0,handler:function(e,t){this.department=e,this.job=null}},department:function(){var e=this;this.getDataFromApi().then((function(t){e.jobs=t.data,e.showAll&&e.jobs.unshift({id:null,name:"All Job Designations"})}))}}},o=r(4),s=Object(o.a)(a,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("v-autocomplete",{attrs:{label:"Job Designation","item-value":"id","item-text":"name","return-object":"",items:e.jobs,rules:e.rules,"error-messages":e.errors},on:{change:e.onChange},model:{value:e.job,callback:function(t){e.job=t},expression:"job"}})}),[],!1,null,null,null);t.a=s.exports},154:function(e,t,r){"use strict";var n=r(1),a=r.n(n),o=r(150),s=r(149),i={components:{JobDropdownSelector:o.a},props:{userForm:{type:Object,default:function(){return{code:null,first_name:null,middle_name:"",last_name:null,suffix:"",gender:null,birthdate:null,mobile_number:null,telephone_number:"",address:null,fund:0,remaining_fund:0,username:"",email:null,password:"password",password_confirmation:"password",is_admin:!1,is_superadmin:!1,can_login:!0,is_active:!0,type:"employee",job:null,permissions:[],role:"Standard User"}}},errors:{type:Object,default:function(){return{code:[],first_name:[],middle_name:[],last_name:[],suffix:[],gender:[],birthdate:[],job:[],mobile_number:[],telephone_number:[],email:[],address:[],username:[],role:[],can_login:[],is_active:[],has_fund:[],fund:[]}}},rules:{type:Object,default:function(){return{}}},isEdit:{type:Boolean,default:!1}},data:function(){return{panel:[0,1,2],valid:!1,menu:!1,collections:{permissions:[],headers:[{text:"Permission",value:"name",sortable:!1}]},form:{code:null,first_name:null,middle_name:"",last_name:null,suffix:"",gender:null,birthdate:null,mobile_number:null,telephone_number:"",address:null,fund:0,remaining_fund:0,username:"",email:null,password:"password",password_confirmation:"password",is_admin:!1,is_superadmin:!1,can_login:!0,is_active:!0,type:"employee",job:null,permissions:[],role:"Standard User"}}},methods:{onChangeJob:function(e){this.errors.job_id=[],this.form.job=e},onSave:function(){this.$refs.form.validate()&&this.$emit("on-save",this.form)},loadPermissions:function(){var e=this;s.a.get({params:{role:this.form.role}}).then((function(t){e.collections.permissions=t.data,e.form.permissions=t.data})).catch((function(t){e.mixin_showErrors(t)}))}},computed:{maxDate:function(){return a()().format("YYYY-MM-DD")}},watch:{userForm:{deep:!0,immediate:!0,handler:function(e,t){this.form=e}},"form.role":function(){this.loadPermissions()}},created:function(){this.loadPermissions()},activated:function(){this.loadPermissions()}},l=r(4),u=Object(l.a)(i,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[r("v-expansion-panels",{attrs:{flat:"",multiple:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[r("v-expansion-panel",[r("v-expansion-panel-header",[r("div",{staticClass:"overline green--text"},[e._v("\n                    Basic Details\n                ")])]),e._v(" "),r("v-expansion-panel-content",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("JobDropdownSelector",{ref:"jobSelector",attrs:{selectedJob:e.form.job,rules:e.mixin_validation.required,errors:e.errors.job_id},on:{onChange:e.onChangeJob},model:{value:e.form.job,callback:function(t){e.$set(e.form,"job",t)},expression:"form.job"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(100)),counter:100,"error-messages":e.errors.code,label:"Code",required:""},on:{input:function(t){e.errors.code=[]}},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(100)),counter:100,"error-messages":e.errors.first_name,label:"First Name",required:""},on:{input:function(t){e.errors.first_name=[]}},model:{value:e.form.first_name,callback:function(t){e.$set(e.form,"first_name",t)},expression:"form.first_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{counter:100,"error-messages":e.errors.middle_name,label:"Middle Name"},on:{input:function(t){e.errors.middle_name=[]}},model:{value:e.form.middle_name,callback:function(t){e.$set(e.form,"middle_name",t)},expression:"form.middle_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(100)),counter:100,"error-messages":e.errors.last_name,label:"Last Name",required:""},on:{input:function(t){e.errors.last_name=[]}},model:{value:e.form.last_name,callback:function(t){e.$set(e.form,"last_name",t)},expression:"form.last_name"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-combobox",{attrs:{counter:30,items:["Jr","Sr","II","III"],"error-messages":e.errors.suffix,label:"Suffix"},on:{input:function(t){e.errors.suffix=[]}},model:{value:e.form.suffix,callback:function(t){e.$set(e.form,"suffix",t)},expression:"form.suffix"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-select",{attrs:{rules:e.mixin_validation.required,items:["Male","Female"],"error-messages":e.errors.gender,label:"Gender",required:""},on:{input:function(t){e.errors.gender=[]}},model:{value:e.form.gender,callback:function(t){e.$set(e.form,"gender",t)},expression:"form.gender"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[r("v-text-field",e._g(e._b({attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.birthdate,label:"Birthdate",readonly:""},on:{input:function(t){e.errors.birthdate=[]}},model:{value:e.form.birthdate,callback:function(t){e.$set(e.form,"birthdate",t)},expression:"form.birthdate"}},"v-text-field",a,!1),n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),r("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"success",max:e.maxDate},model:{value:e.form.birthdate,callback:function(t){e.$set(e.form,"birthdate",t)},expression:"form.birthdate"}})],1)],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required,counter:30,"error-messages":e.errors.mobile_number,label:"Mobile Number",type:"number"},on:{input:function(t){e.errors.mobile_number=[]}},model:{value:e.form.mobile_number,callback:function(t){e.$set(e.form,"mobile_number",t)},expression:"form.mobile_number"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{counter:30,"error-messages":e.errors.telephone_number,label:"Telephone Number",type:"number"},on:{input:function(t){e.errors.telephone_number=[]}},model:{value:e.form.telephone_number,callback:function(t){e.$set(e.form,"telephone_number",t)},expression:"form.telephone_number"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.email),"error-messages":e.errors.email,label:"Email Address"},on:{input:function(t){e.errors.email=[]}},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("v-textarea",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.address,label:"Address",rows:"1"},on:{input:function(t){e.errors.address=[]}},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),e.isEdit?e._e():r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-checkbox",{attrs:{label:"has Revolving Fund","error-messages":e.errors.has_fund},model:{value:e.form.has_fund,callback:function(t){e.$set(e.form,"has_fund",t)},expression:"form.has_fund"}})],1)],1),e._v(" "),e.form.has_fund&&!e.isEdit?r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{label:"Revolving Fund","error-messages":e.errors.fund,type:"number"},on:{input:function(t){e.errors.fund=[]}},model:{value:e.form.fund,callback:function(t){e.$set(e.form,"fund",t)},expression:"form.fund"}})],1)],1):e._e()],1)],1),e._v(" "),r("v-expansion-panel",[r("v-expansion-panel-header",[r("div",{staticClass:"overline green--text"},[e._v("\n                    Account Details\n                ")])]),e._v(" "),r("v-expansion-panel-content",[e.isEdit?e._e():r("small",{staticClass:"text--secondary"},[e._v('\n                    Default Password: "password"\n                ')]),e._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(50)),counter:50,"error-messages":e.errors.username,label:"Username",required:""},on:{input:function(t){e.errors.username=[]}},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),e.isEdit?e._e():r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-checkbox",{attrs:{label:"Active Account","error-messages":e.errors.is_active},model:{value:e.form.is_active,callback:function(t){e.$set(e.form,"is_active",t)},expression:"form.is_active"}})],1),e._v(" "),e.isEdit?e._e():r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-checkbox",{attrs:{label:"Allow Login","error-messages":e.errors.can_login},model:{value:e.form.can_login,callback:function(t){e.$set(e.form,"can_login",t)},expression:"form.can_login"}})],1),e._v(" "),e.isEdit?e._e():r("v-col",{attrs:{cols:"12",md:"4"}},[r("v-radio-group",{attrs:{row:"",label:"Role"},model:{value:e.form.role,callback:function(t){e.$set(e.form,"role",t)},expression:"form.role"}},[r("v-radio",{attrs:{label:"Standard User",value:"Standard User"}}),e._v(" "),r("v-radio",{attrs:{label:"Administrator",value:"Administrator"}})],1)],1)],1),e._v(" "),e.isEdit?e._e():r("v-row",[r("v-col",[r("v-data-table",{attrs:{"show-select":"","items-per-page":-1,headers:e.collections.headers,items:e.collections.permissions,"group-by":"category"},model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}})],1)],1)],1)],1)],1),e._v(" "),r("v-row",[r("v-col",{staticClass:"text-right"},[r("v-btn",{attrs:{color:"success",dark:""},on:{click:e.onSave}},[e._v("Save")]),e._v(" "),r("v-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("Cancel")])],1)],1)],1)}),[],!1,null,null,null);t.a=u.exports},24:function(e,t,r){"use strict";var n=r(10),a=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"get",value:function(e){return a.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return a.a.get("/api/users",e)}},{key:"show",value:function(e,t){return a.a.get("/api/users/".concat(e),t)}},{key:"store",value:function(e){return a.a.post("/api/users",e)}},{key:"update",value:function(e,t){return a.a.put("/api/users/".concat(e),t)}},{key:"delete",value:function(e,t){return a.a.delete("/api/users/".concat(e),t)}},{key:"restore",value:function(e,t){return a.a.put("/api/users/restore/".concat(e),t)}},{key:"updatePassword",value:function(e,t){return a.a.put("/api/users/update_password/".concat(e),t)}},{key:"resetPassword",value:function(e,t){return a.a.put("/api/users/reset_password/".concat(e),t)}},{key:"verifyEmail",value:function(e,t){return a.a.put("/api/users/verify_email/".concat(e),t)}},{key:"updateFund",value:function(e,t){return a.a.put("/api/users/update_fund/".concat(e),t)}},{key:"updateSettings",value:function(e,t){return a.a.put("/api/users/update_settings/".concat(e),t)}},{key:"updatePermissions",value:function(e,t){return a.a.put("/api/users/update_permissions/".concat(e),t)}},{key:"updateProfile",value:function(e,t){return a.a.put("/api/users/update_profile/".concat(e),t)}},{key:"updateActivation",value:function(e,t){return a.a.put("/api/users/update_activation/".concat(e),t)}},{key:"export",value:function(){return a.a.get("/api/users/export/data")}}])&&o(t.prototype,r),n&&o(t,n),e}();t.a=new s},59:function(e,t,r){"use strict";var n=r(10),a=r.n(n);function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n;return t=e,(r=[{key:"getAll",value:function(e){return a.a.get("/api/jobs",e)}},{key:"get",value:function(e){return a.a.get("/api/data/jobs",e)}},{key:"show",value:function(e,t){return a.a.get("/api/jobs/".concat(e),t)}},{key:"store",value:function(e){return a.a.post("/api/jobs",e)}},{key:"update",value:function(e,t){return a.a.put("/api/jobs/".concat(e),t)}},{key:"delete",value:function(e,t){return a.a.delete("/api/jobs/".concat(e),t)}},{key:"restore",value:function(e,t){return a.a.put("/api/jobs/restore/".concat(e),t)}}])&&o(t.prototype,r),n&&o(t,n),e}();t.a=new s},898:function(e,t,r){"use strict";r.r(t);var n=r(154),a=r(24),o=r(59),s={components:{Form:n.a},data:function(){return{formDataLoaded:!1,loader:!0,form:{code:null,first_name:null,middle_name:"",last_name:null,suffix:"",gender:null,birthdate:null,mobile_number:null,telephone_number:"",address:null,fund:0,remaining_fund:0,username:"",email:null,password:"password",password_confirmation:"password",is_admin:!1,is_superadmin:!1,type:"employee",job:null,is_active:!0},errors:{code:[],first_name:[],middle_name:[],last_name:[],suffix:[],gender:[],birthdate:[],job:[],mobile_number:[],telephone_number:[],email:[],address:[],username:[],role:[],has_fund:[],fund:[],is_active:[]}}},methods:{getData:function(){var e=this;return new Promise((function(t,r){a.a.show(e.$route.params.id).then((function(r){e.loader=!1,e.formDataLoaded=!0,t(r.data)})).catch((function(t){e.mixin_showErrors(t),e.loader=!1,e.formDataLoaded=!0,e.$router.push("/users"),r()}))}))},getInitialJob:function(){var e=this;o.a.show(this.form.job.id).then((function(t){e.form.job=t.data.data})).catch((function(t){e.mixin_showErrors(t),reject()}))},onSave:function(e){var t=this;this.loader=!0;var r="Administrator"==e.role;e.is_admin=r,e.job_id=e.job.id,e.password="password",e.password_confirmation="password",a.a.update(this.$route.params.id,e).then((function(e){t.mixin_successDialog(e.data.status,e.data.message),t.loader=!1,t.$router.push("/users")})).catch((function(e){t.mixin_showErrors(e),e.response&&e.response.data&&(t.errors=e.response.data.errors),t.loader=!1}))}},created:function(){var e=this;this.getData().then((function(t){e.form=t.data,e.formDataLoaded=!0,e.getInitialJob()}))},activated:function(){var e=this;this.getData().then((function(t){e.form=t.data,e.formDataLoaded=!0,e.getInitialJob()}))}},i=r(4),l=Object(i.a)(s,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.formDataLoaded?r("v-card",{staticClass:"elevation-0 pt-0"},[r("v-card-title",{staticClass:"pt-0"},[r("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(t){return e.$router.go(-1)}}},[r("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),r("v-spacer"),e._v(" "),r("h4",{staticClass:"title success--text"},[e._v("Edit Employee")])],1),e._v(" "),r("v-container",[e.formDataLoaded?r("Form",{attrs:{isEdit:!0,errors:e.errors,userForm:e.form},on:{"on-save":e.onSave}}):e._e()],1)],1):r("loader-component")],1)}),[],!1,null,null,null);t.default=l.exports}}]);