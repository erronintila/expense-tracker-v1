(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{24:function(e,t,a){"use strict";var r=a(10),n=a.n(r);function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"get",value:function(e){return n.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return n.a.get("/api/users",e)}},{key:"show",value:function(e,t){return n.a.get("/api/users/".concat(e),t)}},{key:"store",value:function(e){return n.a.post("/api/users",e)}},{key:"update",value:function(e,t){return n.a.put("/api/users/".concat(e),t)}},{key:"delete",value:function(e,t){return n.a.delete("/api/users/".concat(e),t)}},{key:"restore",value:function(e,t){return n.a.put("/api/users/restore/".concat(e),t)}},{key:"updatePassword",value:function(e,t){return n.a.put("/api/users/update_password/".concat(e),t)}},{key:"resetPassword",value:function(e,t){return n.a.put("/api/users/reset_password/".concat(e),t)}},{key:"verifyEmail",value:function(e,t){return n.a.put("/api/users/verify_email/".concat(e),t)}},{key:"updateFund",value:function(e,t){return n.a.put("/api/users/update_fund/".concat(e),t)}},{key:"updateSettings",value:function(e,t){return n.a.put("/api/users/update_settings/".concat(e),t)}},{key:"updatePermissions",value:function(e,t){return n.a.put("/api/users/update_permissions/".concat(e),t)}},{key:"updateProfile",value:function(e,t){return n.a.put("/api/users/update_profile/".concat(e),t)}},{key:"updateActivation",value:function(e,t){return n.a.put("/api/users/update_activation/".concat(e),t)}},{key:"export",value:function(){return n.a.get("/api/users/export/data")}}])&&s(t.prototype,a),r&&s(t,r),e}();t.a=new o},27:function(e,t,a){"use strict";var r={name:"page-header",props:{title:""}},n=a(4),s=Object(n.a)(r,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card-title",{staticClass:"pt-0"},[a("h4",{staticClass:"title green--text"},[e._v(e._s(e.title))]),e._v(" "),a("v-spacer"),e._v(" "),e._t("actions")],2),e._v(" "),a("v-card-subtitle",[e._t("sub-actions")],2)],1)}),[],!1,null,null,null);t.a=s.exports},28:function(e,t,a){"use strict";var r=a(24);function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i={props:{selectedUsers:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedUser:{type:Object,default:null},usersParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["first_name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,a){var n=e.options,o=n.sortBy,i=n.sortDesc,c=n.page,l=n.itemsPerPage,u={search:e.filters.search.trim().toLowerCase(),sortBy:o[0],sortType:i[0]?"desc":"asc",page:c,itemsPerPage:l,isSelection:!0,is_active:!0},d={};d=e.usersParameters&&e.usersParameters.params?{params:s(s({},u),e.usersParameters.params)}:{params:s({},u)},r.a.getAll(d).then((function(a){e.loading=!1,t(a.data)})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,a()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedUser=null,this.options={sortBy:["last_name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedUser)},selectUser:function(e){this.computedSelectedUser=e,this.$emit("selectUser",e)},getJobName:function(e){return e.job?e.job.name:""},getDepartmentName:function(e){return e.job&&e.job.department?e.job.department.name:""}},watch:{"filters.search":function(){var e=this;""==this.filters.search&&this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},params:{handler:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},deep:!0},dialog:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},computed:{params:function(e){return s({},this.options)},computedSelectedUser:{get:function(){return this.selectedUser?this.selectedUser:null},set:function(e){return e}}},created:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},c=a(4),l=Object(c.a)(i,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[e._t("openDialog",null,null,{attrs:r,on:a,computedSelectedUser:e.computedSelectedUser})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),a("v-card",[a("v-card-title",[e._v("\n                Employees\n                "),a("v-spacer"),e._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),e._v(" "),a("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[a("v-list-item-group",{attrs:{"active-class":"green--text",multiple:e.multipleSelection},on:{change:e.selectUser},model:{value:e.computedSelectedUser,callback:function(t){e.computedSelectedUser=t},expression:"computedSelectedUser"}},[e._l(e.collections.items,(function(t,r){return[a("v-list-item",{key:r,attrs:{value:t}},[[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),e._v(" "),a("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:e._s(e.getJobName(t))}}),e._v(" "),a("v-list-item-subtitle",{domProps:{textContent:e._s(e.getDepartmentName(t))}})],1)]],2)]}))],2)],1),e._v(" "),a("div",[a("v-pagination",{attrs:{length:e.meta.last_page,"total-visible":7},model:{value:e.options.page,callback:function(t){e.$set(e.options,"page",t)},expression:"options.page"}})],1),e._v(" "),a("v-divider"),e._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.onReset}},[e._v("\n                    Reset\n                ")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=l.exports},51:function(e,t,a){"use strict";var r=a(1),n=a.n(r),s={props:{dateRange:{type:Array,default:function(){return[n()().startOf("month").format("YYYY-MM-DD"),n()().endOf("month").format("YYYY-MM-DD")]}},datePreset:{type:String,default:"Custom"},datePresets:{type:Array,default:function(){return[{label:"Today",range:[n()().format("YYYY-MM-DD"),n()().format("YYYY-MM-DD")]},{label:"Yesterday",range:[n()().subtract(1,"days").format("YYYY-MM-DD"),n()().subtract(1,"days").format("YYYY-MM-DD")]},{label:"This Week",range:[n()().startOf("week").format("YYYY-MM-DD"),n()().endOf("week").format("YYYY-MM-DD")]},{label:"Last Week",range:[n()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),n()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")]},{label:"This Month",range:[n()().startOf("month").format("YYYY-MM-DD"),n()().endOf("month").format("YYYY-MM-DD")]},{label:"Last Month",range:[n()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),n()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")]},{label:"This Quarter",range:[n()().startOf("quarter").format("YYYY-MM-DD"),n()().endOf("quarter").format("YYYY-MM-DD")]},{label:"Last Quarter",range:[n()().subtract(1,"quarters").startOf("quarter").format("YYYY-MM-DD"),n()().subtract(1,"quarters").endOf("quarter").format("YYYY-MM-DD")]},{label:"This Year",range:[n()().startOf("year").format("YYYY-MM-DD"),n()().endOf("year").format("YYYY-MM-DD")]},{label:"Last Year",range:[n()().subtract(1,"years").startOf("year").format("YYYY-MM-DD"),n()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]},{label:"Last 5 Years",range:[n()().subtract(5,"years").startOf("year").format("YYYY-MM-DD"),n()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]}]}}},data:function(){return{range:[],preset:{},presets:[],dialog:!1}},methods:{onCancel:function(){this.dialog=!1,this.preset={}},onSave:function(){if(this.range&&2==this.range.length){var e=this.range.sort((function(e,t){return new Date(e)-new Date(t)}));return this.$refs.dialog.save(e),void this.$emit("on-change",e)}this.dialog=!0}},computed:{dateRangeText:function(){return this.range&&this.range.length?this.range.sort((function(e,t){return new Date(e)-new Date(t)})).join(" ~ "):""}},watch:{preset:function(){this.preset&&Object.keys(this.preset).length&&(this.range=this.preset.range)},dateRange:{immediate:!0,handler:function(e,t){this.range=e}},datePreset:{immediate:!0,handler:function(e,t){this.preset=e}},datePresets:{immediate:!0,handler:function(e,t){this.presets=e}}}},o=a(4),i=Object(o.a)(s,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{ref:"dialog",attrs:{"return-value":e.range,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.range=t},"update:return-value":function(t){e.range=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,r=t.attrs;return[e._t("openDialog",null,null,{on:a,attrs:r,dateRangeText:e.dateRangeText})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),a("v-card",[a("v-container",[a("v-row",[a("v-col",[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-btn",e._g(e._b({attrs:{color:"primary",dark:"",text:""}},"v-btn",n,!1),r),[a("v-icon",[e._v("mdi-calendar")]),e._v("Â \n                  "+e._s(e.dateRangeText)+"\n                ")],1)]}}])},[e._v(" "),a("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"200px"}},[a("v-list-item-group",{model:{value:e.preset,callback:function(t){e.preset=t},expression:"preset"}},e._l(e.presets,(function(t,r){return a("v-list-item",{key:r,attrs:{value:t}},[a("v-list-item-title",[e._v("\n                      "+e._s(t.label)+"\n                    ")])],1)})),1)],1)],1)],1),e._v(" "),e.range&&2!=e.range.length?a("div",{staticClass:"overline red--text text-capitalize"},[e._v("\n            *select 1 more\n          ")]):e._e()])],1),e._v(" "),a("v-divider")],1),e._v(" "),a("v-date-picker",{attrs:{color:"green","no-title":"",range:"",scrollable:""},on:{change:function(t){e.preset={}}},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}},[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onCancel}},[e._v(" Cancel ")]),e._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onSave}},[e._v(" OK ")])],1)],1)],1)}),[],!1,null,null,null);t.a=i.exports},877:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),s=a(27),o=a(51),i=a(28),c=a(10),l=a.n(c);function u(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"getAll",value:function(e){return l.a.get("/api/activity_logs",e)}},{key:"export",value:function(e){return l.a.get("/api/activity_logs/export/data",e)}}])&&u(t.prototype,a),r&&u(t,r),e}());function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){m(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function m(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var v={components:{PageHeader:s.a,DateRangePicker:o.a,UserDialogSelector:i.a},data:function(){return{loading:!0,formDataLoaded:!1,collections:{activityLogs:[],selectedActivityLogs:[],export_data:[],headers:[{text:"User",value:"user",sortable:!1},{text:"Description",value:"description",sortable:!1},{text:"Created",value:"created_at"},{text:"Actions",value:"actions",sortable:!1},{text:"",value:"data-table-expand"}]},filters:{search:"",preset:"",selectedUser:null,date_range:[n()().startOf("month").format("YYYY-MM-DD"),n()().endOf("month").format("YYYY-MM-DD")],presets:["Today","Yesterday","Last 7 Days","Last 30 Days","This Week","This Month","This Quarter","This Year","Last Week","Last Month","Last Quarter","Last Year","Last 5 Years"]},options:{sortBy:["created_at"],sortDesc:[!0],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:10,to:0,total:0}}},methods:{updateDates:function(e){this.filters.date_range=e},selectUser:function(e){this.collections.selectedActivityLogs=[],this.filters.selectedUser=null!=e&&null!=e?e:null},resetUser:function(){this.collections.selectedActivityLogs=[],this.filters.selectedUser=null},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,a){var r=e.options,n=r.sortBy,s=r.sortDesc,o=r.page,i=r.itemsPerPage,c=e.filters.search.trim().toLowerCase(),l=e.filters.selectedUser?e.filters.selectedUser.id:null,u=e.filters.date_range,p={params:{search:c,sortBy:n[0],sortType:s[0]?"desc":"asc",page:o,itemsPerPage:i,user_id:l,start_date:u[0],end_date:u[1]?u[1]:u[0]}};d.getAll(p).then((function(a){e.formDataLoaded=!0,t(a.data)})).catch((function(t){e.mixin_showErrors(t),e.formDataLoaded=!0,a()}))}))},onReset:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.collections.selectedActivityLogs=[],this.filters.selectedUser=null},hasLink:function(e){return!!e.properties&&(!!e.properties.custom&&!!e.properties.custom.link)},onExport:function(){var e=this,t=this.filters.date_range,a={params:{start_date:t[0],end_date:t[1]?t[1]:t[0]}};d.export(a).then((function(t){window.location.href="/api/activity_logs/export/data?\n                        start_date=".concat(a.params.start_date,"&\n                        end_date=").concat(a.params.end_date),e.mixin_successDialog("Success","The file was saved to 'Downloads' folder)")})).catch((function(t){return e.mixin_showErrors(t)}))}},watch:{params:{immediate:!0,deep:!0,handler:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.activityLogs=t.data,e.meta=t.meta}))}}},computed:{params:function(e){var t;return f(f({},this.options),{},(m(t={query:this.filters.search},"query",this.filters.selectedUser),m(t,"query",this.filters.date_range),t))},formattedDateRange:function(){var e=n()(this.filters.date_range[0]).format("MMM DD, YYYY"),t=n()(this.filters.date_range[1]).format("MMM DD, YYYY");return JSON.stringify(e)==JSON.stringify(t)||null==JSON.stringify(t)?e:"".concat(e," ~ ").concat(t)}},activated:function(){var e=this;this.$store.dispatch("AUTH_NOTIFICATIONS"),this.getDataFromApi().then((function(t){e.collections.activityLogs=t.data,e.meta=t.meta}))}},g=a(4),h=Object(g.a)(v,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.formDataLoaded?a("v-card",{staticClass:"elevation-0 pt-0"},[a("page-header",{attrs:{title:"Activity Logs"},scopedSlots:e._u([{key:"sub-actions",fn:function(){return[a("DateRangePicker",{ref:"dateRangePicker",attrs:{dateRange:e.filters.date_range},on:{"on-change":e.updateDates},scopedSlots:e._u([{key:"openDialog",fn:function(t){var r=t.on,n=t.attrs,s=t.dateRangeText;return[a("v-btn",e._g(e._b({staticClass:"ml-0 pl-0",attrs:{text:""}},"v-btn",n,!1),r),[e._v("\n                            "+e._s(s)+"\n                        ")])]}}])})]},proxy:!0}])}),e._v(" "),a("v-row",{staticClass:"ml-4"},[e.collections.selectedActivityLogs.length>0?a("v-chip",{staticClass:"mr-2 mb-2",attrs:{color:"green",dark:"",close:"",small:"","close-icon":"mdi-close"},on:{"click:close":function(t){e.collections.selectedActivityLogs=[]}}},[e._v("\n                "+e._s(e.collections.selectedActivityLogs.length)+" Selected\n            ")]):e._e(),e._v(" "),a("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:e.filters.selectedUser},on:{selectUser:e.selectUser,onReset:e.resetUser},scopedSlots:e._u([{key:"openDialog",fn:function(t){var r=t.bind,n=t.on,s=t.computedSelectedUser;return[a("v-chip",e._g(e._b({staticClass:"mr-2 mb-2",attrs:{small:""}},"v-chip",r,!1),n),[e._v("\n                        "+e._s(s?s.name:"All Employees")+"\n                    ")])]}}])}),e._v(" "),a("v-chip",{staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-refresh"},on:{"click:close":e.onReset}},[e._v("\n                Refresh\n            ")]),e._v(" "),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.mixin_can("export activity logs"),expression:"mixin_can('export activity logs')"}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-download"},on:{"click:close":e.onExport}},[e._v("\n                Export Data\n            ")])],1),e._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-0",attrs:{"show-select":"","item-key":"id","single-expand":"","show-expand":"",headers:e.collections.headers,items:e.collections.activityLogs,loading:!e.formDataLoaded,options:e.options,"server-items-length":e.meta.total,"footer-props":{itemsPerPageOptions:[10,20,50,100],showFirstLastPage:!0,firstIcon:"mdi-page-first",lastIcon:"mdi-page-last",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"}},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"item.actions",fn:function(t){var r=t.item;return[e.hasLink(r)?a("v-icon",{key:r.id,staticClass:"mr-2",attrs:{small:""},on:{click:function(t){e.$router.push(e.hasLink(r)?"/"+r.properties.custom.link:null)}}},[e._v("\n                        mdi-open-in-new\n                    ")]):e._e()]}},{key:"item.user",fn:function(t){var a=t.item;return[e._v("\n                    "+e._s(null==a.user?"Default":a.user.name)+"\n                ")]}},{key:"expanded-item",fn:function(t){var r=t.headers,n=t.item;return[a("td",{attrs:{colspan:r.length}},[a("v-container",{key:n.id},e._l(n.properties,(function(t,r){return a("table",{key:t.id},["attributes"==r?a("div",[a("div",{staticClass:"green--text text-capitalize"},[e._v("\n                                        "+e._s(r)+"\n                                    ")]),e._v(" "),e._l(t,(function(t,r){return a("tr",{key:r},[a("td",[a("strong",[e._v(e._s(r))])]),e._v(" "),a("td",[e._v(":")]),e._v(" "),a("td",[e._v(e._s(t))])])}))],2):e._e()])})),0)],1)]}}],null,!0),model:{value:e.collections.selectedActivityLogs,callback:function(t){e.$set(e.collections,"selectedActivityLogs",t)},expression:"collections.selectedActivityLogs"}})],1)],1):a("loader-component")],1)}),[],!1,null,null,null);t.default=h.exports}}]);