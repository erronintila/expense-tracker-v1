(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{27:function(e,t,n){"use strict";var i={name:"page-header",props:{title:""}},r=n(4),s=Object(r.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card-title",{staticClass:"pt-0"},[n("h4",{staticClass:"title green--text"},[e._v(e._s(e.title))]),e._v(" "),n("v-spacer"),e._v(" "),e._t("actions")],2),e._v(" "),n("v-card-subtitle",[e._t("sub-actions")],2)],1)}),[],!1,null,null,null);t.a=s.exports},876:function(e,t,n){"use strict";n.r(t);var i=n(1),r=n.n(i),s=n(27),a=n(10),o=n.n(a);function p(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var l=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getAll",value:function(e){return o.a.get("/api/settings",e)}},{key:"store",value:function(e){return o.a.post("/api/settings",e)}}])&&p(t.prototype,n),i&&p(t,i),e}()),c={components:{PageHeader:s.a},data:function(){return{formDataLoaded:!1,validExpenses:!1,validExpenseReports:!1,validTaxes:!1,file_input:null,rules:{file_input:[function(e){return!e||e.size<3e4||"Report logo size should be less than 30 KB"}]},settings:{company_name:"Twin-Circa Marketing",currency:"Philippine Peso",expiry_period:1,expense_encoding_period:1,submission_period:"Weekly",approval_period:1,tax_rate:0,expense_report:{report_no:{prefix:"",length:1},print_format:{pageSize:{width:0,height:0},pageOrientation:"landscape",pageMargins:{left:0,top:0,right:0,bottom:0},defaultStyle:{font:"Roboto"},background:{alignment:"left",width:0,height:0,image:"",margin:{left:0,top:0,right:0,bottom:0}}}}},panel:[0,1,2,3]}},methods:{onLoad:function(){var e=this;return new Promise((function(t,n){l.getAll().then((function(n){e.file_input=null,e.settings=n.data,e.formDataLoaded=!0,t()})).catch((function(t){e.mixin_showErrors(t),e.formDataLoaded=!0,n()}))}))},onSave:function(){var e=this;if(this.$refs.formExpenses.validate(),this.$refs.formExpenseReports.validate(),this.$refs.formTaxes.validate(),this.$refs.formExpenses.validate()&&this.$refs.formExpenseReports.validate()&&this.$refs.formTaxes.validate()){var t={settings:this.settings};l.store(t).then((function(t){e.mixin_successDialog("Success","Saved settings successfully"),e.$store.dispatch("AUTH_USER"),e.$store.dispatch("AUTH_SETTINGS"),window.location.replace("/settings")})).catch((function(t){e.mixin_showErrors(t)}))}}},computed:{page_sizes:function(){return[{name:"A4",width:"portrait"==this.expense_report.print_format.pageOrientation?10:9,height:"portrait"==this.expense_report.print_format.pageOrientation?10:9},{name:"Letter",width:"portrait"==this.expense_report.print_format.pageOrientation?10:9,height:"portrait"==this.expense_report.print_format.pageOrientation?10:9},{name:"Folio",width:"portrait"==this.expense_report.print_format.pageOrientation?10:9,height:"portrait"==this.expense_report.print_format.pageOrientation?10:9},{name:"Legal",width:"portrait"==this.expense_report.print_format.pageOrientation?10:9,height:"portrait"==this.expense_report.print_format.pageOrientation?10:9},{name:"Custom",width:0,height:0}]},url:function(){return this.file_input?URL.createObjectURL(this.file_input):this.$store.getters.settings.expense_report.print_format.background.image},report_no:{get:function(){var e=this.settings.expense_report.report_no.prefix,t=this.settings.expense_report.report_no.num_length;return e+r()().format("YYYYMM")+String(1).padStart(t,"0")}}},watch:{file_input:function(){var e=this;if(this.file_input){var t=new FileReader;t.readAsDataURL(this.file_input),t.onload=function(){e.settings.expense_report.print_format.background.image=t.result},t.onerror=function(t){e.mixin_showErrors(t)}}else this.settings.expense_report.print_format.background.image=this.$store.getters.settings.expense_report.print_format.background.image}},activated:function(){this.$store.dispatch("AUTH_SETTINGS"),this.$store.dispatch("AUTH_NOTIFICATIONS"),this.onLoad()}},v=n(4),_=Object(v.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.formDataLoaded?n("v-card",{staticClass:"elevation-0 pt-0"},[n("page-header",{attrs:{title:"Settings"},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-btn",{staticClass:"mr-2",attrs:{color:"green",to:{name:"admin.settings.user"},outlined:"",dark:""}},[e._v("\n                    Employee Settings\n                ")]),e._v(" "),n("v-btn",{attrs:{color:"green",dark:""},on:{click:e.onSave}},[e._v("Save Changes")])]},proxy:!0},{key:"sub-actions",fn:function(){},proxy:!0}])}),e._v(" "),n("v-expansion-panels",{attrs:{multiple:""},model:{value:e.panel,callback:function(t){e.panel=t},expression:"panel"}},[n("v-expansion-panel",[n("v-expansion-panel-header",[n("div",{staticClass:"green--text"},[e._v("\n                        Expenses\n                    ")])]),e._v(" "),n("v-expansion-panel-content",[n("v-container",[n("v-form",{ref:"formExpenses",model:{value:e.validExpenses,callback:function(t){e.validExpenses=t},expression:"validExpenses"}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Expense Encoding Period",suffix:"days",rules:e.mixin_validation.required.concat(e.mixin_validation.minNumberValue(1)),hint:"Allowed period for expenses to be encoded based on date","persistent-hint":"",type:"number"},model:{value:e.settings.expense_encoding_period,callback:function(t){e.$set(e.settings,"expense_encoding_period",t)},expression:"\n                                            settings.expense_encoding_period\n                                        "}})],1)],1)],1)],1)],1)],1),e._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",[n("div",{staticClass:"green--text"},[e._v("\n                        Expense Reports\n                    ")])]),e._v(" "),n("v-expansion-panel-content",[n("v-container",[n("v-form",{ref:"formExpenseReports",model:{value:e.validExpenseReports,callback:function(t){e.validExpenseReports=t},expression:"validExpenseReports"}},[n("v-row",[n("v-col",[n("div",{staticClass:"overline green--text"},[e._v("\n                                        General\n                                    ")])])],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-select",{attrs:{label:"Submission Date",items:["Daily","Weekly","Monthly"],hint:"Due date for submission of expense reports","persistent-hint":""},model:{value:e.settings.submission_period,callback:function(t){e.$set(e.settings,"submission_period",t)},expression:"settings.submission_period"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Approval Period",suffix:"days",rules:e.mixin_validation.required.concat(e.mixin_validation.minNumberValue(1)),hint:"Allowed period for expense reports to be approved based on submission date","persistent-hint":"",type:"number"},model:{value:e.settings.approval_period,callback:function(t){e.$set(e.settings,"approval_period",t)},expression:"settings.approval_period"}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"overline  green--text"},[e._v("\n                                        Report No. Format:\n                                    ")])])],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-text-field",{attrs:{label:"Prefix"},model:{value:e.settings.expense_report.report_no.prefix,callback:function(t){e.$set(e.settings.expense_report.report_no,"prefix",t)},expression:"\n                                            settings.expense_report\n                                                .report_no.prefix\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"2"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(0)),label:"Length",type:"number"},model:{value:e.settings.expense_report.report_no.num_length,callback:function(t){e.$set(e.settings.expense_report.report_no,"num_length",t)},expression:"\n                                            settings.expense_report\n                                                .report_no.num_length\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("div",{staticClass:"green--text"},[e._v("\n                                        e.g. "+e._s(e.report_no)+"\n                                    ")]),e._v(" "),n("small",[e._v("(Prefix + YYYYMM + (length + report\n                                        count))")])])],1),e._v(" "),n("v-divider"),e._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"overline green--text"},[e._v("\n                                        Print Format\n                                    ")])])],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-select",{attrs:{label:"Page Orientation",items:["portrait","landscape"]},model:{value:e.settings.expense_report.print_format.pageOrientation,callback:function(t){e.$set(e.settings.expense_report.print_format,"pageOrientation",t)},expression:"\n                                            settings.expense_report\n                                                .print_format\n                                                .pageOrientation\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(1)),label:"Page Size (width)",type:"number"},model:{value:e.settings.expense_report.print_format.pageSize.width,callback:function(t){e.$set(e.settings.expense_report.print_format.pageSize,"width",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageSize.width\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(1)),label:"Page Size (height)",type:"number"},model:{value:e.settings.expense_report.print_format.pageSize.height,callback:function(t){e.$set(e.settings.expense_report.print_format.pageSize,"height",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageSize\n                                                .height\n                                        "}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(0)),type:"number",label:"Page Margin (Left)"},model:{value:e.settings.expense_report.print_format.pageMargins.left,callback:function(t){e.$set(e.settings.expense_report.print_format.pageMargins,"left",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageMargins\n                                                .left\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(0)),type:"number",label:"Page Margin (Top)"},model:{value:e.settings.expense_report.print_format.pageMargins.top,callback:function(t){e.$set(e.settings.expense_report.print_format.pageMargins,"top",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageMargins\n                                                .top\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(0)),type:"number",label:"Page Margin (Right)"},model:{value:e.settings.expense_report.print_format.pageMargins.right,callback:function(t){e.$set(e.settings.expense_report.print_format.pageMargins,"right",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageMargins\n                                                .right\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(0)),type:"number",label:"Page Margin (Bottom)"},model:{value:e.settings.expense_report.print_format.pageMargins.bottom,callback:function(t){e.$set(e.settings.expense_report.print_format.pageMargins,"bottom",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.pageMargins\n                                                .bottom\n                                        "}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-select",{attrs:{label:"Font",items:["Roboto"]},model:{value:e.settings.expense_report.print_format.defaultStyle.font,callback:function(t){e.$set(e.settings.expense_report.print_format.defaultStyle,"font",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.defaultStyle\n                                                .font\n                                        "}})],1)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"overline green--text"},[e._v("\n                                        Report Logo\n                                    ")])])],1),e._v(" "),n("v-row",[e.url?n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-img",{attrs:{label:"Report Image Logo",src:e.url}})],1):e._e(),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-file-input",{attrs:{rules:e.rules.file_input,"prepend-icon":"mdi-upload","show-size":"",label:"Upload",accept:"image/png, image/jpeg, image/bmp"},model:{value:e.file_input,callback:function(t){e.file_input=t},expression:"file_input"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(1)),label:"Logo Width"},model:{value:e.settings.expense_report.print_format.background.width,callback:function(t){e.$set(e.settings.expense_report.print_format.background,"width",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.background\n                                                .width\n                                        "}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{rules:[].concat(e.mixin_validation.minNumberValue(1)),label:"Logo Height"},model:{value:e.settings.expense_report.print_format.background.height,callback:function(t){e.$set(e.settings.expense_report.print_format.background,"height",t)},expression:"\n                                            settings.expense_report\n                                                .print_format.background\n                                                .height\n                                        "}})],1)],1)],1)],1)],1)],1),e._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",[n("div",{staticClass:"green--text"},[e._v("\n                        Taxes\n                    ")])]),e._v(" "),n("v-expansion-panel-content",[n("v-container",[n("v-form",{ref:"formTaxes",model:{value:e.validTaxes,callback:function(t){e.validTaxes=t},expression:"validTaxes"}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Tax Rate",suffix:"%",rules:e.mixin_validation.required.concat(e.mixin_validation.minNumberValue(0)),hint:"Tax rate to be imposed on expenses.","persistent-hint":""},model:{value:e.settings.tax_rate,callback:function(t){e.$set(e.settings,"tax_rate",t)},expression:"settings.tax_rate"}})],1)],1)],1)],1)],1)],1)],1)],1):n("loader-component")],1)}),[],!1,null,null,null);t.default=_.exports}}]);