(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{158:function(e,t,n){"use strict";var r=n(46);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={props:{selectedVendors:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedVendor:{type:Object,default:null},vendorsParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,n){var o=e.options,s=o.sortBy,a=o.sortDesc,l=o.page,u=o.itemsPerPage,c={search:e.filters.search.trim().toLowerCase(),sortBy:s[0],sortType:a[0]?"desc":"asc",page:l,itemsPerPage:u,isSelection:!0,is_active:!0},m={};m=e.vendorsParameters&&e.vendorsParameters.params?{params:i(i({},c),e.vendorsParameters.params)}:{params:i({},c)},r.a.getAll(m).then((function(n){e.loading=!1,t(n.data)})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,n()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedVendor=null,this.options={sortBy:["name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedVendor)},selectVendor:function(e){this.computedSelectedVendor=e,this.$emit("selectVendor",e)},getVendorName:function(e){return e.name||""},getVendorTin:function(e){var t=e.tin||"",n=e.is_vat_inclusive||"";return"".concat(t?"TIN: "+t:""," ").concat(n?"(VAT)":"Non-VAT")},getVendorAddress:function(e){return e.address||""}},watch:{"filters.search":function(){var e=this;""==this.filters.search&&this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},params:{handler:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},deep:!0},dialog:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},computed:{params:function(e){return i({},this.options)},computedSelectedVendor:{get:function(){return this.selectedVendor?this.selectedVendor:null},set:function(e){return e}}},created:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},l=n(4),u=Object(l.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[e._t("openDialog",null,null,{attrs:r,on:n,computedSelectedVendor:e.computedSelectedVendor})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",[e._v("\n                Vendors\n                "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),e._v(" "),n("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[n("v-list-item-group",{attrs:{"active-class":"green--text",multiple:e.multipleSelection},on:{change:e.selectVendor},model:{value:e.computedSelectedVendor,callback:function(t){e.computedSelectedVendor=t},expression:"computedSelectedVendor"}},[e._l(e.collections.items,(function(t,r){return[n("v-list-item",{key:r,attrs:{value:t}},[[n("v-list-item-content",[n("v-list-item-title",[e._v("\n                                        "+e._s(e.getVendorName(t))+"\n                                    ")]),e._v(" "),n("v-list-item-subtitle",{staticClass:"text--primary"},[e._v("\n                                        "+e._s(e.getVendorTin(t))+"\n                                    ")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                                        "+e._s(e.getVendorAddress(t))+"\n                                    ")])],1)]],2)]}))],2)],1),e._v(" "),n("div",[n("v-pagination",{attrs:{length:e.meta.last_page,"total-visible":7},model:{value:e.options.page,callback:function(t){e.$set(e.options,"page",t)},expression:"options.page"}})],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.onReset}},[e._v("\n                    Reset\n                ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=u.exports},162:function(e,t,n){"use strict";var r=n(1),o=n.n(r),i=(n(50),n(163)),s=n(158),a=n(28);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={props:{expenseForm:{type:Object,default:function(){return{code:null,reference_no:null,description:null,amount:0,reimbursable_amount:0,tax_name:"",tax_rate:0,is_compound_tax:!1,is_tax_inclusive:!0,tax_amount:0,receipt_number:null,date:o()().format("YYYY-MM-DD"),details:[],remarks:"",notes:"",encoding_period:(void 0).$store.getters.settings.expense_encoding_period,expense_type:null,sub_type:null,user:null,vendor:null,expense_report_id:null,tax_id:null,expense_header_id:null,details_quantity:0,details_amount:0,is_active:!0,is_reimbursable:!1,revolving_fund:0}}},rules:{type:Object,default:function(){return{reimbursable_amount:[],revolving_fund:[]}}},errors:{type:Object,default:function(){return{sub_type:[],code:[],reference_no:[],description:[],amount:[],reimbursable_amount:[],tax_name:[],tax_rate:[],is_compound_tax:[],is_tax_inclusive:[],tax_amount:[],receipt_number:[],date:[],details:[],remarks:[],notes:[],encoding_period:[],expense_type_id:[],sub_type_id:[],user_id:[],vendor_id:[],expense_report_id:[],tax_id:[],expense_header_id:[],is_active:[]}}},itemizeExpenses:{type:Boolean,default:!1}},components:{AddVendor:i.a,VendorDialogSelector:s.a,UserDialogSelector:a.a,Form:v},data:function(){return{loader:!1,panel:[0,1],paid_through:"Revolving Fund",reimbursable_amount:!1,openAddVendor:!1,dialog:!1,valid:!1,menu:!1,itemize:!1,headers:[{text:"Particulars",value:"description",sortable:!1},{text:"Quantity",value:"quantity",sortable:!1},{text:"Amount",value:"amount",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"",value:"actions",sortable:!1}],sub_detail:{description:"",quantity:1,amount:0,total:0},form:{code:null,reference_no:null,description:null,amount:0,reimbursable_amount:0,tax_name:"",tax_rate:0,is_compound_tax:!1,is_tax_inclusive:!0,tax_amount:0,receipt_number:null,date:o()().format("YYYY-MM-DD"),details:[],remarks:"",notes:"",encoding_period:this.$store.getters.settings.expense_encoding_period,expense_type:null,sub_type:null,user:null,vendor:null,expense_report_id:null,tax_id:null,expense_header_id:null,details_quantity:0,details_amount:0,is_active:!0,is_reimbursable:!1,revolving_fund:0},items:[],expense_types:[],sub_types:[]}},methods:{selectVendor:function(e){this.form.vendor=null!=e&&null!=e?e:null},resetVendor:function(){this.form.vendor=null},onRefresh:function(){Object.assign(this.$data,this.$options.data.apply(this))},onSave:function(){var e=this.form.expense_type?this.form.expense_type.limit:null,t=this.form.sub_type?this.form.sub_type.limit:null,n=t||e,r=this.form.amount;if(!this.mixin_can("add expenses beyond limit"))if(this.itemize){if(null!==n&&n<this.form.details_amount)return void this.mixin_errorDialog("Error","Itemized Expenses Amount can't be greater than expense limit")}else if(null!==n&&n<r)return void this.mixin_errorDialog("Error","Amount can't be greater than expense limit.");null!=this.form.user?this.form.expense_type?this.amount_to_replenish>(this.form.user?this.form.user.remaining_fund:0)?this.mixin_errorDialog("Error","Amount to replenish is greater than remaining fund"):this.amount_to_replenish+this.amount_to_reimburse<this.form.amount?this.mixin_errorDialog("Error","Expense Amount is greater than amount to replenish/reimburse"):this.amount_to_replenish+this.amount_to_reimburse<=0?this.mixin_errorDialog("Error","Total Expenses can't be lesser or equal to zero"):(this.$refs.form.validate(),this.$refs.form.validate()&&this.$emit("on-save",u(u(u(u({},this.form),{itemize:this.itemize}),{items:this.form.details}),{amount_to_reimburse:this.amount_to_reimburse}))):this.mixin_errorDialog("Error","No Expense Type Selected"):this.mixin_errorDialog("Error","No user selected")},addItem:function(){var e=this.sub_detail.description,t=this.mixin_convertToNumber(this.sub_detail.quantity),n=this.mixin_convertToNumber(this.sub_detail.amount),r=this.mixin_convertToNumber(this.sub_detail.total),o=this.expense_amount_limit;""==e||r<=0||!this.mixin_can("add expenses beyond limit")&&null!==o&&o*t<n||(this.form.details.push({description:e,quantity:t,amount:n,total:r}),this.dialog=!1,this.sub_detail.description="",this.sub_detail.quantity=1,this.sub_detail.amount=0,this.sub_detail.total=0)},onRemove:function(e){if(this.form.details){var t=this.form.details.indexOf(e);confirm("Are you sure you want to remove this item?")&&this.form.details.splice(t,1)}},loadSubTypes:function(e){e&&(this.sub_types=e.sub_types,this.sub_types.unshift({id:null,name:"None",limit:null}))}},computed:{minDate:function(){var e;if(this.mixin_can("add expenses beyond encoding period"))return null;var t=this.$store.getters.settings;return o()().subtract((null!==(e=t.expense_encoding_period)&&void 0!==e?e:1)-1,"days").format("YYYY-MM-DD")},maxDate:function(){return o()().format("YYYY-MM-DD")},amount_to_replenish:function(){var e=this.mixin_convertToNumber(this.form.user?this.form.user.remaining_fund:0),t=this.mixin_convertToNumber(this.form.amount),n=this.mixin_convertToNumber(this.form.reimbursable_amount),r=t<n?0:t-n;return this.mixin_can("set reimbursable amount")?t-n>e?0:r:e>=t?t:t-Math.abs(e-t)},amount_to_reimburse:function(){var e=this.mixin_convertToNumber(this.form.user?this.form.user.remaining_fund:0),t=this.mixin_convertToNumber(this.form.amount),n=this.mixin_convertToNumber(this.form.reimbursable_amount);if(this.mixin_can("set reimbursable amount"))return n>t?0:n;if(e<t){var r=Math.abs(e-t);return this.form.reimbursable_amount=r,r}return this.form.reimbursable_amount=0,0},expense_amount:function(){var e=this.mixin_convertToNumber(this.amount_to_replenish),t=this.mixin_convertToNumber(this.amount_to_reimburse);return this.mixin_convertToNumber(e+t)},display_reimbursable_amount:function(){return parseFloat(this.form.amount)>parseFloat(this.form.user?this.form.user.remaining_fund:0)},taxable_amount:{get:function(){return this.form.is_tax_inclusive?(this.form.tax_amount=this.tax_inclusive.toFixed(2),this.tax_inclusive.toFixed(2)):(this.form.tax_amount=this.tax_exclusive.toFixed(2),this.tax_exclusive.toFixed(2))},set:function(e){return this.form.tax_amount=e,e}},tax_inclusive:function(){return this.mixin_convertToNumber(this.form.amount)/(1+this.mixin_convertToNumber(this.form.tax_rate)/100)*(this.mixin_convertToNumber(this.form.tax_rate)/100)},tax_exclusive:function(){return this.mixin_convertToNumber(this.form.amount)*(this.mixin_convertToNumber(this.form.tax_rate)/100)},total_details_amount:function(){if(this.sub_detail){var e=(this.mixin_convertToNumber(this.sub_detail.quantity)*this.mixin_convertToNumber(this.sub_detail.amount)).toFixed(2);return this.sub_detail.total=e,e}return 0},expense_amount_limit:function(){return this.form.sub_type?null==this.form.sub_type.limit?this.form.expense_type?this.form.expense_type.limit:null:this.form.sub_type.limit:null},isVendorTaxInclusive:function(){return!!this.form.vendor&&this.form.vendor.is_vat_inclusive}},watch:{expenseForm:{immediate:!0,deep:!0,handler:function(e,t){(this.form=e,e.user&&(this.expense_types=e.user.expense_types),e.expense_type)&&(this.sub_types=e.expense_type?e.expense_type.sub_types:null,-1===this.expense_types.findIndex((function(t){return t.id==e.expense_type.id}))&&this.expense_types.push(e.expense_type))}},itemizeExpenses:{immediate:!0,handler:function(e,t){this.itemize=e}},"form.details":function(){this.form.details&&this.form.details.length&&(this.form.amount=this.form.details.reduce((function(e,t){return parseFloat(e)+parseFloat(t.total)}),0),this.form.details_amount=this.form.details.reduce((function(e,t){return parseFloat(e)+parseFloat(t.amount)}),0),this.form.details_quantity=this.form.details.reduce((function(e,t){return parseFloat(e)+parseFloat(t.quantity)}),0))},itemize:function(){return this.form.details&&this.form.details.length&&(this.form.amount=this.form.details.reduce((function(e,t){return parseFloat(e)+parseFloat(t.total)}),0)),null==this.form.user?(this.itemize=!1,void this.mixin_errorDialog("Error","No user selected")):this.form.expense_type?void 0:(this.itemize=!1,void this.mixin_errorDialog("Error","No expense type Selected"))},"form.vendor":function(){this.form.tax_rate=this.$store.getters.settings.tax_rate,this.form.tax_amount=0,this.form.is_tax_inclusive=!0},"form.user":function(){this.expense_types=this.form.user?this.form.user.expense_types:[]},"form.expense_type":function(){this.form&&this.loadSubTypes(this.form.expense_type)}}},d=n(4),p=Object(d.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("div",{staticClass:"overline mb-4 green--text"},[e._v("\n        Basic Details\n    ")]),e._v(" "),n("p",{staticClass:"text--disabled"},[e._v("\n        Note: Due of encoding of expenses : Within\n        "+e._s(e.$store.getters.settings.expense_encoding_period)+" day/s\n    ")]),e._v(" "),n("v-row",[n("v-col",[n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{"error-messages":e.errors.date,label:"Date",readonly:""},on:{input:function(t){e.errors.date=[]}},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}},"v-text-field",o,!1),r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[e._v(" "),n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"success",min:e.minDate,max:e.maxDate},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1)],1)],1),e._v(" "),e._t("userSelector"),e._v(" "),n("v-row",[n("v-col",[n("v-text-field",{attrs:{value:e.form.vendor?e.form.vendor.name:"No Vendor","error-messages":e.errors.vendor_id,label:"Vendor",readonly:""},on:{input:function(t){e.errors.vendor_id=[]}},scopedSlots:e._u([{key:"append",fn:function(){return[n("VendorDialogSelector",{ref:"vendorDialogSelector",attrs:{selectedVendor:e.form.vendor},on:{selectVendor:e.selectVendor,onReset:e.resetVendor},scopedSlots:e._u([{key:"openDialog",fn:function(t){var r=t.bind,o=t.on;return[n("v-btn",e._g(e._b({attrs:{fab:"",color:"primary",text:"","x-small":""}},"v-btn",r,!1),o),[n("v-icon",{attrs:{dark:""}},[e._v("mdi-magnify")])],1)]}}])}),e._v(" "),n("AddVendor",{attrs:{openDialog:!1}})]},proxy:!0}])})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:""}},[n("v-autocomplete",{attrs:{"return-object":"",items:e.expense_types,"error-messages":e.errors.expense_type_id,"item-value":"id","item-text":"name",label:"Expense Type",required:""},on:{input:function(t){e.errors.expense_type_id=[]},change:e.loadSubTypes},model:{value:e.form.expense_type,callback:function(t){e.$set(e.form,"expense_type",t)},expression:"form.expense_type"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:""}},[n("v-autocomplete",{attrs:{items:e.sub_types,"error-messages":e.errors.sub_type_id,"item-value":"id","item-text":"name",label:"Sub Type (optional)",required:"","return-object":""},on:{input:function(t){e.errors.sub_type_id=[]}},model:{value:e.form.sub_type,callback:function(t){e.$set(e.form,"sub_type",t)},expression:"form.sub_type"}})],1)],1),e._v(" "),n("div",{staticClass:"overline mb-4 green--text"},[e._v("\n        Expense Details\n    ")]),e._v(" "),n("v-row",[n("v-col",[n("div",[n("p",{staticClass:"text--disabled"},[e._v("\n                    Remaining Fund:\n                    "),n("v-btn",{attrs:{color:"green",dark:"",small:"",outlined:""}},[e._v("\n                        "+e._s(e.mixin_formatNumber(e.form.user?e.form.user.remaining_fund:0))+"\n                    ")])],1)])]),e._v(" "),n("v-col",[n("div",[n("p",{staticClass:"text--disabled"},[e._v("\n                    Expense Limit:\n                    "),n("v-btn",{attrs:{color:"green",dark:"",small:"",outlined:""}},[e._v(e._s(null==e.expense_amount_limit?"No Limit":e.mixin_formatNumber(e.expense_amount_limit)))])],1)])])],1),e._v(" "),n("div",[n("p",{staticClass:"text--disabled"},[e._v("\n            Note: Expense amount exceeding the remaining fund/expense limit\n            will be considered as reimbursable.\n        ")])]),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{label:"Description"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{"error-messages":e.errors.receipt_number,label:"Receipt No.",required:""},on:{input:function(t){e.errors.receipt_number=[]}},model:{value:e.form.receipt_number,callback:function(t){e.$set(e.form,"receipt_number",t)},expression:"form.receipt_number"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Expense Amount","error-messages":e.errors.amount,readonly:e.itemize,type:"number"},on:{input:function(t){e.errors.amount=[]}},model:{value:e.form.amount,callback:function(t){e.$set(e.form,"amount",t)},expression:"form.amount"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[e.mixin_can("set reimbursable amount")?n("v-text-field",{attrs:{"error-messages":e.errors.reimbursable_amount,label:"Amount to reimburse",type:"number",hint:"Amount spent from own pocket","persistent-hint":""},on:{input:function(t){e.errors.reimbursable_amount=[]}},model:{value:e.form.reimbursable_amount,callback:function(t){e.$set(e.form,"reimbursable_amount",t)},expression:"form.reimbursable_amount"}}):e._e()],1)],1),e._v(" "),e.isVendorTaxInclusive?n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{label:"Tax Rate",suffix:"%",type:"number",readonly:!e.mixin_can("modify taxes on expense")},model:{value:e.form.tax_rate,callback:function(t){e.$set(e.form,"tax_rate",t)},expression:"form.tax_rate"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{label:"Tax Amount",type:"number",readonly:!e.mixin_can("modify taxes on expense")},model:{value:e.taxable_amount,callback:function(t){e.taxable_amount=t},expression:"taxable_amount"}})],1)],1):e._e(),e._v(" "),n("v-row",[n("v-col",[n("v-checkbox",{attrs:{label:"Itemize Expenses"},on:{change:function(t){e.form.amount=0,e.form.revolving_fund=0}},model:{value:e.itemize,callback:function(t){e.itemize=t},expression:"itemize"}})],1)],1),e._v(" "),e.itemize?n("v-data-table",{attrs:{headers:e.headers,items:e.form.details,"items-per-page":5,"footer-props":{itemsPerPageOptions:[5,10,20]}},scopedSlots:e._u([{key:"top",fn:function(){return[n("v-toolbar",{attrs:{flat:"",color:"white"}},[n("v-spacer"),e._v(" "),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",o,!1),r),[e._v("New Item")])]}}],null,!1,4056833969),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Particular"},model:{value:e.sub_detail.description,callback:function(t){e.$set(e.sub_detail,"description",t)},expression:"sub_detail.description"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-text-field",{attrs:{label:"Quantity",type:"number"},model:{value:e.sub_detail.quantity,callback:function(t){e.$set(e.sub_detail,"quantity",t)},expression:"sub_detail.quantity"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-text-field",{attrs:{label:"Amount",type:"number"},model:{value:e.sub_detail.amount,callback:function(t){e.$set(e.sub_detail,"amount",t)},expression:"sub_detail.amount"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Total Amount",readonly:""},model:{value:e.total_details_amount,callback:function(t){e.total_details_amount=t},expression:"total_details_amount"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("div",[e._v("\n                                        "+e._s(null==e.expense_amount_limit?"No Limit":"Limit: "+e.mixin_formatNumber(e.expense_amount_limit)+" / qunatity")+"\n                                    ")])])],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                                Cancel\n                            ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.addItem}},[e._v("\n                                Add\n                            ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var r=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(){e.onRemove(r)}}},[e._v("\n                mdi-delete\n            ")])]}}],null,!0)},[e.form.details&&e.form.details.length>0?n("template",{slot:"body.append"},[n("tr",{staticClass:"green--text hidden-md-and-up"},[n("td",{staticClass:"title"},[e._v("\n                    Total:\n                    "),n("strong",[e._v(e._s(e.form.amount))])])]),e._v(" "),n("tr",{staticClass:"green--text hidden-sm-and-down"},[n("td",{staticClass:"title"},[e._v("Total")]),e._v(" "),n("td",[n("strong",[e._v(e._s(e.form.details_quantity))])]),e._v(" "),n("td",[n("strong",[e._v(e._s(e.form.details_amount))])]),e._v(" "),n("td",[n("strong",[e._v(e._s(e.form.amount))])]),e._v(" "),n("td")])]):e._e()],2):e._e(),e._v(" "),n("v-divider",{staticClass:"mt-2 mb-2"}),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-textarea",{attrs:{rows:"3","error-messages":e.errors.remarks,label:"Remarks"},on:{input:function(t){e.errors.remarks=[]}},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,"remarks",t)},expression:"form.remarks"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("table",{staticClass:"mt-2",attrs:{width:"100%"}},[n("tbody",[n("tr",[n("td",{staticClass:"green--text"},[e._v("\n                            Subtotal\n                        ")]),e._v(" "),n("td",{staticClass:"text-right"},[e._v("\n                            "+e._s(e.mixin_formatNumber(e.form.amount))+"\n                        ")])]),e._v(" "),n("tr",[n("td",[n("small",[e._v("(To replenish:\n                                "+e._s(e.mixin_formatNumber(e.amount_to_replenish))+")")])]),e._v(" "),n("td",{staticClass:"text-right"},[e._v("--")])]),e._v(" "),n("tr",[n("td",[n("small",[e._v("(To reimburse:\n                                "+e._s(e.mixin_formatNumber(e.form.reimbursable_amount))+")")])]),e._v(" "),n("td",{staticClass:"text-right"},[e._v("--")])]),e._v(" "),e.isVendorTaxInclusive?n("tr",[n("td",{staticClass:"green--text"},[e._v("\n                            Tax (12%)\n                            "),n("small",[e._v("Inclusive")])]),e._v(" "),n("td",{staticClass:"text-right"},[e._v("\n                            "+e._s(e.mixin_formatNumber(e.taxable_amount))+"\n                        ")])]):e._e(),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[n("hr")])]),e._v(" "),n("tr",[n("td",{staticClass:"green--text"},[n("b",[e._v("Total")])]),e._v(" "),n("td",{staticClass:"green--text text-right"},[n("b",[e._v("\n                                "+e._s(e.mixin_formatNumber(e.expense_amount))+"\n                            ")])])])])])])],1),e._v(" "),n("v-row",[n("v-col",{staticClass:"text-right"},[n("v-btn",{attrs:{color:"green",dark:""},on:{click:e.onSave}},[e._v("\n                Save\n            ")]),e._v(" "),n("v-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("Cancel")])],1)],1)],2)}),[],!1,null,null,null),v=t.a=p.exports},163:function(e,t,n){"use strict";var r=n(46),o={data:function(){return{no_tin:!1,openDialog:!1,valid:!1,selected_expense_types:[],expense_types:[],form:{code:"",name:"",email:"",tin:"",contact_person:"",mobile_number:"",telephone_number:"",remarks:"",website:"",is_vat_inclusive:!0,address:"",is_active:!0},errors:{code:[],name:[],email:[],tin:[],contact_person:[],mobile_number:[],telephone_number:[],remarks:[],website:[],is_vat_inclusive:[],address:[],is_active:[]}}},methods:{closeDialog:function(){this.openDialog=!1,Object.assign(this.$data,this.$options.data.apply(this))},onCreateVendor:function(){var e=this;this.$refs.form.validate(),this.$refs.form.validate()&&r.a.store({code:this.form.code,name:this.form.name,email:this.form.email,tin:"N/A"==this.form.tin?null:this.form.tin,contact_person:this.form.contact_person,mobile_number:this.form.mobile_number,telephone_number:this.form.telephone_number,remarks:this.form.remarks,website:this.form.website,is_vat_inclusive:this.form.is_vat_inclusive,address:this.form.address,expense_types:this.selected_expense_types,is_active:this.form.is_active}).then((function(t){e.$dialog.message.success("Vendor created successfully.",{position:"top-right",timeout:2e3}),e.$emit("createdVendor"),e.openDialog=!1})).catch((function(t){e.mixin_showErrors(t),e.errors=t.response.data.errors}))}},watch:{openDialog:function(){this.form={code:"",name:"",email:"",tin:"",contact_person:"",mobile_number:"",telephone_number:"",remarks:"",website:"",is_vat_inclusive:!0,address:"",is_active:!0}}}},i=n(4),s=Object(i.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{attrs:{persistent:"","max-width":"600px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,o=t.attrs;return[n("v-btn",e._g(e._b({attrs:{fab:"",color:"primary",text:"","x-small":""}},"v-btn",o,!1),r),[n("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)]}}]),model:{value:e.openDialog,callback:function(t){e.openDialog=t},expression:"openDialog"}},[e._v(" "),n("v-card",[n("v-card-title",[n("span",{staticClass:"headline"},[e._v("\n                New Vendor\n            ")])]),e._v(" "),n("v-card-text",[n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(150)),counter:150,"error-messages":e.errors.name,label:"Name *",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-radio-group",{attrs:{row:""},on:{change:function(t){e.no_tin=!1,e.form.tin=""}},model:{value:e.form.is_vat_inclusive,callback:function(t){e.$set(e.form,"is_vat_inclusive",t)},expression:"form.is_vat_inclusive"}},[n("v-radio",{attrs:{label:"VAT",value:!0}}),e._v(" "),n("v-radio",{attrs:{label:"Non-VAT",value:!1}})],1)],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"9"}},[n("v-text-field",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.tin,counter:100,label:"Tax Identification Number (TIN) *",required:"",readonly:e.no_tin},scopedSlots:e._u([{key:"append",fn:function(){},proxy:!0}]),model:{value:e.form.tin,callback:function(t){e.$set(e.form,"tin",t)},expression:"form.tin"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"3"}},[n("v-checkbox",{attrs:{label:"N/A",readonly:e.form.is_vat_inclusive},on:{click:function(){e.form.tin=e.no_tin?"N/A":""}},model:{value:e.no_tin,callback:function(t){e.no_tin=t},expression:"no_tin"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{rules:[],"error-messages":e.errors.email,label:"Email Address"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{rules:[],"error-messages":e.errors.contact_person,counter:100,label:"Contact Person"},model:{value:e.form.contact_person,callback:function(t){e.$set(e.form,"contact_person",t)},expression:"form.contact_person"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{rules:[],counter:30,"error-messages":e.errors.mobile_number,label:"Mobile Number",type:"number"},on:{input:function(t){e.errors.mobile_number=[]}},model:{value:e.form.mobile_number,callback:function(t){e.$set(e.form,"mobile_number",t)},expression:"form.mobile_number"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{rules:[],counter:30,"error-messages":e.errors.telephone_number,label:"Telephone Number",type:"number"},on:{input:function(t){e.errors.telephone_number=[]}},model:{value:e.form.telephone_number,callback:function(t){e.$set(e.form,"telephone_number",t)},expression:"form.telephone_number"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[n("v-text-field",{attrs:{counter:100,rules:[],"error-messages":e.errors.website,label:"Website"},on:{input:function(t){e.errors.website=[]}},model:{value:e.form.website,callback:function(t){e.$set(e.form,"website",t)},expression:"form.website"}})],1)],1),e._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-textarea",{attrs:{rules:e.mixin_validation.required,"error-messages":e.errors.address,label:"Address *",rows:"1"},on:{input:function(t){e.errors.address=[]}},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),n("small",{staticClass:"text--secondary"},[e._v("\n                        * indicates required field\n                    ")])],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closeDialog}},[e._v("\n                Close\n            ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.onCreateVendor}},[e._v("\n                Save\n            ")])],1)],1)],1)}),[],!1,null,null,null);t.a=s.exports},24:function(e,t,n){"use strict";var r=n(10),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return o.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return o.a.get("/api/users",e)}},{key:"show",value:function(e,t){return o.a.get("/api/users/".concat(e),t)}},{key:"store",value:function(e){return o.a.post("/api/users",e)}},{key:"update",value:function(e,t){return o.a.put("/api/users/".concat(e),t)}},{key:"delete",value:function(e,t){return o.a.delete("/api/users/".concat(e),t)}},{key:"restore",value:function(e,t){return o.a.put("/api/users/restore/".concat(e),t)}},{key:"updatePassword",value:function(e,t){return o.a.put("/api/users/update_password/".concat(e),t)}},{key:"resetPassword",value:function(e,t){return o.a.put("/api/users/reset_password/".concat(e),t)}},{key:"verifyEmail",value:function(e,t){return o.a.put("/api/users/verify_email/".concat(e),t)}},{key:"updateFund",value:function(e,t){return o.a.put("/api/users/update_fund/".concat(e),t)}},{key:"updateSettings",value:function(e,t){return o.a.put("/api/users/update_settings/".concat(e),t)}},{key:"updatePermissions",value:function(e,t){return o.a.put("/api/users/update_permissions/".concat(e),t)}},{key:"updateProfile",value:function(e,t){return o.a.put("/api/users/update_profile/".concat(e),t)}},{key:"updateActivation",value:function(e,t){return o.a.put("/api/users/update_activation/".concat(e),t)}},{key:"export",value:function(){return o.a.get("/api/users/export/data")}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new s},28:function(e,t,n){"use strict";var r=n(24);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={props:{selectedUsers:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedUser:{type:Object,default:null},usersParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["first_name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,n){var o=e.options,s=o.sortBy,a=o.sortDesc,l=o.page,u=o.itemsPerPage,c={search:e.filters.search.trim().toLowerCase(),sortBy:s[0],sortType:a[0]?"desc":"asc",page:l,itemsPerPage:u,isSelection:!0,is_active:!0},m={};m=e.usersParameters&&e.usersParameters.params?{params:i(i({},c),e.usersParameters.params)}:{params:i({},c)},r.a.getAll(m).then((function(n){e.loading=!1,t(n.data)})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,n()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedUser=null,this.options={sortBy:["last_name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedUser)},selectUser:function(e){this.computedSelectedUser=e,this.$emit("selectUser",e)},getJobName:function(e){return e.job?e.job.name:""},getDepartmentName:function(e){return e.job&&e.job.department?e.job.department.name:""}},watch:{"filters.search":function(){var e=this;""==this.filters.search&&this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},params:{handler:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},deep:!0},dialog:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},computed:{params:function(e){return i({},this.options)},computedSelectedUser:{get:function(){return this.selectedUser?this.selectedUser:null},set:function(e){return e}}},created:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},l=n(4),u=Object(l.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,r=t.attrs;return[e._t("openDialog",null,null,{attrs:r,on:n,computedSelectedUser:e.computedSelectedUser})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",[e._v("\n                Employees\n                "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),e._v(" "),n("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[n("v-list-item-group",{attrs:{"active-class":"green--text",multiple:e.multipleSelection},on:{change:e.selectUser},model:{value:e.computedSelectedUser,callback:function(t){e.computedSelectedUser=t},expression:"computedSelectedUser"}},[e._l(e.collections.items,(function(t,r){return[n("v-list-item",{key:r,attrs:{value:t}},[[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),e._v(" "),n("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:e._s(e.getJobName(t))}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s(e.getDepartmentName(t))}})],1)]],2)]}))],2)],1),e._v(" "),n("div",[n("v-pagination",{attrs:{length:e.meta.last_page,"total-visible":7},model:{value:e.options.page,callback:function(t){e.$set(e.options,"page",t)},expression:"options.page"}})],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.onReset}},[e._v("\n                    Reset\n                ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=u.exports},38:function(e,t,n){"use strict";var r=n(10),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getAll",value:function(e){return o.a.get("/api/expenses",e)}},{key:"get",value:function(e){return o.a.get("/api/data/expenses",e)}},{key:"show",value:function(e,t){return o.a.get("/api/expenses/".concat(e),t)}},{key:"store",value:function(e){return o.a.post("/api/expenses",e)}},{key:"update",value:function(e,t){return o.a.put("/api/expenses/".concat(e),t)}},{key:"delete",value:function(e,t){return o.a.delete("/api/expenses/".concat(e),t)}},{key:"restore",value:function(e,t){return o.a.put("/api/expenses/restore/".concat(e),t)}},{key:"export",value:function(){return o.a.get("/api/expenses/export/data")}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new s},46:function(e,t,n){"use strict";var r=n(10),o=n.n(r);function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"getAll",value:function(e){return o.a.get("/api/vendors",e)}},{key:"get",value:function(e){return o.a.get("/api/data/vendors",e)}},{key:"show",value:function(e,t){return o.a.get("/api/vendors/".concat(e),t)}},{key:"store",value:function(e){return o.a.post("/api/vendors",e)}},{key:"update",value:function(e,t){return o.a.put("/api/vendors/".concat(e),t)}},{key:"delete",value:function(e,t){return o.a.delete("/api/vendors/".concat(e),t)}},{key:"restore",value:function(e,t){return o.a.put("/api/vendors/restore/".concat(e),t)}},{key:"updateActivation",value:function(e,t){return o.a.put("/api/vendors/update_activation/".concat(e),t)}},{key:"export",value:function(){return o.a.get("/api/vendors/export/data")}}])&&i(t.prototype,n),r&&i(t,r),e}();t.a=new s}}]);