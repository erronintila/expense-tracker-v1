(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{38:function(t,e,r){"use strict";var a=r(10),n=r.n(a);function s(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,a;return e=t,(r=[{key:"getAll",value:function(t){return n.a.get("/api/expenses",t)}},{key:"get",value:function(t){return n.a.get("/api/data/expenses",t)}},{key:"show",value:function(t,e){return n.a.get("/api/expenses/".concat(t),e)}},{key:"store",value:function(t){return n.a.post("/api/expenses",t)}},{key:"update",value:function(t,e){return n.a.put("/api/expenses/".concat(t),e)}},{key:"delete",value:function(t,e){return n.a.delete("/api/expenses/".concat(t),e)}},{key:"restore",value:function(t,e){return n.a.put("/api/expenses/restore/".concat(t),e)}},{key:"export",value:function(){return n.a.get("/api/expenses/export/data")}}])&&s(e.prototype,r),a&&s(e,a),t}();e.a=new o},883:function(t,e,r){"use strict";r.r(e);r(50);var a=r(38),n={data:function(){return{formDataLoaded:!1,panel:[0,1],itemize:!1,reimbursable_amount:!1,dialog:!1,valid:!1,menu:!1,headers:[{text:"Particulars",value:"description",sortable:!1},{text:"Quantity",value:"quantity",sortable:!1},{text:"Amount",value:"amount",sortable:!1},{text:"Total",value:"total",sortable:!1},{text:"",value:"actions",sortable:!1}],items:[],form:{code:null,description:null,amount:0,detials_quantity:0,details_amount:0,receipt_number:null,date:null,remarks:"",notes:"",is_active:!0,expense_type:{id:null,name:"",limit:null,sub_types:null},sub_type:{id:null,name:"",limit:null},user:{id:null,remaining_fund:0,fund:0,expense_types:null},vendor:{id:null,name:"",is_vat_inclusive:!0},is_reimbursable:!1,revolving_fund:0,reimbursable_amount:0,details:{description:"",amount:0},is_tax_inclusive:!0,tax_name:"",tax_rate:0,tax_amount:0,status:{color:"",remarks:"",status:""},is_late_encoded:!1,created_at:null,updated_at:null,deleted_at:null,submitted_at:null,reviewed_at:null,approved_at:null,rejected_at:null,expense_report:null,logs:[]}}},methods:{goBack:function(){this.$route.params.isDeleted&&this.$route.params.fromExpenseReport?this.$router.push({name:"user.expense_reports.show",params:{id:this.form.expense_report.id,isDeleted:!0,fromExpense:!0}}):this.$router.go(-1)},getData:function(){var t=this,e={};this.$route.params.isDeleted&&(e={params:{isDeleted:!0}}),a.a.show(this.$route.params.id,e).then((function(e){var r=e.data.data;t.form.code=r.code,t.form.description=r.description,t.form.receipt_number=r.receipt_number,t.form.date=r.date,t.form.remarks=r.remarks,t.form.notes=r.notes,t.form.is_active=r.is_active,t.form.user=r.user,t.form.vendor=null==r.vendor?{id:null,name:"",is_vat_inclusive:!0}:r.vendor,t.form.expense_type=r.expense_type,t.form.is_tax_inclusive=r.is_tax_inclusive,t.form.tax_name=r.tax_name,t.form.tax_rate=r.tax_rate,t.form.tax_amount=r.tax_amount,t.form.status=r.status,t.form.is_late_encoded=r.is_late_encoded,null!==r.details?(t.itemize=!0,t.items=r.details):t.form.amount=r.amount,t.form.sub_type=null==r.sub_type?{id:null,name:"None",limit:null}:r.sub_type,r.revolving_fund>0?(t.paid_through_fund=!0,t.form.revolving_fund=r.revolving_fund):(t.paid_through_fund=!1,t.form.revolving_fund=0),t.form.reimbursable_amount=r.reimbursable_amount,t.form.user.remaining_fund+=r.amount-r.reimbursable_amount,t.form.expense_report=r.expense_report,t.form.created_at=r.created_at,t.form.updated_at=r.updated_at,t.form.deleted_at=r.deleted_at,t.form.submitted_at=r.expense_report?r.expense_report.submitted_at:null,t.form.approved_at=r.expense_report?r.expense_report.approved_at:null,t.form.rejected_at=r.expense_report?r.expense_report.rejected_at:null,t.form.logs=r.logs,t.formDataLoaded=!0})).catch((function(e){t.mixin_showErrors(e),t.formDataLoaded=!0,t.$router.push({name:"user.expenses.index"},(function(){}))}))}},computed:{canEdit:function(){return null===this.form.deleted_at&&null===this.form.approved_at&&null===this.form.rejected_at&&(null===this.form.expense_report||null===this.form.expense_report.approved_at&&null===this.form.expense_report.deleted_at&&null===this.form.expense_report.rejected_at)},amount_to_replenish:function(){var t=this.mixin_convertToNumber(this.form.user?this.form.user.remaining_fund:0),e=this.mixin_convertToNumber(this.form.amount),r=this.mixin_convertToNumber(this.form.reimbursable_amount),a=e<r?0:e-r;return this.mixin_can("set reimbursable amount")?e-r>t?0:a:t>=e?e:e-Math.abs(t-e)},amount_to_reimburse:function(){var t=this.mixin_convertToNumber(this.form.user?this.form.user.remaining_fund:0),e=this.mixin_convertToNumber(this.form.amount),r=this.mixin_convertToNumber(this.form.reimbursable_amount);if(this.mixin_can("set reimbursable amount"))return r>e?0:r;if(t<e){var a=Math.abs(t-e);return this.form.reimbursable_amount=a,a}return this.form.reimbursable_amount=0,0},expense_amount:function(){return this.mixin_convertToNumber(this.form.amount)},display_reimbursable_amount:function(){return parseFloat(this.form.amount)>parseFloat(this.form.user.remaining_fund)}},watch:{items:function(){this.form.amount=this.items.reduce((function(t,e){return parseFloat(t)+parseFloat(e.total)}),0),this.form.details_amount=this.items.reduce((function(t,e){return parseFloat(t)+parseFloat(e.amount)}),0),this.form.details_quantity=this.items.reduce((function(t,e){return parseFloat(t)+parseFloat(e.quantity)}),0)},itemize:function(){this.form.amount=this.items.reduce((function(t,e){return parseFloat(t)+parseFloat(e.total)}),0)}},created:function(){this.getData()},activated:function(){this.getData()},deactivated:function(){Object.assign(this.$data,this.$options.data())}},s=r(4),o=Object(s.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t.formDataLoaded?r("v-card",{staticClass:"elevation-0 pt-0"},[r("v-card-title",{staticClass:"pt-0"},[r("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(e){return t.goBack()}}},[r("v-icon",[t._v("mdi-arrow-left")])],1),t._v(" "),r("v-spacer"),t._v(" "),r("h4",{staticClass:"title green--text"},[t._v("Expense Details")])],1),t._v(" "),r("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",md:"8"}},[r("div",[t._v("\n                            "+t._s(t.form.user.full_name)+"\n                            "),t.canEdit?r("v-btn",{attrs:{text:"",color:"green",to:"/expenses/"+t.$route.params.id+"/edit"}},[t._v("\n                                Edit\n                            ")]):t._e()],1),t._v(" "),r("div",{staticClass:"display-1 green--text"},[t._v("\n                            PHP "+t._s(t.mixin_formatNumber(t.form.amount))+"\n                        ")]),t._v(" "),r("div",[t._v("\n                            "+t._s(t.form.expense_type.name)+"\n                            "+t._s(null==t.form.sub_type||null==t.form.sub_type.id?"":"("+t.form.sub_type.name+")")+"\n                        ")]),t._v(" "),r("div",[t._v("Date: "+t._s(t.form.date))])]),t._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("div",[t._v("Receipt: #"+t._s(t.form.receipt_number))]),t._v(" "),r("div",[t._v("Vendor: "+t._s(t.form.vendor.name))]),t._v(" "),r("div",[t._v("\n                            Status:\n                            "),r("v-btn",{attrs:{color:t.form.status.color,"x-small":"",dark:""}},[t._v("\n                                "+t._s(t.form.status.status)+"\n                            ")])],1),t._v(" "),t.form.is_late_encoded?r("div",[r("v-btn",{attrs:{color:"red","x-small":"",dark:""}},[t._v("\n                                Late Encoded\n                            ")])],1):t._e()])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-row",[r("v-col",[r("div",[t._v("Description: "+t._s(t.form.description))]),t._v(" "),r("div",[t._v("\n                            Tax ("+t._s(t.form.tax_rate)+"%):\n                            "+t._s(t.form.tax_amount)+"\n                            "+t._s(t.form.is_tax_inclusive?"- Inclusive":"- Exclusive")+"\n                        ")])])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12"}},[r("div",[r("v-data-table",{attrs:{headers:t.headers,items:t.items,"items-per-page":5,"footer-props":{itemsPerPageOptions:[5,10,20]}}},[t.items.length>0?r("template",{slot:"body.append"},[r("tr",{staticClass:"green--text hidden-md-and-up"},[r("td",{staticClass:"title"},[t._v("\n                                            Total:\n                                            "),r("strong",[t._v(t._s(t.form.amount))])])]),t._v(" "),r("tr",{staticClass:"green--text hidden-sm-and-down"},[r("td",{staticClass:"title"},[t._v("Total")]),t._v(" "),r("td",[r("strong",[t._v(t._s(t.form.details_quantity))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t.form.details_amount))])]),t._v(" "),r("td",[r("strong",[t._v(t._s(t.form.amount))])]),t._v(" "),r("td")])]):t._e()],2)],1)])],1),t._v(" "),r("v-divider"),t._v(" "),r("v-row",[r("v-col",{attrs:{cols:"12",md:"8"}},[r("div",[t._v("Remarks : "+t._s(t.form.remarks))])]),t._v(" "),r("v-col",{attrs:{cols:"12",md:"4"}},[r("table",{attrs:{width:"100%"}},[r("tbody",[r("tr",[r("td",[t._v("\n                                        Amount to reimburse\n                                    ")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",{staticClass:"green--text text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.amount_to_reimburse))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",[t._v("\n                                        Amount to replenish\n                                    ")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",{staticClass:"green--text text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.amount_to_replenish))+"\n                                    ")])]),t._v(" "),r("tr",[r("td",{attrs:{colspan:"3"}},[r("v-divider")],1)]),t._v(" "),r("tr",[r("td",[t._v("\n                                        Total\n                                    ")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",{staticClass:"green--text text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.expense_amount))+"\n                                    ")])])])])]),t._v(" "),r("v-col",{attrs:{cols:"12"}},[r("v-divider",{staticClass:"mb-4"}),t._v(" "),r("div",[t._v("Notes : "+t._s(t.form.notes))])],1)],1),t._v(" "),r("v-divider",{staticClass:"mb-4"}),t._v(" "),r("v-row",{staticClass:"text--secondary text-caption"},[r("v-col",{attrs:{cols:"12"}},[r("div",[t._v("Other Details :")]),t._v(" "),r("table",{staticClass:"table",attrs:{width:"100%"}},[r("tbody",[t.form.created_at?r("tr",[r("td",[t._v("Created")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(t.form.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]):t._e(),t._v(" "),t.form.submitted_at?r("tr",[r("td",[t._v("Submitted")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(t.form.submitted_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]):t._e(),t._v(" "),t.form.approved_at?r("tr",[r("td",[t._v("Approved")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(t.form.approved_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]):t._e(),t._v(" "),t.form.rejected_at?r("tr",[r("td",[t._v("Rejected")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(t.form.rejected_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]):t._e(),t._v(" "),t.form.deleted_at?r("tr",[r("td",[t._v("Deleted")]),t._v(" "),r("td",[t._v(":")]),t._v(" "),r("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(t.form.deleted_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]):t._e()])])])],1),t._v(" "),r("v-row",{staticClass:"text--secondary text-caption"},[r("v-col",{attrs:{cols:"12",md:"12"}},[r("div",[t._v("History :")]),t._v(" "),r("div",[r("table",{staticClass:"table",attrs:{width:"100%"}},[r("tbody",t._l(t.form.logs,(function(e){return r("tr",{key:e.id},[r("td",[t._v("\n                                            "+t._s(t.mixin_formatDate(e.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                        ")]),t._v(" "),r("td",[t._v("-")]),t._v(" "),r("td",[t._v("\n                                            "+t._s(null==e.causer?"System":e.causer.name)+"\n                                        ")]),t._v(" "),r("td",[t._v("-")]),t._v(" "),r("td",[t._v(t._s(e.description))])])})),0)])])])],1)],1)],1)],1):r("loader-component")],1)}),[],!1,null,null,null);e.default=o.exports}}]);