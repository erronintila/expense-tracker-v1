(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{24:function(e,t,n){"use strict";var a=n(10),s=n.n(a);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"get",value:function(e){return s.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return s.a.get("/api/users",e)}},{key:"show",value:function(e,t){return s.a.get("/api/users/".concat(e),t)}},{key:"store",value:function(e){return s.a.post("/api/users",e)}},{key:"update",value:function(e,t){return s.a.put("/api/users/".concat(e),t)}},{key:"delete",value:function(e,t){return s.a.delete("/api/users/".concat(e),t)}},{key:"restore",value:function(e,t){return s.a.put("/api/users/restore/".concat(e),t)}},{key:"updatePassword",value:function(e,t){return s.a.put("/api/users/update_password/".concat(e),t)}},{key:"resetPassword",value:function(e,t){return s.a.put("/api/users/reset_password/".concat(e),t)}},{key:"verifyEmail",value:function(e,t){return s.a.put("/api/users/verify_email/".concat(e),t)}},{key:"updateFund",value:function(e,t){return s.a.put("/api/users/update_fund/".concat(e),t)}},{key:"updateSettings",value:function(e,t){return s.a.put("/api/users/update_settings/".concat(e),t)}},{key:"updatePermissions",value:function(e,t){return s.a.put("/api/users/update_permissions/".concat(e),t)}},{key:"updateProfile",value:function(e,t){return s.a.put("/api/users/update_profile/".concat(e),t)}},{key:"updateActivation",value:function(e,t){return s.a.put("/api/users/update_activation/".concat(e),t)}},{key:"export",value:function(){return s.a.get("/api/users/export/data")}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=new o},27:function(e,t,n){"use strict";var a={name:"page-header",props:{title:""}},s=n(4),r=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card-title",{staticClass:"pt-0"},[n("h4",{staticClass:"title green--text"},[e._v(e._s(e.title))]),e._v(" "),n("v-spacer"),e._v(" "),e._t("actions")],2),e._v(" "),n("v-card-subtitle",[e._t("sub-actions")],2)],1)}),[],!1,null,null,null);t.a=r.exports},28:function(e,t,n){"use strict";var a=n(24);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i={props:{selectedUsers:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedUser:{type:Object,default:null},usersParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["first_name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,n){var s=e.options,o=s.sortBy,i=s.sortDesc,l=s.page,c=s.itemsPerPage,u={search:e.filters.search.trim().toLowerCase(),sortBy:o[0],sortType:i[0]?"desc":"asc",page:l,itemsPerPage:c,isSelection:!0,is_active:!0},d={};d=e.usersParameters&&e.usersParameters.params?{params:r(r({},u),e.usersParameters.params)}:{params:r({},u)},a.a.getAll(d).then((function(n){e.loading=!1,t(n.data)})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,n()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedUser=null,this.options={sortBy:["last_name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedUser)},selectUser:function(e){this.computedSelectedUser=e,this.$emit("selectUser",e)},getJobName:function(e){return e.job?e.job.name:""},getDepartmentName:function(e){return e.job&&e.job.department?e.job.department.name:""}},watch:{"filters.search":function(){var e=this;""==this.filters.search&&this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},params:{handler:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))},deep:!0},dialog:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},computed:{params:function(e){return r({},this.options)},computedSelectedUser:{get:function(){return this.selectedUser?this.selectedUser:null},set:function(e){return e}}},created:function(){var e=this;this.getDataFromApi().then((function(t){e.collections.items=t.data,e.meta=t.meta}))}},l=n(4),c=Object(l.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-dialog",{attrs:{width:"500"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[e._t("openDialog",null,null,{attrs:a,on:n,computedSelectedUser:e.computedSelectedUser})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-title",[e._v("\n                Employees\n                "),n("v-spacer"),e._v(" "),n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.filters.search,callback:function(t){e.$set(e.filters,"search",t)},expression:"filters.search"}})],1),e._v(" "),n("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[n("v-list-item-group",{attrs:{"active-class":"green--text",multiple:e.multipleSelection},on:{change:e.selectUser},model:{value:e.computedSelectedUser,callback:function(t){e.computedSelectedUser=t},expression:"computedSelectedUser"}},[e._l(e.collections.items,(function(t,a){return[n("v-list-item",{key:a,attrs:{value:t}},[[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.name)}}),e._v(" "),n("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:e._s(e.getJobName(t))}}),e._v(" "),n("v-list-item-subtitle",{domProps:{textContent:e._s(e.getDepartmentName(t))}})],1)]],2)]}))],2)],1),e._v(" "),n("div",[n("v-pagination",{attrs:{length:e.meta.last_page,"total-visible":7},model:{value:e.options.page,callback:function(t){e.$set(e.options,"page",t)},expression:"options.page"}})],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-actions",[n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.onReset}},[e._v("\n                    Reset\n                ")]),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);t.a=c.exports},38:function(e,t,n){"use strict";var a=n(10),s=n.n(a);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getAll",value:function(e){return s.a.get("/api/expenses",e)}},{key:"get",value:function(e){return s.a.get("/api/data/expenses",e)}},{key:"show",value:function(e,t){return s.a.get("/api/expenses/".concat(e),t)}},{key:"store",value:function(e){return s.a.post("/api/expenses",e)}},{key:"update",value:function(e,t){return s.a.put("/api/expenses/".concat(e),t)}},{key:"delete",value:function(e,t){return s.a.delete("/api/expenses/".concat(e),t)}},{key:"restore",value:function(e,t){return s.a.put("/api/expenses/restore/".concat(e),t)}},{key:"export",value:function(){return s.a.get("/api/expenses/export/data")}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=new o},51:function(e,t,n){"use strict";var a=n(1),s=n.n(a),r={props:{dateRange:{type:Array,default:function(){return[s()().startOf("month").format("YYYY-MM-DD"),s()().endOf("month").format("YYYY-MM-DD")]}},datePreset:{type:String,default:"Custom"},datePresets:{type:Array,default:function(){return[{label:"Today",range:[s()().format("YYYY-MM-DD"),s()().format("YYYY-MM-DD")]},{label:"Yesterday",range:[s()().subtract(1,"days").format("YYYY-MM-DD"),s()().subtract(1,"days").format("YYYY-MM-DD")]},{label:"This Week",range:[s()().startOf("week").format("YYYY-MM-DD"),s()().endOf("week").format("YYYY-MM-DD")]},{label:"Last Week",range:[s()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),s()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")]},{label:"This Month",range:[s()().startOf("month").format("YYYY-MM-DD"),s()().endOf("month").format("YYYY-MM-DD")]},{label:"Last Month",range:[s()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),s()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")]},{label:"This Quarter",range:[s()().startOf("quarter").format("YYYY-MM-DD"),s()().endOf("quarter").format("YYYY-MM-DD")]},{label:"Last Quarter",range:[s()().subtract(1,"quarters").startOf("quarter").format("YYYY-MM-DD"),s()().subtract(1,"quarters").endOf("quarter").format("YYYY-MM-DD")]},{label:"This Year",range:[s()().startOf("year").format("YYYY-MM-DD"),s()().endOf("year").format("YYYY-MM-DD")]},{label:"Last Year",range:[s()().subtract(1,"years").startOf("year").format("YYYY-MM-DD"),s()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]},{label:"Last 5 Years",range:[s()().subtract(5,"years").startOf("year").format("YYYY-MM-DD"),s()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]}]}}},data:function(){return{range:[],preset:{},presets:[],dialog:!1}},methods:{onCancel:function(){this.dialog=!1,this.preset={}},onSave:function(){if(this.range&&2==this.range.length){var e=this.range.sort((function(e,t){return new Date(e)-new Date(t)}));return this.$refs.dialog.save(e),void this.$emit("on-change",e)}this.dialog=!0}},computed:{dateRangeText:function(){return this.range&&this.range.length?this.range.sort((function(e,t){return new Date(e)-new Date(t)})).join(" ~ "):""}},watch:{preset:function(){this.preset&&Object.keys(this.preset).length&&(this.range=this.preset.range)},dateRange:{immediate:!0,handler:function(e,t){this.range=e}},datePreset:{immediate:!0,handler:function(e,t){this.preset=e}},datePresets:{immediate:!0,handler:function(e,t){this.presets=e}}}},o=n(4),i=Object(o.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-dialog",{ref:"dialog",attrs:{"return-value":e.range,persistent:"",width:"290px"},on:{"update:returnValue":function(t){e.range=t},"update:return-value":function(t){e.range=t}},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on,a=t.attrs;return[e._t("openDialog",null,null,{on:n,attrs:a,dateRangeText:e.dateRangeText})]}}],null,!0),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-container",[n("v-row",[n("v-col",[n("div",{staticClass:"text-center"},[n("v-menu",{attrs:{"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({attrs:{color:"primary",dark:"",text:""}},"v-btn",s,!1),a),[n("v-icon",[e._v("mdi-calendar")]),e._v("Â \n                  "+e._s(e.dateRangeText)+"\n                ")],1)]}}])},[e._v(" "),n("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"200px"}},[n("v-list-item-group",{model:{value:e.preset,callback:function(t){e.preset=t},expression:"preset"}},e._l(e.presets,(function(t,a){return n("v-list-item",{key:a,attrs:{value:t}},[n("v-list-item-title",[e._v("\n                      "+e._s(t.label)+"\n                    ")])],1)})),1)],1)],1)],1),e._v(" "),e.range&&2!=e.range.length?n("div",{staticClass:"overline red--text text-capitalize"},[e._v("\n            *select 1 more\n          ")]):e._e()])],1),e._v(" "),n("v-divider")],1),e._v(" "),n("v-date-picker",{attrs:{color:"green","no-title":"",range:"",scrollable:""},on:{change:function(t){e.preset={}}},model:{value:e.range,callback:function(t){e.range=t},expression:"range"}},[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onCancel}},[e._v(" Cancel ")]),e._v(" "),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:e.onSave}},[e._v(" OK ")])],1)],1)],1)}),[],!1,null,null,null);t.a=i.exports},52:function(e,t,n){"use strict";var a=n(10),s=n.n(a);function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,(n=[{key:"getAll",value:function(e){return s.a.get("/api/expense_types",e)}},{key:"get",value:function(e){return s.a.get("/api/data/expense_types",e)}},{key:"show",value:function(e,t){return s.a.get("/api/expense_types/".concat(e),t)}},{key:"store",value:function(e){return s.a.post("/api/expense_types",e)}},{key:"update",value:function(e,t){return s.a.put("/api/expense_types/".concat(e),t)}},{key:"delete",value:function(e,t){return s.a.delete("/api/expense_types/".concat(e),t)}},{key:"restore",value:function(e,t){return s.a.put("/api/expense_types/restore/".concat(e),t)}}])&&r(t.prototype,n),a&&r(t,a),e}();t.a=new o},880:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=(n(50),n(27)),o=n(51),i=n(28),l=n(38),c=n(52);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={components:{DateRangePicker:o.a,UserDialogSelector:i.a,PageHeader:r.a},data:function(){return{formDataLoaded:!1,loading:!0,date_range:[s()().startOf("month").format("YYYY-MM-DD"),s()().endOf("month").format("YYYY-MM-DD")],preset:"",presets:["Today","Yesterday","Last 7 Days","Last 30 Days","This Week","This Month","This Quarter","This Year","Last Week","Last Month","Last Quarter","Last Year","Last 5 Years"],headers:[{text:"Date",value:"date"},{text:"Type",value:"expense_type.name"},{text:"Employee",value:"user.full_name"},{text:"Amount",value:"amount"},{text:"To replenish",value:"replenishment",sortable:!1},{text:"Last Updated",value:"updated_at"},{text:"Status",value:"status.status",sortable:!1},{text:"Actions",value:"actions",sortable:!1},{text:"",value:"data-table-expand"}],items:[],user:this.$store.getters.user.is_admin&&this.mixin_can("view all users expenses")?null:this.$store.getters.user,expense_type:{id:0,name:"All Expense Types"},expense_types:[],status:"All Expenses",statuses:["All Expenses","Unreported Expenses","Unsubmitted Expenses","Submitted Expenses","Approved Expenses","Rejected Expenses","Deleted Expenses","Released Payment","Reimbursed Expenses"],selected:[],search:"",totalItems:0,totalAmount:0,totalReplenishment:0,options:{sortBy:["created_at"],sortDesc:[!0],page:1,itemsPerPage:10}}},methods:{onSearch:function(){var e=this;this.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))},updateDates:function(e){this.date_range=e},selectUser:function(e){this.selected=[],this.user=null!=e&&null!=e?e:null},resetUser:function(){this.selected=[],this.user=null},getDataFromApi:function(){var e=this;return this.loading=!0,new Promise((function(t,n){var a=e.options,s=a.sortBy,r=a.sortDesc,o=a.page,i=a.itemsPerPage,c=e.search.trim().toLowerCase(),u=e.status,d=e.user?e.user.id:null,p=e.expense_type.id,m=e.date_range;l.a.getAll({params:{search:c,sortBy:s[0],sortType:r[0]?"desc":"asc",page:o,itemsPerPage:i,status:u,user_id:d,expense_type_id:p,start_date:m[0],end_date:m[1]?m[1]:m[0]}}).then((function(n){var a=n.data.data,s=n.data.meta.total;e.loading=!1,e.formDataLoaded=!0,t({items:a,total:s})})).catch((function(t){e.mixin_showErrors(t),e.loading=!1,e.formDataLoaded=!0,n()}))}))},loadExpenseTypes:function(){var e=this;c.a.get({params:{only:!0}}).then((function(t){e.expense_types=t.data.data,e.expense_types.unshift({id:0,name:"All Expense Types"})})).catch((function(t){e.mixin_showErrors(t)}))},onRefresh:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.status="All Expenses",this.loadExpenseTypes(),this.selected=[]},onShow:function(e){var t={id:e.id};e.deleted_at&&(t={id:e.id,isDeleted:!0}),this.$router.push({name:"user.expenses.show",params:t})},onEdit:function(e){if(e.expense_report){if(e.expense_report.approved_at)return void this.mixin_errorDialog("Error","Expense with an approved report can't be edited");if(e.expense_report.deleted_at)return void this.mixin_errorDialog("Error","Expense with a deleted report can't be edited")}"Deleted"!=this.status?this.$router.push({name:"user.expenses.edit",params:{id:e.id}}):this.mixin_errorDialog("Error","Expense has been deleted.")},onDelete:function(){var e=this;this.selected.map((function(e){return null===e.expense_report}));0!=this.selected.length?this.$confirm("Do you want to delete expense(s)?").then((function(t){if(t){var n=e.selected.map((function(e){return e.id}));l.a.delete(n).then((function(t){e.mixin_successDialog(t.data.status,t.data.message),e.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total})),e.selected=[]})).catch((function(t){e.mixin_showErrors(t)}))}})):this.mixin_errorDialog("Error","No item(s) selected")},onRestore:function(){var e=this,t=this.selected.map((function(e){return null===e.expense_report}));0!=this.selected.length?this.mixin_can("restore expenses")?t.includes(!1)?this.mixin_errorDialog("Error","Expense(s) with report(s) can't be restored"):this.$confirm("Do you want to restore expenses(s)?").then((function(t){if(t){var n=e.selected.map((function(e){return e.id}));l.a.restore(n).then((function(t){e.mixin_successDialog(t.data.status,t.data.message),e.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total})),e.selected=[]})).catch((function(t){e.mixin_showErrors(t)}))}})):this.mixin_errorDialog("Error","Not allowed"):this.mixin_errorDialog("Error","No item(s) selected")},show_edit:function(e){if(!this.mixin_can("edit expenses"))return!1;if(e&&e.expense_report_id){if(!e.expense_report.approved_at)return!1;if(!e.expense_report.rejected_at)return!1;if(!e.expense_report.deleted_at)return!1}return!0}},watch:{search:function(){var e=this;""==this.search&&this.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))},params:{immediate:!0,deep:!0,handler:function(){var e=this;this.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))}},items:function(){this.totalAmount=this.mixin_formatNumber(this.items.reduce((function(e,t){return e+t.amount}),0)),this.totalReplenishment=this.mixin_formatNumber(this.items.reduce((function(e,t){return e+(t.amount-t.reimbursable_amount)}),0))}},computed:{params:function(e){var t;return d(d({},this.options),{},(p(t={query:this.status},"query",this.user),p(t,"query",this.expense_type),p(t,"query",this.date_range),t))},maxDate:function(){var e=this.$store.getters.settings,t=s()().format("YYYY-MM-DD"),n=s()().endOf("day").format("YYYY-MM-DD");if(e){switch(e.submission_period){case"Weekly":n=s()().endOf("week").format("YYYY-MM-DD");break;case"Monthly":n=s()().endOf("month").format("YYYY-MM-DD");break;default:n=s()().endOf("day").format("YYYY-MM-DD")}return s()(t).isSameOrBefore(n)?t:n}return t},formattedDateRange:function(){var e=s()(this.date_range[0]).format("MMM DD, YYYY"),t=s()(this.date_range[1]).format("MMM DD, YYYY");return JSON.stringify(e)==JSON.stringify(t)||null==JSON.stringify(t)?e:"".concat(e," ~ ").concat(t)}},activated:function(){var e=this;this.$route.params.status&&(this.status=this.$route.params.status),this.$route.params.date_range&&(this.date_range=this.$route.params.date_range),this.$store.dispatch("AUTH_NOTIFICATIONS"),this.loadExpenseTypes(),this.getDataFromApi().then((function(t){e.items=t.items,e.totalItems=t.total}))}},v=n(4),f=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.formDataLoaded?n("v-card",{staticClass:"elevation-0 pt-0"},[n("page-header",{attrs:{title:"Expenses"},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([e.mixin_can("add expenses")?{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"elevation-3 mr-2",attrs:{color:"green",to:{name:"user.expenses.create"},dark:"",fab:"","x-small":""}},"v-btn",s,!1),a),[n("v-icon",{attrs:{dark:""}},[e._v("mdi-plus")])],1)]}}:null],null,!0)},[e._v(" "),n("span",[e._v("Add New")])])]},proxy:!0},{key:"sub-actions",fn:function(){return[n("DateRangePicker",{ref:"dateRangePicker",attrs:{dateRange:e.date_range},on:{"on-change":e.updateDates},scopedSlots:e._u([{key:"openDialog",fn:function(t){var a=t.on,s=t.attrs,r=t.dateRangeText;return[n("v-btn",e._g(e._b({staticClass:"ml-0 pl-0",attrs:{text:""}},"v-btn",s,!1),a),[e._v("\n                            "+e._s(r)+"\n                        ")])]}}])})]},proxy:!0}])}),e._v(" "),n("v-row",{staticClass:"ml-4"},[e.selected.length>0?n("v-chip",{staticClass:"mr-2",attrs:{color:"green",dark:"",close:"",small:"","close-icon":"mdi-close"},on:{"click:close":function(t){e.selected=[]}}},[e._v("\n                "+e._s(e.selected.length)+" Selected\n            ")]):e._e(),e._v(" "),n("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":"",right:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-chip",e._g(e._b({staticClass:"mr-2",attrs:{small:""}},"v-chip",s,!1),a),[e._v("\n                        "+e._s(e.status)+"\n                    ")])]}}])},[e._v(" "),n("v-card",[n("v-list",[n("v-list-item",[n("v-select",{attrs:{items:e.statuses,label:"Status"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}})],1)],1)],1)],1),e._v(" "),e.$store.getters.user.is_admin&&e.mixin_can("view all users expenses")?n("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:e.user,usersParameters:{params:{is_superadmin:!1}}},on:{selectUser:e.selectUser,onReset:e.resetUser},scopedSlots:e._u([{key:"openDialog",fn:function(t){var a=t.bind,s=t.on,r=t.computedSelectedUser;return[n("v-chip",e._g(e._b({staticClass:"mr-2 mb-2",attrs:{small:""}},"v-chip",a,!1),s),[e._v("\n                        "+e._s(r?r.name:"All Employees")+"\n                    ")])]}}],null,!1,2347878303)}):e._e(),e._v(" "),n("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":"",right:"",bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-chip",e._g(e._b({staticClass:"mr-2",attrs:{small:""}},"v-chip",s,!1),a),[e._v("\n                        "+e._s(e.expense_type.name)+"\n                    ")])]}}])},[e._v(" "),n("v-card",[n("v-list",[n("v-list-item",[n("v-select",{attrs:{items:e.expense_types,"item-text":"name","item-value":"id",label:"Expense Types","return-object":""},model:{value:e.expense_type,callback:function(t){e.expense_type=t},expression:"expense_type"}})],1)],1)],1)],1),e._v(" "),n("v-chip",{staticClass:"mr-2",attrs:{close:"",small:"","close-icon":"mdi-refresh"},on:{"click:close":e.onRefresh}},[e._v("\n                Refresh\n            ")]),e._v(" "),n("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.selected.length>0&&"Deleted Expenses"==e.status,expression:"selected.length > 0 && status == 'Deleted Expenses'"}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-history",color:"green",dark:""},on:{"click:close":e.onRestore}},[e._v("\n                Restore\n            ")]),e._v(" "),n("v-chip",{directives:[{name:"show",rawName:"v-show",value:e.selected.length>0&&"Deleted Expenses"!==e.status,expression:"\n                    selected.length > 0 && status !== 'Deleted Expenses'\n                "}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-trash-can-outline",color:"red",dark:""},on:{"click:close":e.onDelete}},[e._v("\n                Delete Expense(s)\n            ")])],1),e._v(" "),n("v-card-subtitle",[n("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onSearch(t)}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),e._v(" "),n("v-card-text",[n("v-data-table",{staticClass:"elevation-0",attrs:{headers:e.headers,items:e.items,loading:e.loading,options:e.options,"server-items-length":e.totalItems,"footer-props":{itemsPerPageOptions:[10,20,50,100],showFirstLastPage:!0,firstIcon:"mdi-page-first",lastIcon:"mdi-page-last",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"},"show-expand":"","single-expand":"","show-select":"","item-key":"id"},on:{"update:options":function(t){e.options=t}},scopedSlots:e._u([{key:"expanded-item",fn:function(t){var a=t.headers,s=t.item;return[n("td",{attrs:{colspan:a.length}},[n("v-container",[n("table",[n("tr",[n("td",[n("strong",[e._v("Expense Report")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(null==s.expense_report?"":s.expense_report.description+" (Code:"+s.expense_report.code+")")+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("To Replenish")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(e.mixin_formatNumber(s.amount-s.reimbursable_amount))+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("To Reimburse")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(e.mixin_formatNumber(s.reimbursable_amount))+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Tax")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(e.mixin_formatNumber(s.tax_amount))+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Tax rate")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(e.mixin_formatNumber(s.tax_rate))+"\n                                        %\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Code")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v(e._s(s.code))])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Description")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v(e._s(s.description))])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Receipt")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v(e._s(s.receipt_number))])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Vendor")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(null==s.vendor?"":s.vendor.name)+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Created")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v("\n                                        "+e._s(e.mixin_formatDate(s.created_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]),e._v(" "),n("tr",[n("td",[n("strong",[e._v("Late Encoded")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v(e._s(s.is_late_encoded))])]),e._v(" "),s.remarks?n("tr",[n("td",[n("strong",[e._v("Remarks")])]),e._v(" "),n("td",[e._v(":")]),e._v(" "),n("td",[e._v(e._s(s.remarks))])]):e._e()])])],1)]}},{key:"item.updated_at",fn:function(t){var n=t.item;return[e._v("\n                    "+e._s(e.mixin_getHumanDate(n.updated_at))+"\n                ")]}},{key:"item.amount",fn:function(t){var n=t.item;return[e._v("\n                    "+e._s(e.mixin_formatNumber(n.amount))+"\n                ")]}},{key:"item.replenishment",fn:function(t){var n=t.item;return[e._v("\n                    "+e._s(e.mixin_formatNumber(n.amount-n.reimbursable_amount))+"\n                ")]}},{key:"item.status.status",fn:function(t){var a=t.item;return[n("v-chip",{attrs:{color:a.status.color,dark:"",small:""}},[e._v(e._s(a.status.status))])]}},{key:"item.actions",fn:function(t){var a=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.onShow(a)}}},[e._v("\n                        mdi-eye\n                    ")]),e._v(" "),e.show_edit(a)&&null==a.deleted_at?n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.onEdit(a)}}},[e._v("\n                        mdi-pencil\n                    ")]):e._e(),e._v(" "),a.is_late_encoded?n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.on,s=t.attrs;return[n("v-icon",e._g(e._b({attrs:{color:"red",dark:""}},"v-icon",s,!1),a),[e._v("\n                                mdi-alert-circle-outline\n                            ")])]}}],null,!0)},[e._v(" "),n("span",[e._v("Late Encoded")])]):e._e()]}}],null,!0),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e.items.length>0?n("template",{slot:"body.append"},[n("tr",{staticClass:"green--text hidden-md-and-up"},[n("td",{staticClass:"title"},[e._v("\n                            Total: "),n("strong",[e._v(e._s(e.totalAmount))])])]),e._v(" "),n("tr",{staticClass:"green--text hidden-sm-and-down"},[n("td",{staticClass:"title"},[e._v("Total")]),e._v(" "),n("td"),e._v(" "),n("td"),e._v(" "),n("td"),e._v(" "),n("td",[n("strong",[e._v(e._s(e.totalAmount))])]),e._v(" "),n("td",[n("strong",[e._v(e._s(e.totalReplenishment))])]),e._v(" "),n("td"),e._v(" "),n("td"),e._v(" "),n("td"),e._v(" "),n("td")])]):e._e()],2),e._v(" "),n("v-row",[n("v-col",[n("div",[n("h4",{staticClass:"green--text"},[e._v("\n                            Note:\n                        ")]),e._v(" "),n("h4",{staticClass:"grey--text"},[e._v("\n                            Due of encoding expenses :\n                            "),e._v("\n                            "+e._s(e.maxDate)+"\n                        ")])])])],1)],1)],1):n("loader-component")],1)}),[],!1,null,null,null);t.default=f.exports}}]);