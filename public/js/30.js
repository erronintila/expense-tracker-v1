(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{149:function(e,a,t){"use strict";var r=t(10),n=t.n(r);function o(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t,r;return a=e,(t=[{key:"getAll",value:function(e){return n.a.get("/api/permissions",e)}},{key:"get",value:function(e){return n.a.get("/api/data/permissions",e)}}])&&o(a.prototype,t),r&&o(a,r),e}();a.a=new s},24:function(e,a,t){"use strict";var r=t(10),n=t.n(r);function o(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)}var a,t,r;return a=e,(t=[{key:"get",value:function(e){return n.a.get("/api/data/users",e)}},{key:"getAll",value:function(e){return n.a.get("/api/users",e)}},{key:"show",value:function(e,a){return n.a.get("/api/users/".concat(e),a)}},{key:"store",value:function(e){return n.a.post("/api/users",e)}},{key:"update",value:function(e,a){return n.a.put("/api/users/".concat(e),a)}},{key:"delete",value:function(e,a){return n.a.delete("/api/users/".concat(e),a)}},{key:"restore",value:function(e,a){return n.a.put("/api/users/restore/".concat(e),a)}},{key:"updatePassword",value:function(e,a){return n.a.put("/api/users/update_password/".concat(e),a)}},{key:"resetPassword",value:function(e,a){return n.a.put("/api/users/reset_password/".concat(e),a)}},{key:"verifyEmail",value:function(e,a){return n.a.put("/api/users/verify_email/".concat(e),a)}},{key:"updateFund",value:function(e,a){return n.a.put("/api/users/update_fund/".concat(e),a)}},{key:"updateSettings",value:function(e,a){return n.a.put("/api/users/update_settings/".concat(e),a)}},{key:"updatePermissions",value:function(e,a){return n.a.put("/api/users/update_permissions/".concat(e),a)}},{key:"updateProfile",value:function(e,a){return n.a.put("/api/users/update_profile/".concat(e),a)}},{key:"updateActivation",value:function(e,a){return n.a.put("/api/users/update_activation/".concat(e),a)}},{key:"export",value:function(){return n.a.get("/api/users/export/data")}}])&&o(a.prototype,t),r&&o(a,r),e}();a.a=new s},900:function(e,a,t){"use strict";t.r(a);var r=t(24),n=t(149),o={data:function(){return{formDataLoaded:!1,panel:[0,1],valid:!1,menu:!1,permissions:[],headers:[{text:"Permission",value:"name",sortable:!1}],form:{can_login:!0,is_admin:!1,old_permissions:[],permissions:[],old_role:"",role:"Standard User"},errors:{role:[],can_login:[]}}},methods:{getData:function(){var e=this;this.loadPermissions().then((function(a){e.permissions=a,e.form.permissions=[],r.a.show(e.$route.params.id).then((function(a){var t=a.data.data;e.form.is_admin=t.is_admin,e.form.can_login=t.can_login,e.form.permissions=t.permissions,e.form.old_permissions=t.permissions,e.form.role=t.role[0],e.form.old_role=t.role[0],e.formDataLoaded=!0})).catch((function(a){e.mixin_showErrors(a),e.formDataLoaded=!0,e.$router.push({name:"admin.users.index"},(function(){}))}))}))},loadPermissions:function(){var e=this;return new Promise((function(a,t){n.a.get({params:{role:e.form.role}}).then((function(e){a(e.data)})).catch((function(a){e.mixin_showErrors(a),t()}))}))},onSave:function(){var e=this,a="Administrator"==this.form.role;if(this.$refs.form.validate(),this.$refs.form.validate())return this.formDataLoaded=!1,void r.a.updatePermissions(this.$route.params.id,{is_admin:a,can_login:this.form.can_login,permissions:this.form.permissions}).then((function(a){e.mixin_successDialog(a.data.status,a.data.message),e.formDataLoaded=!0,window.location.replace("/users")})).catch((function(a){e.mixin_showErrors(a),a.response&&a.response.data&&(e.errors=a.response.data.errors),e.formDataLoaded=!0}))}},watch:{"form.role":function(){var e=this;this.loadPermissions().then((function(a){e.permissions=a,e.form.permissions=[],e.form.old_role==e.form.role&&(e.form.permissions=e.form.old_permissions)}))}},created:function(){this.getData()},activated:function(){this.getData()}},s=t(4),i=Object(s.a)(o,(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[e.formDataLoaded?t("v-card",{staticClass:"elevation-0 pt-0"},[t("v-card-title",{staticClass:"pt-0"},[t("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(a){return e.$router.go(-1)}}},[t("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),t("v-spacer"),e._v(" "),t("h4",{staticClass:"title success--text"},[e._v("Edit Permissions")])],1),e._v(" "),t("v-form",{ref:"form",model:{value:e.valid,callback:function(a){e.valid=a},expression:"valid"}},[t("v-expansion-panels",{attrs:{flat:"",multiple:""},model:{value:e.panel,callback:function(a){e.panel=a},expression:"panel"}},[t("v-expansion-panel",[t("v-expansion-panel-header",[t("div",{staticClass:"overline green--text"},[e._v("\n                            Account Details\n                        ")])]),e._v(" "),t("v-expansion-panel-content",[t("v-row",[t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-checkbox",{attrs:{label:"Allow Login","error-messages":e.errors.can_login},model:{value:e.form.can_login,callback:function(a){e.$set(e.form,"can_login",a)},expression:"form.can_login"}})],1),e._v(" "),t("v-col",{attrs:{cols:"12",md:"4"}},[t("v-radio-group",{attrs:{row:"",label:"Role"},model:{value:e.form.role,callback:function(a){e.$set(e.form,"role",a)},expression:"form.role"}},[t("v-radio",{attrs:{label:"Standard User",value:"Standard User"}}),e._v(" "),t("v-radio",{attrs:{label:"Administrator",value:"Administrator"}})],1)],1)],1),e._v(" "),t("v-row",[t("v-col",[t("v-data-table",{attrs:{"show-select":"","items-per-page":-1,headers:e.headers,items:e.permissions,"group-by":"category"},model:{value:e.form.permissions,callback:function(a){e.$set(e.form,"permissions",a)},expression:"form.permissions"}})],1)],1)],1)],1)],1),e._v(" "),t("small",{staticClass:"ml-4 text--secondary"},[e._v("\n                * indicates required field\n            ")]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"success",dark:""},on:{click:e.onSave}},[e._v("Save")]),e._v(" "),t("v-btn",{on:{click:function(a){return e.$router.go(-1)}}},[e._v("Cancel")])],1)],1)],1):t("loader-component")],1)}),[],!1,null,null,null);a.default=i.exports}}]);