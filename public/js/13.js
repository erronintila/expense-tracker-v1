(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{214:function(t,e,a){(function(t){var a;a=function(){var t=null,e={};o("monochrome",null,[[0,0],[100,0]]),o("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),o("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),o("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),o("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),o("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),o("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),o("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]);var a=[],r=function(o){if(void 0!==(o=o||{}).seed&&null!==o.seed&&o.seed===parseInt(o.seed,10))t=o.seed;else if("string"==typeof o.seed)t=function(t){for(var e=0,a=0;a!==t.length&&!(e>=Number.MAX_SAFE_INTEGER);a++)e+=t.charCodeAt(a);return e}(o.seed);else{if(void 0!==o.seed&&null!==o.seed)throw new TypeError("The seed value must be an integer or string");t=null}var c,d;if(null!==o.count&&void 0!==o.count){for(var p=o.count,v=[],h=0;h<o.count;h++)a.push(!1);for(o.count=null;p>v.length;){var f=r(o);null!==t&&(o.seed=t),v.push(f)}return o.count=p,v}return function(t,e){switch(e.format){case"hsvArray":return t;case"hslArray":return u(t);case"hsl":var a=u(t);return"hsl("+a[0]+", "+a[1]+"%, "+a[2]+"%)";case"hsla":var r=u(t),n=e.alpha||Math.random();return"hsla("+r[0]+", "+r[1]+"%, "+r[2]+"%, "+n+")";case"rgbArray":return i(t);case"rgb":return"rgb("+i(t).join(", ")+")";case"rgba":var s=i(t);return n=e.alpha||Math.random(),"rgba("+s.join(", ")+", "+n+")";default:return function(t){var e=i(t);function a(t){var e=t.toString(16);return 1==e.length?"0"+e:e}return"#"+a(e[0])+a(e[1])+a(e[2])}(t)}}([c=function(t){if(a.length>0){var r=s(d=function(t){if(isNaN(t)){if("string"==typeof t)if(e[t]){var a=e[t];if(a.hueRange)return a.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i))return n(l(t)[0]).hueRange}else{var r=parseInt(t);if(r<360&&r>0)return n(t).hueRange}return[0,360]}(t.hue)),o=(d[1]-d[0])/a.length,i=parseInt((r-d[0])/o);!0===a[i]?i=(i+2)%a.length:a[i]=!0;var u=(d[0]+i*o)%359,c=(d[0]+(i+1)*o)%359;return(r=s(d=[u,c]))<0&&(r=360+r),r}var d=function(t){if("number"==typeof parseInt(t)){var a=parseInt(t);if(a<360&&a>0)return[a,a]}if("string"==typeof t)if(e[t]){var r=e[t];if(r.hueRange)return r.hueRange}else if(t.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var n=l(t)[0];return[n,n]}return[0,360]}(t.hue);return(r=s(d))<0&&(r=360+r),r}(o),d=function(t,e){if("monochrome"===e.hue)return 0;if("random"===e.luminosity)return s([0,100]);var a=function(t){return n(t).saturationRange}(t),r=a[0],o=a[1];switch(e.luminosity){case"bright":r=55;break;case"dark":r=o-10;break;case"light":o=55}return s([r,o])}(c,o),function(t,e,a){var r=function(t,e){for(var a=n(t).lowerBounds,r=0;r<a.length-1;r++){var s=a[r][0],o=a[r][1],i=a[r+1][0],l=a[r+1][1];if(e>=s&&e<=i){var u=(l-o)/(i-s);return u*e+(o-u*s)}}return 0}(t,e),o=100;switch(a.luminosity){case"dark":o=r+20;break;case"light":r=(o+r)/2;break;case"random":r=0,o=100}return s([r,o])}(c,d,o)],o)};function n(t){for(var a in t>=334&&t<=360&&(t-=360),e){var r=e[a];if(r.hueRange&&t>=r.hueRange[0]&&t<=r.hueRange[1])return e[a]}return"Color not found"}function s(e){if(null===t){var a=Math.random();return a+=.618033988749895,a%=1,Math.floor(e[0]+a*(e[1]+1-e[0]))}var r=e[1]||1,n=e[0]||0,s=(t=(9301*t+49297)%233280)/233280;return Math.floor(n+s*(r-n))}function o(t,a,r){var n=r[0][0],s=r[r.length-1][0],o=r[r.length-1][1],i=r[0][1];e[t]={hueRange:a,lowerBounds:r,saturationRange:[n,s],brightnessRange:[o,i]}}function i(t){var e=t[0];0===e&&(e=1),360===e&&(e=359),e/=360;var a=t[1]/100,r=t[2]/100,n=Math.floor(6*e),s=6*e-n,o=r*(1-a),i=r*(1-s*a),l=r*(1-(1-s)*a),u=256,c=256,d=256;switch(n){case 0:u=r,c=l,d=o;break;case 1:u=i,c=r,d=o;break;case 2:u=o,c=r,d=l;break;case 3:u=o,c=i,d=r;break;case 4:u=l,c=o,d=r;break;case 5:u=r,c=o,d=i}return[Math.floor(255*u),Math.floor(255*c),Math.floor(255*d)]}function l(t){t=3===(t=t.replace(/^#/,"")).length?t.replace(/(.)/g,"$1$1"):t;var e=parseInt(t.substr(0,2),16)/255,a=parseInt(t.substr(2,2),16)/255,r=parseInt(t.substr(4,2),16)/255,n=Math.max(e,a,r),s=n-Math.min(e,a,r),o=n?s/n:0;switch(n){case e:return[(a-r)/s%6*60||0,o,n];case a:return[60*((r-e)/s+2)||0,o,n];case r:return[60*((e-a)/s+4)||0,o,n]}}function u(t){var e=t[0],a=t[1]/100,r=t[2]/100,n=(2-a)*r;return[e,Math.round(a*r/(n<1?n:2-n)*1e4)/100,n/2*100]}return r}(),t&&t.exports&&(e=t.exports=a),e.randomColor=a}).call(this,a(215)(t))},24:function(t,e,a){"use strict";var r=a(10),n=a.n(r);function s(t,e){for(var a=0;a<e.length;a++){var r=e[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,r;return e=t,(a=[{key:"get",value:function(t){return n.a.get("/api/data/users",t)}},{key:"getAll",value:function(t){return n.a.get("/api/users",t)}},{key:"show",value:function(t,e){return n.a.get("/api/users/".concat(t),e)}},{key:"store",value:function(t){return n.a.post("/api/users",t)}},{key:"update",value:function(t,e){return n.a.put("/api/users/".concat(t),e)}},{key:"delete",value:function(t,e){return n.a.delete("/api/users/".concat(t),e)}},{key:"restore",value:function(t,e){return n.a.put("/api/users/restore/".concat(t),e)}},{key:"updatePassword",value:function(t,e){return n.a.put("/api/users/update_password/".concat(t),e)}},{key:"resetPassword",value:function(t,e){return n.a.put("/api/users/reset_password/".concat(t),e)}},{key:"verifyEmail",value:function(t,e){return n.a.put("/api/users/verify_email/".concat(t),e)}},{key:"updateFund",value:function(t,e){return n.a.put("/api/users/update_fund/".concat(t),e)}},{key:"updateSettings",value:function(t,e){return n.a.put("/api/users/update_settings/".concat(t),e)}},{key:"updatePermissions",value:function(t,e){return n.a.put("/api/users/update_permissions/".concat(t),e)}},{key:"updateProfile",value:function(t,e){return n.a.put("/api/users/update_profile/".concat(t),e)}},{key:"updateActivation",value:function(t,e){return n.a.put("/api/users/update_activation/".concat(t),e)}},{key:"export",value:function(){return n.a.get("/api/users/export/data")}}])&&s(e.prototype,a),r&&s(e,r),t}();e.a=new o},27:function(t,e,a){"use strict";var r={name:"page-header",props:{title:""}},n=a(4),s=Object(n.a)(r,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card-title",{staticClass:"pt-0"},[a("h4",{staticClass:"title green--text"},[t._v(t._s(t.title))]),t._v(" "),a("v-spacer"),t._v(" "),t._t("actions")],2),t._v(" "),a("v-card-subtitle",[t._t("sub-actions")],2)],1)}),[],!1,null,null,null);e.a=s.exports},28:function(t,e,a){"use strict";var r=a(24);function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function s(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){o(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function o(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var i={props:{selectedUsers:{type:Array,default:function(){return[]}},multipleSelection:{type:Boolean,default:!1},selectedUser:{type:Object,default:null},usersParameters:{type:Object,default:null}},data:function(){return{dialog:!1,loading:!1,collections:{selected:null,items:[]},filters:{search:""},options:{sortBy:["first_name"],sortDesc:[!1],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:"10",to:0,total:0}}},methods:{onSearch:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},getDataFromApi:function(){var t=this;return this.loading=!0,new Promise((function(e,a){var n=t.options,o=n.sortBy,i=n.sortDesc,l=n.page,u=n.itemsPerPage,c={search:t.filters.search.trim().toLowerCase(),sortBy:o[0],sortType:i[0]?"desc":"asc",page:l,itemsPerPage:u,isSelection:!0,is_active:!0},d={};d=t.usersParameters&&t.usersParameters.params?{params:s(s({},c),t.usersParameters.params)}:{params:s({},c)},r.a.getAll(d).then((function(a){t.loading=!1,e(a.data)})).catch((function(e){t.mixin_showErrors(e),t.loading=!1,a()}))}))},onReset:function(){return this.dialog=!1,this.filters.search="",this.computedSelectedUser=null,this.options={sortBy:["last_name"],sortDesc:[!1],page:1,itemsPerPage:10},this.$emit("onReset",this.computedSelectedUser)},selectUser:function(t){this.computedSelectedUser=t,this.$emit("selectUser",t)},getJobName:function(t){return t.job?t.job.name:""},getDepartmentName:function(t){return t.job&&t.job.department?t.job.department.name:""}},watch:{"filters.search":function(){var t=this;""==this.filters.search&&this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},params:{handler:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))},deep:!0},dialog:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))}},computed:{params:function(t){return s({},this.options)},computedSelectedUser:{get:function(){return this.selectedUser?this.selectedUser:null},set:function(t){return t}}},created:function(){var t=this;this.getDataFromApi().then((function(e){t.collections.items=e.data,t.meta=e.meta}))}},l=a(4),u=Object(l.a)(i,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{attrs:{width:"500"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[t._t("openDialog",null,null,{attrs:r,on:a,computedSelectedUser:t.computedSelectedUser})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-card-title",[t._v("\n                Employees\n                "),a("v-spacer"),t._v(" "),a("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch(e)}},model:{value:t.filters.search,callback:function(e){t.$set(t.filters,"search",e)},expression:"filters.search"}})],1),t._v(" "),a("v-list",{staticClass:"overflow-y-auto",attrs:{"max-height":"400","two-line":""}},[a("v-list-item-group",{attrs:{"active-class":"green--text",multiple:t.multipleSelection},on:{change:t.selectUser},model:{value:t.computedSelectedUser,callback:function(e){t.computedSelectedUser=e},expression:"computedSelectedUser"}},[t._l(t.collections.items,(function(e,r){return[a("v-list-item",{key:r,attrs:{value:e}},[[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.name)}}),t._v(" "),a("v-list-item-subtitle",{staticClass:"text--primary",domProps:{textContent:t._s(t.getJobName(e))}}),t._v(" "),a("v-list-item-subtitle",{domProps:{textContent:t._s(t.getDepartmentName(e))}})],1)]],2)]}))],2)],1),t._v(" "),a("div",[a("v-pagination",{attrs:{length:t.meta.last_page,"total-visible":7},model:{value:t.options.page,callback:function(e){t.$set(t.options,"page",e)},expression:"options.page"}})],1),t._v(" "),a("v-divider"),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:t.onReset}},[t._v("\n                    Reset\n                ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n                    OK\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.a=u.exports},51:function(t,e,a){"use strict";var r=a(1),n=a.n(r),s={props:{dateRange:{type:Array,default:function(){return[n()().startOf("month").format("YYYY-MM-DD"),n()().endOf("month").format("YYYY-MM-DD")]}},datePreset:{type:String,default:"Custom"},datePresets:{type:Array,default:function(){return[{label:"Today",range:[n()().format("YYYY-MM-DD"),n()().format("YYYY-MM-DD")]},{label:"Yesterday",range:[n()().subtract(1,"days").format("YYYY-MM-DD"),n()().subtract(1,"days").format("YYYY-MM-DD")]},{label:"This Week",range:[n()().startOf("week").format("YYYY-MM-DD"),n()().endOf("week").format("YYYY-MM-DD")]},{label:"Last Week",range:[n()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),n()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")]},{label:"This Month",range:[n()().startOf("month").format("YYYY-MM-DD"),n()().endOf("month").format("YYYY-MM-DD")]},{label:"Last Month",range:[n()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),n()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")]},{label:"This Quarter",range:[n()().startOf("quarter").format("YYYY-MM-DD"),n()().endOf("quarter").format("YYYY-MM-DD")]},{label:"Last Quarter",range:[n()().subtract(1,"quarters").startOf("quarter").format("YYYY-MM-DD"),n()().subtract(1,"quarters").endOf("quarter").format("YYYY-MM-DD")]},{label:"This Year",range:[n()().startOf("year").format("YYYY-MM-DD"),n()().endOf("year").format("YYYY-MM-DD")]},{label:"Last Year",range:[n()().subtract(1,"years").startOf("year").format("YYYY-MM-DD"),n()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]},{label:"Last 5 Years",range:[n()().subtract(5,"years").startOf("year").format("YYYY-MM-DD"),n()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]}]}}},data:function(){return{range:[],preset:{},presets:[],dialog:!1}},methods:{onCancel:function(){this.dialog=!1,this.preset={}},onSave:function(){if(this.range&&2==this.range.length){var t=this.range.sort((function(t,e){return new Date(t)-new Date(e)}));return this.$refs.dialog.save(t),void this.$emit("on-change",t)}this.dialog=!0}},computed:{dateRangeText:function(){return this.range&&this.range.length?this.range.sort((function(t,e){return new Date(t)-new Date(e)})).join(" ~ "):""}},watch:{preset:function(){this.preset&&Object.keys(this.preset).length&&(this.range=this.preset.range)},dateRange:{immediate:!0,handler:function(t,e){this.range=t}},datePreset:{immediate:!0,handler:function(t,e){this.preset=t}},datePresets:{immediate:!0,handler:function(t,e){this.presets=t}}}},o=a(4),i=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{ref:"dialog",attrs:{"return-value":t.range,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.range=e},"update:return-value":function(e){t.range=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,r=e.attrs;return[t._t("openDialog",null,null,{on:a,attrs:r,dateRangeText:t.dateRangeText})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-container",[a("v-row",[a("v-col",[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",dark:"",text:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-calendar")]),t._v(" \n                  "+t._s(t.dateRangeText)+"\n                ")],1)]}}])},[t._v(" "),a("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"200px"}},[a("v-list-item-group",{model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}},t._l(t.presets,(function(e,r){return a("v-list-item",{key:r,attrs:{value:e}},[a("v-list-item-title",[t._v("\n                      "+t._s(e.label)+"\n                    ")])],1)})),1)],1)],1)],1),t._v(" "),t.range&&2!=t.range.length?a("div",{staticClass:"overline red--text text-capitalize"},[t._v("\n            *select 1 more\n          ")]):t._e()])],1),t._v(" "),a("v-divider")],1),t._v(" "),a("v-date-picker",{attrs:{color:"green","no-title":"",range:"",scrollable:""},on:{change:function(e){t.preset={}}},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onSave}},[t._v(" OK ")])],1)],1)],1)}),[],!1,null,null,null);e.a=i.exports},873:function(t,e,a){"use strict";a.r(e);var r=a(1),n=a.n(r),s=a(214),o=a.n(s),i=(a(50),a(27)),l=a(51);var u=a(218),c=a.n(u);function d(t,e){return{render:function(t){return t("div",{style:this.styles,class:this.cssClasses},[t("canvas",{attrs:{id:this.chartId,width:this.width,height:this.height},ref:"canvas"})])},props:{chartId:{default:t,type:String},width:{default:400,type:Number},height:{default:400,type:Number},cssClasses:{type:String,default:""},styles:{type:Object},plugins:{type:Array,default:function(){return[]}}},data:function(){return{_chart:null,_plugins:this.plugins}},methods:{addPlugin:function(t){this.$data._plugins.push(t)},generateLegend:function(){if(this.$data._chart)return this.$data._chart.generateLegend()},renderChart:function(t,a){if(this.$data._chart&&this.$data._chart.destroy(),!this.$refs.canvas)throw new Error("Please remove the <template></template> tags from your chart component. See https://vue-chartjs.org/guide/#vue-single-file-components");this.$data._chart=new c.a(this.$refs.canvas.getContext("2d"),{type:e,data:t,options:a,plugins:this.$data._plugins})}},beforeDestroy:function(){this.$data._chart&&this.$data._chart.destroy()}}}d("bar-chart","bar");var p=d("horizontalbar-chart","horizontalBar"),v=d("doughnut-chart","doughnut"),h=d("line-chart","line"),f=(d("pie-chart","pie"),d("polar-chart","polarArea"),d("radar-chart","radar"),d("bubble-chart","bubble"),d("scatter-chart","scatter"),a(98)),m=a.n(f),_={extends:v,props:{data:{type:Object,default:function(){}},options:{type:Object,default:function(){}}},watch:{data:{deep:!0,handler:function(){this.$data._chart.update()}}},mounted:function(){this.addPlugin(m.a),this.renderChart(this.data,this.options),this.$emit("updateChart")}},g=a(4),b=Object(g.a)(_,void 0,void 0,!1,null,null,null).exports,y={extends:p,props:{data:{type:Object,default:function(){}},options:{type:Object,default:function(){}}},watch:{data:{deep:!0,handler:function(){this.$data._chart.update()}}},mounted:function(){this.addPlugin(m.a),this.renderChart(this.data,this.options)}},x=Object(g.a)(y,void 0,void 0,!1,null,null,null).exports,Y={extends:h,props:{data:{type:Object,default:function(){}},options:{type:Object,default:function(){}}},watch:{data:{deep:!0,handler:function(){this.$data._chart.update()}}},mounted:function(){this.renderChart(this.data,this.options)}},C=Object(g.a)(Y,void 0,void 0,!1,null,null,null).exports,D=a(28),k={components:{DoughnutChart:b,HorizontalBarChart:x,LineChart:C,DateRangePicker:l.a,UserDialogSelector:D.a,PageHeader:i.a},data:function(){return{loader:!0,total:{awaiting_for_reimbursement_reports:0,expenses_by_date:0,pending_for_approval_reports:0,remaining_fund:0,total_fund:0,unreported_expenses:0,unsubmitted_reports:0,payment_to_receive:0},count:{awaiting_for_reimbursement_reports:0,expenses_by_date:0,pending_for_approval_reports:0,unreported_expenses:0,unsubmitted_reports:0,payment_to_receive:0},backgroundColors:["#36a2eb","#ff6384","#ff9f40","#4bc0c0","#ffcd56"],horizontalBarChartOptions:{},horizontalBarChartData:{},doughnutChartOptions:{},doughnutChartData:{},lineChartOptions:{},lineChartData:{},filter:{text:"Expenses by type",value:"expense_type"},filterItems:[{text:"Expenses by type",value:"expense_type"},{text:"Expenses per user",value:"user"},{text:"Expenses per department",value:"department"}],groupBy:"month",groupByItems:[{text:"Day",value:"day"},{text:"Week",value:"week"},{text:"Month",value:"month"},{text:"Quarter",value:"quarter"},{text:"Year",value:"year"}],date_range:[n()().startOf("year").format("YYYY-MM-DD"),n()().endOf("year").format("YYYY-MM-DD")],preset:"",presets:["Today","Yesterday","Last 7 Days","Last 30 Days","This Week","This Month","This Quarter","This Year","Last Week","Last Month","Last Quarter","Last Year","Last 5 Years"],headers:[{text:"Dessert (100g serving)",align:"start",sortable:!1,value:"name"},{text:"Calories",value:"calories"},{text:"Fat (g)",value:"fat"},{text:"Carbs (g)",value:"carbs"},{text:"Protein (g)",value:"protein"},{text:"Iron (%)",value:"iron"}],items:[],user:this.$store.getters.user.is_admin&&this.mixin_can("view all users expenses")?null:this.$store.getters.user}},methods:{selectUser:function(t){this.user=null!=t&&null!=t?t:null},resetUser:function(){this.user=null},load_department_expenses:function(t,e,a){var r=this;axios.get("/api/data/departments_expenses_summary",{params:{start_date:t,end_date:e,user_id:a,admin_page:!0}}).then((function(t){r.expenses_by_category=t.data;var e=t.data.map((function(t){return t.text})),a=t.data.map((function(t){return t.value})),n=r.getBackgroundColors(a.length),s=t.data.reduce((function(t,e){return t+e.value}),0),o=t.data.map((function(t){return t.value/s*100}));r.updatePieChartValues(e,o,n),r.updateBarChartValues(e,a,n)})).catch((function(t){r.mixin_showErrors(t)}))},load_expense_types_expenses:function(t,e,a){var r=this;axios.get("/api/data/expense_types_expenses_summary",{params:{start_date:t,end_date:e,user_id:a,admin_page:!0}}).then((function(t){r.expenses_by_category=t.data;var e=t.data.map((function(t){return t.text})),a=t.data.map((function(t){return t.value})),n=r.getBackgroundColors(a.length),s=t.data.reduce((function(t,e){return t+e.value}),0),o=t.data.map((function(t){return t.value/s*100}));r.updatePieChartValues(e,o,n),r.updateBarChartValues(e,a,n)})).catch((function(t){r.mixin_showErrors(t)}))},load_users_expenses:function(t,e,a){var r=this;axios.get("/api/data/users_expenses_summary",{params:{start_date:t,end_date:e,user_id:a,admin_page:!0}}).then((function(t){r.expenses_by_category=t.data;var e=t.data.map((function(t){return t.text})),a=t.data.map((function(t){return t.value})),n=r.getBackgroundColors(a.length),s=t.data.reduce((function(t,e){return t+e.value}),0),o=t.data.map((function(t){return t.value/s*100}));r.updatePieChartValues(e,o,n),r.updateBarChartValues(e,a,n)})).catch((function(t){r.mixin_showErrors(t)}))},load_expenses_summary:function(t,e,a,r){var s=this;axios.get("/api/data/expenses_summary",{params:{start_date:t,end_date:e,time_unit:a,user_id:r,admin_page:!0}}).then((function(t){switch(s.groupBy){case"day":s.lineChart_labels=t.data.map((function(t){return t.text}));break;case"week":s.lineChart_labels=t.data.map((function(t){return"".concat(n()(t.text).format("YYYY-MM")," W:").concat(s.getWeekInMonth(new Date(t.text)))}));break;case"month":s.lineChart_labels=t.data.map((function(t){return n()(t.text).format("MMM YYYY")}));break;case"quarter":s.lineChart_labels=t.data.map((function(t){return"".concat(n()(t.text).format("YYYY")," Q:").concat(n()(t.text).format("Q"))}));break;case"year":s.lineChart_labels=t.data.map((function(t){return n()(t.text).format("YYYY")}))}s.lineChart_data=t.data.map((function(t){return t.value})),s.updateLineChartValues(s.lineChart_labels,s.lineChart_data)})).catch((function(t){s.mixin_showErrors(t)}))},load_bar_chart:function(){this.horizontalBarChartOptions={maintainAspectRatio:!1,legend:!1,plugins:{datalabels:{display:function(t){return 0!==t.dataset.data[t.dataIndex]},borderWidth:2,borderColor:"white",borderRadius:20,font:{weight:"bold"},backgroundColor:"lightgray"}}},this.horizontalBarChartData={labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]}},load_pie_chart:function(){var t=this;this.doughnutChartOptions={hoverBorderWidth:20,legend:!1,plugins:{datalabels:{display:function(t){return 0!==t.dataset.data[t.dataIndex]},borderWidth:2,borderColor:"white",borderRadius:20,font:{weight:"bold"},backgroundColor:"lightgray",formatter:function(e,a){return t.mixin_formatNumber(e)+" %"}}}},this.doughnutChartData={labels:[],datasets:[{label:"",backgroundColor:[],data:[]}]}},load_line_chart:function(){var t={fontColor:"#495057",fontStyle:"bold",maxRotation:0,minRotation:0};this.lineChartOptions={maintainAspectRatio:!1,tooltips:{mode:"index",intersect:!1,position:"nearest"},hover:{mode:"index",intersect:!0},legend:{display:!1},scales:{yAxes:[{ticks:$.extend({beginAtZero:!0,suggestedMax:200},t)}],xAxes:[{display:!0,gridLines:{display:!1},ticks:t}]}},this.lineChartData={labels:[],datasets:[{label:"",type:"line",data:[],backgroundColor:"#dbffe5",borderColor:"#4caf50",pointBorderColor:"#4caf50",pointBackgroundColor:"#4caf50",fill:!1,lineTension:0}]}},getWeekInMonth:function(t){var e=t.getDate()+t.getDay();return parseInt(["0","1","2","3","4","5"][0|e/7])+1},getBackgroundColors:function(t){for(var e=[],a=0;a<t;a++)e.push(o()({luminosity:"light",hue:"random"}));return e},updateBarChartValues:function(t,e,a){this.horizontalBarChartData.labels=t,this.horizontalBarChartData.datasets=[{label:"",backgroundColor:a,data:e}]},updatePieChartValues:function(t,e,a){this.doughnutChartData.labels=t,this.doughnutChartData.datasets=[{label:"",backgroundColor:a,data:e}]},updateLineChartValues:function(t,e){this.lineChartData.labels=t,this.lineChartData.datasets=[{backgroundColor:"#dbffe5",borderColor:"#4caf50",pointBorderColor:"#4caf50",pointBackgroundColor:"#4caf50",fill:!1,lineTension:0,data:e}]},onDateChange:function(t,e){this.expenses_by_category=[],this.start_date=t,this.end_date=e,this.onCategoryChange(),this.load_expense_reports(this.start_date.format("YYYY-MM-DD"),this.end_date.format("YYYY-MM-DD")),this.onTimeUnitChange()},onCategoryChange:function(){var t=this.date_range[0],e=this.date_range[1];switch(this.filter){case"expense_type":this.load_expense_types_expenses(t,e,this.user?this.user.id:null);break;case"department":this.load_department_expenses(t,e,this.user?this.user.id:null);break;case"user":this.load_users_expenses(t,e,this.user?this.user.id:null);break;default:this.load_expense_types_expenses(t,e,this.user?this.user.id:null)}},onTimeUnitChange:function(){this.load_expenses_summary(this.date_range[0],this.date_range[1],this.groupBy,this.user?this.user.id:null)},updateDates:function(t){this.date_range=t,this.expenses_by_category=[],this.onTimeUnitChange(),this.getExpenseStats(this.date_range[0],this.date_range[1],this.user?this.user.id:null)},getExpenseStats:function(t,e,a){var r=this;axios.get("/api/data/expense_stats?start_date=".concat(t,"&end_date=").concat(e,"&user_id=").concat(a)).then((function(t){r.total=t.data.total,r.count=t.data.count,r.load_expense_types_expenses(r.date_range[0],r.date_range[1],r.user?r.user.id:null),r.load_expenses_summary(r.date_range[0],r.date_range[1],r.groupBy,r.user?r.user.id:null),r.loader=!1})).catch((function(t){r.mixin_showErrors(t),r.loader=!1}))}},computed:{formattedDateRange:function(){var t=n()(this.date_range[0]).format("MMM DD, YYYY"),e=n()(this.date_range[1]).format("MMM DD, YYYY");return JSON.stringify(t)==JSON.stringify(e)||null==JSON.stringify(e)?t:"".concat(t," ~ ").concat(e)}},watch:{user:function(){this.onTimeUnitChange(),this.getExpenseStats(this.date_range[0],this.date_range[1],this.user?this.user.id:null)}},created:function(){this.$store.dispatch("AUTH_USER").then((function(t){})),this.load_pie_chart(),this.load_bar_chart(),this.load_line_chart(),this.getExpenseStats(this.date_range[0],this.date_range[1],this.user?this.user.id:null)}},w=Object(g.a)(k,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loader?a("loader-component"):a("v-card",{staticClass:"elevation-0 pt-0"},[a("page-header",{attrs:{title:"Dashboard"},scopedSlots:t._u([{key:"actions",fn:function(){return[t.$store.getters.user.is_admin&&t.mixin_can("view all users expenses")?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":"",left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!1,3221905750)},[t._v(" "),a("v-card",[a("v-list",[a("v-list-item",[a("v-text-field",{attrs:{value:t.user?t.user.full_name:"All Employees",label:"Employee",readonly:""},scopedSlots:t._u([{key:"append",fn:function(){return[a("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:t.user,usersParameters:{params:{is_superadmin:!1}}},on:{selectUser:t.selectUser,onReset:t.resetUser},scopedSlots:t._u([{key:"openDialog",fn:function(e){var r=e.bind,n=e.on;return[a("v-btn",t._g(t._b({attrs:{fab:"",color:"primary",text:"","x-small":""}},"v-btn",r,!1),n),[a("v-icon",{attrs:{dark:""}},[t._v("mdi-magnify")])],1)]}}],null,!1,3991605135)})]},proxy:!0}],null,!1,861015849)})],1)],1)],1)],1):t._e()]},proxy:!0},{key:"sub-actions",fn:function(){return[a("DateRangePicker",{ref:"dateRangePicker",attrs:{dateRange:t.date_range},on:{"on-change":t.updateDates},scopedSlots:t._u([{key:"openDialog",fn:function(e){var r=e.on,n=e.attrs,s=e.dateRangeText;return[a("v-btn",t._g(t._b({staticClass:"ml-0 pl-0",attrs:{text:""}},"v-btn",n,!1),r),[t._v("\n                            "+t._s(s)+"\n                        ")])]}}])}),t._v(" "),t.$store.getters.user.is_admin&&null!=t.user&&t.user.id>0&&t.mixin_can("view all users expenses")?a("v-chip",{attrs:{small:""}},[t._v(t._s(t.user.full_name))]):t._e()]},proxy:!0}])}),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{elevation:r?5:2,to:{name:"user.expenses.index"}}},[a("v-card-text",[a("div",{staticClass:"green--text"},[t._v("\n                                Total Expenses\n                            ")]),t._v(" "),a("div",{staticClass:"display-1 text--primary"},[t._v("\n                                "+t._s(t.mixin_formatNumber(t.total.expenses_by_date))+"\n                            ")]),t._v(" "),a("div",[t._v("\n                                "+t._s(t.count.expenses_by_date)+"\n                                Expenses\n                            ")])])],1)]}}])})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{elevation:r?5:2}},[a("v-card-text",[a("div",[t._v("\n                                Remaining Fund\n                            ")]),t._v(" "),a("v-btn",{staticClass:"ml-0 pl-0",attrs:{text:"",to:t.$store.getters.user.is_admin?{name:"admin.users.index"}:""}},[a("span",[a("div",{class:parseFloat(t.total.remaining_fund)<=.1*parseFloat(t.total.total_fund)?"display-1 red--text":"display-1 text--primary"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.total.remaining_fund))+"\n                                    ")])])]),t._v(" "),a("div",[t._v("\n                                "+t._s("Total Revolving Fund: "+t.total.total_fund)+"\n                            ")])],1)],1)]}}])})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{elevation:r?5:2}},[a("v-card-text",[a("div",[t._v("\n                                Unreported Expenses\n                            ")]),t._v(" "),a("v-btn",{staticClass:"ml-0 pl-0",attrs:{text:"",to:{name:"user.expenses.index",params:{status:"Unreported Expenses",date_range:["0000-01-01",t.moment().format("YYYY-MM-DD")]}}}},[a("span",[a("div",{staticClass:"display-1 text--primary"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.total.unreported_expenses))+"\n                                    ")])])]),t._v(" "),a("div",[t._v("\n                                "+t._s("Total Unreported: "+t.count.unreported_expenses)+"\n                            ")])],1)],1)]}}])})],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",staticStyle:{position:"relative"},attrs:{elevation:r?5:2,height:"100%"}},[a("v-card-text",[a("div",[t._v("\n                                Expense Reports Summary\n                                "),a("v-menu",{attrs:{"offset-y":"","open-on-hover":""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{"x-small":"",icon:"",color:"green"}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-information-outline")])],1)]}}],null,!0)},[t._v(" "),a("v-card",[a("v-card-text",[a("div",[t._v("\n                                                Unsubmitted: Created reports\n                                                that are not yet submitted\n                                            ")]),t._v(" "),a("div",[t._v("\n                                                Pending for Approval:\n                                                Submitted reports waiting\n                                                for approval\n                                            ")]),t._v(" "),a("div",[t._v("\n                                                Awaiting Reimbursement:\n                                                Approved reports waiting for\n                                                payment\n                                            ")]),t._v(" "),a("div",[t._v("\n                                                Payment to Receive:\n                                                Reimbursed expenses waiting\n                                                to be received by the user\n                                            ")])])],1)],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12",md:"3",align:"center",justify:"center"}},[a("v-btn",{staticClass:"mt-4 mb-4",attrs:{text:"",to:{name:"user.expense_reports.index",params:{status:"Unsubmitted Expense Reports",date_range:["0000-01-01",t.moment().format("YYYY-MM-DD")]}}}},[a("span",[a("div",{staticClass:"orange--text text-capitalize"},[t._v("\n                                                Unsubmitted\n                                            ")]),t._v(" "),a("div",{staticClass:"display-1 text--primary"},[t._v("\n                                                "+t._s(t.mixin_formatNumber(t.total.unsubmitted_reports))+"\n                                            ")]),t._v(" "),a("div",{staticClass:" text-capitalize"},[t._v("\n                                                "+t._s(t.count.unsubmitted_reports)+"\n                                                Reports\n                                            ")])])])],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"3",align:"center",justify:"center"}},[a("v-btn",{staticClass:"mt-4 mb-4",attrs:{text:"",to:{name:"user.expense_reports.index",params:{status:"Submitted Expense Reports",date_range:["0000-01-01",t.moment().format("YYYY-MM-DD")]}}}},[a("div",[a("div",{class:parseFloat(t.total.pending_for_approval_reports)>0?"red--text text-capitalize":"text-capitalize"},[t._v("\n                                                Pending for Approval\n                                            ")]),t._v(" "),a("div",{class:parseFloat(t.total.pending_for_approval_reports)>0?"display-1 red--text":"display-1 text--primary"},[t._v("\n                                                "+t._s(t.mixin_formatNumber(t.total.pending_for_approval_reports))+"\n                                            ")]),t._v(" "),a("div",{staticClass:" text-capitalize"},[t._v("\n                                                "+t._s(t.count.pending_for_approval_reports)+"\n                                                Reports\n                                            ")])])])],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"3",align:"center",justify:"center"}},[a("v-btn",{staticClass:"mt-4 mb-4",attrs:{text:"",to:{name:"user.expense_reports.index",params:{status:"Approved Expense Reports",date_range:["0000-01-01",t.moment().format("YYYY-MM-DD")]}}}},[a("div",[a("div",{staticClass:"green--text text-capitalize"},[t._v("\n                                                Awaiting Reimbursement\n                                            ")]),t._v(" "),a("div",{staticClass:"display-1 text--primary"},[t._v("\n                                                "+t._s(t.mixin_formatNumber(t.total.awaiting_for_reimbursement_reports))+"\n                                            ")]),t._v(" "),a("div",{staticClass:" text-capitalize"},[t._v("\n                                                "+t._s(t.count.awaiting_for_reimbursement_reports)+"\n                                                Reports\n                                            ")])])])],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"3",align:"center",justify:"center"}},[a("v-btn",{staticClass:"mt-4 mb-4",attrs:{text:"",to:{name:"user.payments.index",params:{status:"Released Payments",date_range:["0000-01-01",t.moment().format("YYYY-MM-DD")]}}}},[a("div",[a("div",{staticClass:"orange--text text-capitalize"},[t._v("\n                                                Payment to Receive\n                                            ")]),t._v(" "),a("div",{staticClass:"display-1 text--primary"},[t._v("\n                                                "+t._s(t.mixin_formatNumber(t.total.payment_to_receive))+"\n                                            ")]),t._v(" "),a("div",{staticClass:" text-capitalize"},[t._v("\n                                                "+t._s(t.count.payment_to_receive)+"\n                                                Reports\n                                            ")])])])],1)],1)],1)],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"mt-4"},[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{elevation:r?5:2}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",{staticClass:"green--text"},[t._v("\n                            Expenses by category\n                        ")]),t._v(" "),a("v-spacer"),t._v(" "),t.$store.getters.user.is_admin&&t.mixin_can("view all users expenses")?a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":"",left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),a("v-card",[a("v-list",[a("v-list-item",[a("v-select",{attrs:{label:"Filter",items:t.filterItems,"item-text":"text","item-value":"value"},on:{change:t.onCategoryChange},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})],1)],1)],1)],1):t._e()],1),t._v(" "),a("v-row",{staticClass:"ml-4 mb-4"},[a("v-col",{staticClass:"mt-5",attrs:{md:"4"}},[a("DoughnutChart",{attrs:{data:t.doughnutChartData,options:t.doughnutChartOptions}})],1),t._v(" "),a("v-col",{attrs:{cols:"12",md:"8"}},[a("v-card",{staticClass:"overflow-y-auto",attrs:{flat:"","max-height":"500"}},[a("v-card-text",[a("HorizontalBarChart",{attrs:{data:t.horizontalBarChartData,options:t.horizontalBarChartOptions}})],1)],1)],1)],1)],1)]}}])})],1),t._v(" "),a("div",[a("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var r=e.hover;return[a("v-card",{staticClass:"mx-auto",attrs:{elevation:r?5:2}},[a("v-toolbar",{attrs:{flat:"",dense:""}},[a("v-toolbar-title",{staticClass:"green--text"},[t._v("\n                            Expenses by date\n                        ")]),t._v(" "),a("v-spacer"),t._v(" "),a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":"",left:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,n=e.attrs;return[a("v-btn",t._g(t._b({attrs:{icon:""}},"v-btn",n,!1),r),[a("v-icon",[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[t._v(" "),a("v-card",[a("v-list",[a("v-list-item",[a("v-select",{attrs:{label:"Group by",items:t.groupByItems,"item-text":"text","item-value":"value"},on:{change:t.onTimeUnitChange},model:{value:t.groupBy,callback:function(e){t.groupBy=e},expression:"groupBy"}})],1)],1)],1)],1)],1),t._v(" "),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("LineChart",{attrs:{data:t.lineChartData,options:t.lineChartOptions}})],1)],1)],1)]}}])})],1)],1)],1)}),[],!1,null,null,null);e.default=w.exports}}]);