(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{155:function(e,t,n){"use strict";var i={props:{expenseTypeId:{default:null},isEdit:{type:Boolean,default:!1},expenseTypeForm:{type:Object,default:function(){return{name:"",limit:null,sub_types:[]}}},errors:{type:Object,default:function(){return{name:[],limit:[],sub_type:[]}}}},data:function(){return{valid:!1,dialog:!1,subtype:"",subtype_limit:null,hasSubtype:!1,deleted_sub_types:{headers:[{text:"Name",value:"name",sortable:!1},{text:"Action",value:"actions",sortable:!1}],items:[]},headers:[{text:"Name",value:"name"},{text:"Limit",value:"limit"},{text:"",value:"actions",sortable:!1}],form:{id:null,name:"",limit:null,sub_types:[]}}},methods:{onSave:function(){this.$refs.form.validate()&&this.$emit("on-save",this.form)},addItem:function(){0!=this.subtype.length&&""!=this.subtype&&(this.form.sub_types.push({id:null,name:this.subtype,limit:this.subtype_limit}),this.subtype="",this.subtype_limit=null,this.dialog=!1)},removeItem:function(e){var t=this;if(e.id&&e.id>0){var n=e;this.$confirm("Do you want to delete default subtype?").then((function(i){i&&axios.delete("/api/expense_types/".concat(n.id)).then((function(n){t.loadDeletedSubTypes(t.expenseTypeId);var i=t.form.sub_types.indexOf(e);t.form.sub_types.splice(i,1)})).catch((function(e){t.mixin_showErrors(e)}))}))}else{var i=this.form.sub_types.indexOf(e);this.form.sub_types.splice(i,1)}},onRestoreSubtype:function(e){var t=this;axios.put("/api/expense_types/restore/".concat(e.id)).then((function(n){t.form.sub_types.push({id:e.id,name:e.name,limit:e.limit}),t.loadDeletedSubTypes(t.expenseTypeId)})).catch((function(e){t.mixin_showErrors(e)}))},loadSubTypes:function(e){var t=this;axios.get("/api/expense_types?expense_type_id=".concat(e),{params:{itemsPerPage:"false"}}).then((function(e){})).catch((function(e){t.mixin_showErrors(e)}))},loadDeletedSubTypes:function(e){var t=this;axios.get("/api/expense_types?expense_type_id=".concat(e),{params:{status:"Archived",itemsPerPage:"false"}}).then((function(e){t.deleted_sub_types.items=e.data.data})).catch((function(e){t.mixin_showErrors(e)}))}},watch:{expenseTypeForm:{immediate:!0,deep:!0,handler:function(e,t){this.form=e}}},mounted:function(){this.isEdit&&(this.loadDeletedSubTypes(this.expenseTypeId),this.loadSubTypes(this.expenseTypeId))}},a=n(4),s=Object(a.a)(i,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-row",[n("v-col",{attrs:{cols:"12",md:"8"}},[n("v-text-field",{attrs:{rules:e.mixin_validation.required.concat(e.mixin_validation.minLength(100)),counter:100,"error-messages":e.errors.name,label:"Name",required:""},on:{input:function(){e.errors.name=[]}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:[],"error-messages":e.errors.limit,label:"Default Amount Limit",required:"",type:"number"},on:{input:function(){e.errors.limit=[]}},model:{value:e.form.limit,callback:function(t){e.$set(e.form,"limit",t)},expression:"form.limit"}})],1)],1),e._v(" "),n("v-row",[n("v-col",[n("div",{staticClass:"overline"},[e._v("\n                Sub Types\n                "),n("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{small:""}},"v-btn",a,!1),i),[e._v("\n                            Add New\n                        ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),n("v-card",[n("v-card-text",[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Name"},model:{value:e.subtype,callback:function(t){e.subtype=t},expression:"subtype"}})],1),e._v(" "),n("v-col",{attrs:{cols:"12"}},[n("v-text-field",{attrs:{label:"Limit",type:"number"},model:{value:e.subtype_limit,callback:function(t){e.subtype_limit=t},expression:"subtype_limit"}})],1)],1)],1),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){e.dialog=!1}}},[e._v("\n                                Cancel\n                            ")]),e._v(" "),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.addItem}},[e._v("\n                                Add\n                            ")])],1)],1)],1)],1),e._v(" "),n("v-data-table",{attrs:{headers:e.headers,items:e.form.sub_types},scopedSlots:e._u([{key:"item.name",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.name},on:{"update:returnValue":function(n){return e.$set(t.item,"name",n)},"update:return-value":function(n){return e.$set(t.item,"name",n)}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[],label:"Edit","single-line":"",counter:""},model:{value:t.item.name,callback:function(n){e.$set(t.item,"name",n)},expression:"props.item.name"}})]},proxy:!0}],null,!0)},[e._v("\n                        "+e._s(t.item.name)+"\n                        ")])]}},{key:"item.limit",fn:function(t){return[n("v-edit-dialog",{attrs:{"return-value":t.item.limit},on:{"update:returnValue":function(n){return e.$set(t.item,"limit",n)},"update:return-value":function(n){return e.$set(t.item,"limit",n)}},scopedSlots:e._u([{key:"input",fn:function(){return[n("v-text-field",{attrs:{rules:[],label:"Edit","single-line":"",type:"number"},model:{value:t.item.limit,callback:function(n){e.$set(t.item,"limit",n)},expression:"props.item.limit"}})]},proxy:!0}],null,!0)},[e._v("\n                        "+e._s(t.item.limit)+"\n                        ")])]}},{key:"item.actions",fn:function(t){var i=t.item;return[n("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(){e.removeItem(i)}}},[e._v("\n                        mdi-delete\n                    ")])]}}],null,!0)})],1)],1),e._v(" "),n("v-row",[n("v-col",{staticClass:"text-right"},[n("v-btn",{attrs:{color:"green",dark:""},on:{click:e.onSave}},[e._v("Save")]),e._v(" "),n("v-btn",{on:{click:function(t){return e.$router.go(-1)}}},[e._v("Cancel")])],1)],1),e._v(" "),e.isEdit?n("v-divider"):e._e(),e._v(" "),e.isEdit?n("v-row",[n("v-col",[n("v-expansion-panels",{attrs:{flat:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("\n                        Deleted subtypes:\n                    ")]),e._v(" "),n("v-expansion-panel-content",[n("v-data-table",{attrs:{headers:e.deleted_sub_types.headers,items:e.deleted_sub_types.items},scopedSlots:e._u([{key:"item.actions",fn:function(t){var i=t.item;return[n("v-btn",{staticClass:"text-capitalize",attrs:{rounded:"",color:"green",dark:"",small:""},on:{click:function(t){return e.onRestoreSubtype(i)}}},[e._v("\n                                    Restore\n                                ")])]}}],null,!0)})],1)],1)],1)],1)],1):e._e()],1)}),[],!1,null,null,null);t.a=s.exports},52:function(e,t,n){"use strict";var i=n(10),a=n.n(i);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,i;return t=e,(n=[{key:"getAll",value:function(e){return a.a.get("/api/expense_types",e)}},{key:"get",value:function(e){return a.a.get("/api/data/expense_types",e)}},{key:"show",value:function(e,t){return a.a.get("/api/expense_types/".concat(e),t)}},{key:"store",value:function(e){return a.a.post("/api/expense_types",e)}},{key:"update",value:function(e,t){return a.a.put("/api/expense_types/".concat(e),t)}},{key:"delete",value:function(e,t){return a.a.delete("/api/expense_types/".concat(e),t)}},{key:"restore",value:function(e,t){return a.a.put("/api/expense_types/restore/".concat(e),t)}}])&&s(t.prototype,n),i&&s(t,i),e}();t.a=new r},903:function(e,t,n){"use strict";n.r(t);var i=n(52),a={components:{Form:n(155).a},data:function(){return{formDataLoaded:!0,errors:{name:[],limit:[]}}},methods:{onSave:function(e){var t=this;i.a.store(e).then((function(e){t.mixin_successDialog(e.data.status,e.data.message),t.$router.push({name:"admin.expense_types.index"})})).catch((function(e){t.mixin_showErrors(e),e.response&&e.response.data&&(t.errors=e.response.data.errors)}))}}},s=n(4),r=Object(s.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.formDataLoaded?n("v-card",{staticClass:"elevation-0 pt-0"},[n("v-card-title",{staticClass:"pt-0"},[n("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(t){return e.$router.go(-1)}}},[n("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),n("v-spacer"),e._v(" "),n("h4",{staticClass:"title green--text"},[e._v("New Expense Type")])],1),e._v(" "),n("v-container",[n("Form",{attrs:{errors:e.errors},on:{"on-save":e.onSave}})],1)],1):n("loader-component")],1)}),[],!1,null,null,null);t.default=r.exports}}]);