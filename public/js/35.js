(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{27:function(t,e,a){"use strict";var n={name:"page-header",props:{title:""}},r=a(4),s=Object(r.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-card-title",{staticClass:"pt-0"},[a("h4",{staticClass:"title green--text"},[t._v(t._s(t.title))]),t._v(" "),a("v-spacer"),t._v(" "),t._t("actions")],2),t._v(" "),a("v-card-subtitle",[t._t("sub-actions")],2)],1)}),[],!1,null,null,null);e.a=s.exports},51:function(t,e,a){"use strict";var n=a(1),r=a.n(n),s={props:{dateRange:{type:Array,default:function(){return[r()().startOf("month").format("YYYY-MM-DD"),r()().endOf("month").format("YYYY-MM-DD")]}},datePreset:{type:String,default:"Custom"},datePresets:{type:Array,default:function(){return[{label:"Today",range:[r()().format("YYYY-MM-DD"),r()().format("YYYY-MM-DD")]},{label:"Yesterday",range:[r()().subtract(1,"days").format("YYYY-MM-DD"),r()().subtract(1,"days").format("YYYY-MM-DD")]},{label:"This Week",range:[r()().startOf("week").format("YYYY-MM-DD"),r()().endOf("week").format("YYYY-MM-DD")]},{label:"Last Week",range:[r()().subtract(1,"weeks").startOf("week").format("YYYY-MM-DD"),r()().subtract(1,"weeks").endOf("week").format("YYYY-MM-DD")]},{label:"This Month",range:[r()().startOf("month").format("YYYY-MM-DD"),r()().endOf("month").format("YYYY-MM-DD")]},{label:"Last Month",range:[r()().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r()().subtract(1,"months").endOf("month").format("YYYY-MM-DD")]},{label:"This Quarter",range:[r()().startOf("quarter").format("YYYY-MM-DD"),r()().endOf("quarter").format("YYYY-MM-DD")]},{label:"Last Quarter",range:[r()().subtract(1,"quarters").startOf("quarter").format("YYYY-MM-DD"),r()().subtract(1,"quarters").endOf("quarter").format("YYYY-MM-DD")]},{label:"This Year",range:[r()().startOf("year").format("YYYY-MM-DD"),r()().endOf("year").format("YYYY-MM-DD")]},{label:"Last Year",range:[r()().subtract(1,"years").startOf("year").format("YYYY-MM-DD"),r()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]},{label:"Last 5 Years",range:[r()().subtract(5,"years").startOf("year").format("YYYY-MM-DD"),r()().subtract(1,"years").endOf("year").format("YYYY-MM-DD")]}]}}},data:function(){return{range:[],preset:{},presets:[],dialog:!1}},methods:{onCancel:function(){this.dialog=!1,this.preset={}},onSave:function(){if(this.range&&2==this.range.length){var t=this.range.sort((function(t,e){return new Date(t)-new Date(e)}));return this.$refs.dialog.save(t),void this.$emit("on-change",t)}this.dialog=!0}},computed:{dateRangeText:function(){return this.range&&this.range.length?this.range.sort((function(t,e){return new Date(t)-new Date(e)})).join(" ~ "):""}},watch:{preset:function(){this.preset&&Object.keys(this.preset).length&&(this.range=this.preset.range)},dateRange:{immediate:!0,handler:function(t,e){this.range=t}},datePreset:{immediate:!0,handler:function(t,e){this.preset=t}},datePresets:{immediate:!0,handler:function(t,e){this.presets=t}}}},o=a(4),i=Object(o.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{ref:"dialog",attrs:{"return-value":t.range,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.range=e},"update:return-value":function(e){t.range=e}},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[t._t("openDialog",null,null,{on:a,attrs:n,dateRangeText:t.dateRangeText})]}}],null,!0),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t._v(" "),a("v-card",[a("v-container",[a("v-row",[a("v-col",[a("div",{staticClass:"text-center"},[a("v-menu",{attrs:{"offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-btn",t._g(t._b({attrs:{color:"primary",dark:"",text:""}},"v-btn",r,!1),n),[a("v-icon",[t._v("mdi-calendar")]),t._v("Â \n                  "+t._s(t.dateRangeText)+"\n                ")],1)]}}])},[t._v(" "),a("v-list",{staticClass:"overflow-y-auto",staticStyle:{"max-height":"200px"}},[a("v-list-item-group",{model:{value:t.preset,callback:function(e){t.preset=e},expression:"preset"}},t._l(t.presets,(function(e,n){return a("v-list-item",{key:n,attrs:{value:e}},[a("v-list-item-title",[t._v("\n                      "+t._s(e.label)+"\n                    ")])],1)})),1)],1)],1)],1),t._v(" "),t.range&&2!=t.range.length?a("div",{staticClass:"overline red--text text-capitalize"},[t._v("\n            *select 1 more\n          ")]):t._e()])],1),t._v(" "),a("v-divider")],1),t._v(" "),a("v-date-picker",{attrs:{color:"green","no-title":"",range:"",scrollable:""},on:{change:function(e){t.preset={}}},model:{value:t.range,callback:function(e){t.range=e},expression:"range"}},[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onCancel}},[t._v(" Cancel ")]),t._v(" "),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:t.onSave}},[t._v(" OK ")])],1)],1)],1)}),[],!1,null,null,null);e.a=i.exports},875:function(t,e,a){"use strict";a.r(e);var n=a(1),r=a.n(n),s=(a(50),a(27)),o=a(51),i=a(10),l=a.n(i);function c(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,a,n;return e=t,(a=[{key:"getAll",value:function(t){return l.a.get("/api/notifications",t)}},{key:"update",value:function(t,e){return l.a.put("/api/notifications/".concat(t),e)}}])&&c(e.prototype,a),n&&c(e,n),t}());function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function m(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){f(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function f(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var v={components:{DateRangePicker:o.a,PageHeader:s.a},data:function(){return{formDataLoaded:!1,loading:!0,headers:[{text:"Date",value:"created_at"},{text:"Employee",value:"data.data.user.full_name"},{text:"Description",value:"data.data.description"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1},{text:"",value:"data-table-expand"}],totalAmount:0,items:[],status:"All Unread",statuses:["All Unread","All Read","All Notifications"],selected:[],search:"",options:{sortBy:["updated_at"],sortDesc:[!0],page:1,itemsPerPage:10},meta:{current_page:0,from:0,last_page:0,path:"",per_page:10,to:0,total:0},date_range:[r()().startOf("month").format("YYYY-MM-DD"),r()().endOf("month").format("YYYY-MM-DD")],preset:"",presets:["Today","Yesterday","Last 7 Days","Last 30 Days","This Week","This Month","This Quarter","This Year","Last Week","Last Month","Last Quarter","Last Year","Last 5 Years"]}},methods:{updateDates:function(t){this.date_range=t},getDataFromApi:function(){var t=this;return this.loading=!0,new Promise((function(e,a){var n=t.options,r=n.sortBy,s=n.sortDesc,o=n.page,i=n.itemsPerPage,l=t.search.trim().toLowerCase(),c=t.status,d=t.date_range,m={params:{search:l,sortBy:r[0],sortType:s[0]?"desc":"asc",page:o,itemsPerPage:i,status:c,start_date:d[0],end_date:d[1]?d[1]:d[0]}};u.getAll(m).then((function(a){t.loading=!1,t.formDataLoaded=!0,e(a.data)})).catch((function(e){t.mixin_showErrors(e),t.loading=!1,t.formDataLoaded=!0,a()}))}))},onRefresh:function(){Object.assign(this.$data,this.$options.data.apply(this)),this.selected=[]},onShow:function(t){this.$router.push({name:"user.payments.show",params:{id:t.id}})},onReadUpdate:function(t,e,a){var n=this,r={},s=t||this.selected.map((function(t){return t.id}))[0];switch(a){case"all":if(this.items.length<=0)return void this.mixin_errorDialog("Error","No data to be updated.");r={action:e,type:a};break;case"multiple":if(this.selected.length<=0)return void this.mixin_errorDialog("Error","No data selected.");r={action:e,type:a,ids:this.selected.map((function(t){return t.id}))};break;default:r={action:e,type:a}}u.update(s,r).then((function(t){n.getDataFromApi().then((function(t){n.items=t.data,n.meta=t.meta})),n.$store.dispatch("AUTH_NOTIFICATIONS")})).catch((function(t){n.mixin_showErrors(t)})).finally(this.selected=[])}},computed:{params:function(t){var e;return m(m({},this.options),{},(f(e={query:this.search},"query",this.status),f(e,"query",this.date_range),e))},formattedDateRange:function(){var t=r()(this.date_range[0]).format("MMM DD, YYYY"),e=r()(this.date_range[1]).format("MMM DD, YYYY");return JSON.stringify(t)==JSON.stringify(e)||null==JSON.stringify(e)?t:"".concat(t," ~ ").concat(e)}},watch:{params:{immediate:!0,deep:!0,handler:function(){var t=this;this.getDataFromApi().then((function(e){t.items=e.data,t.meta=e.meta}))}},items:function(){this.totalAmount=this.mixin_formatNumber(this.items.reduce((function(t,e){return t+e.amount}),0))}},activated:function(){var t=this;this.$store.dispatch("AUTH_NOTIFICATIONS"),this.getDataFromApi().then((function(e){t.items=e.data,t.meta=e.meta}))}},p=a(4),h=Object(p.a)(v,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.formDataLoaded?a("v-card",{staticClass:"elevation-0 pt-0"},[a("page-header",{attrs:{title:"Notifications"},scopedSlots:t._u([{key:"sub-actions",fn:function(){return[a("DateRangePicker",{ref:"dateRangePicker",attrs:{dateRange:t.date_range},on:{"on-change":t.updateDates},scopedSlots:t._u([{key:"openDialog",fn:function(e){var n=e.on,r=e.attrs,s=e.dateRangeText;return[a("v-btn",t._g(t._b({staticClass:"ml-0 pl-0",attrs:{text:""}},"v-btn",r,!1),n),[t._v("\n                            "+t._s(s)+"\n                        ")])]}}])})]},proxy:!0}])}),t._v(" "),a("v-row",{staticClass:"ml-2"},[a("v-col",[a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.selected.length>0,expression:"selected.length > 0"}],staticClass:"mr-2 mb-2",attrs:{color:"green",dark:"",close:"",small:"","close-icon":"mdi-close"},on:{"click:close":function(e){t.selected=[]}}},[t._v("\n                    "+t._s(t.selected.length)+" Selected\n                ")]),t._v(" "),a("v-menu",{attrs:{transition:"scale-transition","close-on-content-click":!1,"nudge-width":200,"offset-y":"",right:"",bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var n=e.on,r=e.attrs;return[a("v-chip",t._g(t._b({staticClass:"mr-2 mb-2",attrs:{small:""}},"v-chip",r,!1),n),[t._v("\n                            "+t._s(t.status?t.status:"")+"\n                        ")])]}}])},[t._v(" "),a("v-card",[a("v-list",[a("v-list-item",[a("v-select",{attrs:{items:t.statuses,label:"Status"},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}})],1)],1)],1)],1),t._v(" "),a("v-chip",{staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-refresh"},on:{"click:close":t.onRefresh}},[t._v("\n                    Refresh\n                ")]),t._v(" "),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.items.filter((function(t){return null==t.read_at})).length>0&&0==t.selected.length,expression:"\n                        items.filter(item => item.read_at == null).length >\n                            0 && selected.length == 0\n                    "}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-check",color:"green",dark:""},on:{"click:close":function(e){return t.onReadUpdate(null,"read","all")}}},[t._v("\n                    Mark all as read\n                ")]),t._v(" "),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.selected.filter((function(t){return null==t.read_at})).length>0,expression:"\n                        selected.filter(item => item.read_at == null)\n                            .length > 0\n                    "}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-check",color:"green",dark:""},on:{"click:close":function(e){return t.onReadUpdate(null,"read","multiple")}}},[t._v("\n                    Mark as read\n                ")]),t._v(" "),a("v-chip",{directives:[{name:"show",rawName:"v-show",value:t.selected.filter((function(t){return null!=t.read_at})).length>0,expression:"\n                        selected.filter(item => item.read_at != null)\n                            .length > 0\n                    "}],staticClass:"mr-2 mb-2",attrs:{close:"",small:"","close-icon":"mdi-check",color:"red",dark:""},on:{"click:close":function(e){return t.onReadUpdate(null,"unread","multiple")}}},[t._v("\n                    Mark as unread\n                ")])],1)],1),t._v(" "),a("v-card-text",[a("v-data-table",{staticClass:"elevation-0",attrs:{headers:t.headers,items:t.items,loading:t.loading,options:t.options,"server-items-length":t.meta.total,"footer-props":{itemsPerPageOptions:[10,20,50,100],showFirstLastPage:!0,firstIcon:"mdi-page-first",lastIcon:"mdi-page-last",prevIcon:"mdi-chevron-left",nextIcon:"mdi-chevron-right"},"show-select":"","show-expand":"","single-expand":"","item-key":"id"},on:{"update:options":function(e){t.options=e}},scopedSlots:t._u([{key:"expanded-item",fn:function(e){var n=e.headers,r=e.item;return[a("td",{attrs:{colspan:n.length}},[a("v-container",[a("table",[a("tr",[a("td",[a("strong",[t._v("Last Updated")])]),t._v(" "),a("td",[t._v(":")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(r.updated_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])]),t._v(" "),a("tr",[a("td",[a("strong",[t._v("Read at")])]),t._v(" "),a("td",[t._v(":")]),t._v(" "),a("td",[t._v("\n                                        "+t._s(t.mixin_formatDate(r.read_at,"YYYY-MM-DD HH:mm:ss"))+"\n                                    ")])])])])],1)]}},{key:"item.actions",fn:function(e){var n=e.item;return[n.read_at?a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.onReadUpdate(n.id,"unread","single")}}},"v-icon",s,!1),r),[t._v("\n                                mdi-close\n                            ")])]}}],null,!0)},[t._v(" "),a("span",[t._v("Mark as unread")])]):a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.onReadUpdate(n.id,"read","single")}}},"v-icon",s,!1),r),[t._v("\n                                mdi-check\n                            ")])]}}],null,!0)},[t._v(" "),a("span",[t._v("Mark as read")])]),t._v(" "),a("v-tooltip",{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,s=e.attrs;return[a("v-icon",t._g(t._b({staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.$router.push("/"+n.data.data.model+"/"+n.data.data.id)}}},"v-icon",s,!1),r),[t._v("\n                                mdi-share\n                            ")])]}}],null,!0)},[t._v(" "),a("span",[t._v("Go to link")])])]}},{key:"item.created_at",fn:function(e){var a=e.item;return[t._v("\n                    "+t._s(t.mixin_formatDate(a.created_at,"MMM DD, YYYY HH:mm:ss"))+"\n                ")]}},{key:"item.description",fn:function(e){var a=e.item;return[t._v("\n                    "+t._s(a.data.data.description)+" -\n                    "+t._s(a.data.data.expense_report.code)+"\n                ")]}},{key:"item.status",fn:function(e){return[e.item.read_at?a("v-chip",{attrs:{color:"green",dark:"",small:""}},[t._v("\n                        Read\n                    ")]):a("v-chip",{attrs:{color:"red",dark:"",small:""}},[t._v("\n                        Unread\n                    ")])]}}],null,!0),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1)],1):a("loader-component")],1)}),[],!1,null,null,null);e.default=h.exports}}]);