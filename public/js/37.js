(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{24:function(t,e,n){"use strict";var a=n(10),r=n.n(a);function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}var u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,a;return e=t,(n=[{key:"get",value:function(t){return r.a.get("/api/data/users",t)}},{key:"getAll",value:function(t){return r.a.get("/api/users",t)}},{key:"show",value:function(t,e){return r.a.get("/api/users/".concat(t),e)}},{key:"store",value:function(t){return r.a.post("/api/users",t)}},{key:"update",value:function(t,e){return r.a.put("/api/users/".concat(t),e)}},{key:"delete",value:function(t,e){return r.a.delete("/api/users/".concat(t),e)}},{key:"restore",value:function(t,e){return r.a.put("/api/users/restore/".concat(t),e)}},{key:"updatePassword",value:function(t,e){return r.a.put("/api/users/update_password/".concat(t),e)}},{key:"resetPassword",value:function(t,e){return r.a.put("/api/users/reset_password/".concat(t),e)}},{key:"verifyEmail",value:function(t,e){return r.a.put("/api/users/verify_email/".concat(t),e)}},{key:"updateFund",value:function(t,e){return r.a.put("/api/users/update_fund/".concat(t),e)}},{key:"updateSettings",value:function(t,e){return r.a.put("/api/users/update_settings/".concat(t),e)}},{key:"updatePermissions",value:function(t,e){return r.a.put("/api/users/update_permissions/".concat(t),e)}},{key:"updateProfile",value:function(t,e){return r.a.put("/api/users/update_profile/".concat(t),e)}},{key:"updateActivation",value:function(t,e){return r.a.put("/api/users/update_activation/".concat(t),e)}},{key:"export",value:function(){return r.a.get("/api/users/export/data")}}])&&i(e.prototype,n),a&&i(e,a),t}();e.a=new u},899:function(t,e,n){"use strict";n.r(e);var a=n(24),r={data:function(){return{valid:!1,formDataLoaded:!1,adjustment_type:"Add Amount",user:{id:null,fullname:"",fund:0,remaining_fund:0},reference:"",code:"",description:"",amount:0,type:"Manage Revolving Fund",remarks:"",errors:{user:[],reference:[],code:[],description:[],amount:[],remarks:[]}}},methods:{loadUser:function(){var t=this;a.a.show(this.$route.params.id).then((function(e){t.user=e.data.data,t.formDataLoaded=!0})).catch((function(e){t.mixin_showErrors(e),t.formDataLoaded=!0,t.$router.push({name:"admin.users.index"},(function(){}))}))},onSave:function(){var t=this;this.new_fund<0||this.new_remaining_fund<0?this.mixin_errorDialog("Error","Revolving fund/Remaining fund should not be lesser than current amount"):this.$refs.form.validate()&&this.$confirm("Do you want to update revolving fund?").then((function(e){e&&a.a.updateFund(t.$route.params.id,{fund:t.new_fund,remaining_fund:t.new_remaining_fund}).then((function(e){t.mixin_successDialog(e.data.status,e.data.message),t.$store.dispatch("AUTH_USER"),t.$router.push("/users")})).catch((function(e){t.mixin_showErrors(e)}))}))}},computed:{new_fund:function(){return"Add Amount"==this.adjustment_type?this.mixin_convertToNumber(this.user.fund)+this.mixin_convertToNumber(this.amount):this.mixin_convertToNumber(this.user.fund)-this.mixin_convertToNumber(this.amount)},new_remaining_fund:function(){return"Add Amount"==this.adjustment_type?this.mixin_convertToNumber(this.user.remaining_fund)+this.mixin_convertToNumber(this.amount):this.mixin_convertToNumber(this.user.remaining_fund)-this.mixin_convertToNumber(this.amount)}},created:function(){this.$store.dispatch("AUTH_USER"),this.loadUser()},activated:function(){this.$store.dispatch("AUTH_USER"),this.loadUser()}},i=n(4),u=Object(i.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.formDataLoaded?n("v-card",{staticClass:"elevation-0 pt-0"},[n("v-card-title",{staticClass:"pt-0"},[n("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(e){return t.$router.go(-1)}}},[n("v-icon",[t._v("mdi-arrow-left")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("h4",{staticClass:"title green--text"},[t._v("Edit Revolving Fund")])],1),t._v(" "),n("v-form",{ref:"form",model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-select",{attrs:{label:"Adjustment Type",items:["Add Amount","Subtract Amount"]},model:{value:t.adjustment_type,callback:function(e){t.adjustment_type=e},expression:"adjustment_type"}})],1),t._v(" "),n("v-col",{attrs:{cols:"12",md:"4"}},[n("v-text-field",{attrs:{rules:t.mixin_validation.minNumberValue(1),label:"Amount",type:"number"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}})],1)],1),t._v(" "),n("v-row",[n("v-col",{attrs:{cols:"12",md:"6"}},[t._v("\n                        Current Balance\n                        "),n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",[n("td",{staticClass:"headline"},[t._v("\n                                        Revolving Fund\n                                    ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",{staticClass:"headline green--text text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.user.fund))+"\n                                    ")])]),t._v(" "),n("tr",[n("td",{staticClass:"headline"},[t._v("\n                                        Remaining Fund\n                                    ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",{staticClass:"headline green--text text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.user.remaining_fund))+"\n                                    ")])])])])]),t._v(" "),n("v-col",{attrs:{cols:"12",md:"6"}},[t._v("\n                        New Balance\n                        "),n("table",{staticClass:"ml-4"},[n("tbody",[n("tr",[n("td",{staticClass:"headline"},[t._v("\n                                        Revolving Fund\n                                    ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",{class:"headline "+(t.new_fund<0?"red--text":"green--text")+" text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.new_fund))+"\n                                    ")])]),t._v(" "),n("tr",[n("td",{staticClass:"headline"},[t._v("\n                                        Remaining Fund\n                                    ")]),t._v(" "),n("td",[t._v(":")]),t._v(" "),n("td",{class:"headline "+(t.new_remaining_fund<0?"red--text":"green--text")+" text--darken-4 text-right"},[t._v("\n                                        "+t._s(t.mixin_formatNumber(t.new_remaining_fund))+"\n                                    ")])])])])])],1),t._v(" "),n("small",{staticClass:"text--secondary"},[t._v("\n                    * indicates required field\n                ")]),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"green",dark:""},on:{click:t.onSave}},[t._v("Save")]),t._v(" "),n("v-btn",{attrs:{to:{name:"admin.users.index"}}},[t._v("\n                        Cancel\n                    ")])],1)],1)],1)],1):n("loader-component")],1)}),[],!1,null,null,null);e.default=u.exports}}]);