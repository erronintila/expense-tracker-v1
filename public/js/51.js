(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{881:function(e,r,t){"use strict";t.r(r);var s=t(1),n=t.n(s),o=t(162),i=t(28),a=t(38),u={components:{Form:o.a,UserDialogSelector:i.a},data:function(){return{formDataLoaded:!0,usersParameters:{params:{with_expense_types:!0,is_superadmin:!1}},itemize:!1,form:{code:null,reference_no:null,description:null,amount:0,reimbursable_amount:0,tax_name:"",tax_rate:0,is_compound_tax:!1,is_tax_inclusive:!0,tax_amount:0,receipt_number:null,date:n()().format("YYYY-MM-DD"),details:[],remarks:"",notes:"",encoding_period:this.$store.getters.settings.expense_encoding_period,expense_type:null,sub_type:null,user:this.$store.getters.user.is_admin&&this.mixin_can("select specific users on expenses")?null:this.$store.getters.user,vendor:null,expense_report_id:null,tax_id:null,expense_header_id:null,details_quantity:0,details_amount:0,is_active:!0,is_reimbursable:!1,revolving_fund:0},rules:{reimbursable_amount:[],revolving_fund:[]},errors:{sub_type:[],code:[],reference_no:[],description:[],amount:[],reimbursable_amount:[],tax_name:[],tax_rate:[],is_compound_tax:[],is_tax_inclusive:[],tax_amount:[],receipt_number:[],date:[],details:[],remarks:[],notes:[],encoding_period:[],expense_type_id:[],sub_type_id:[],user_id:[],vendor_id:[],expense_report_id:[],tax_id:[],expense_header_id:[],is_active:[]}}},methods:{selectUser:function(e){this.errors.user_id=[],this.form.user=null!=e&&null!=e?e:null},resetUser:function(){this.form.user=null},onSave:function(e){var r=this;e.vendor&&(e.vendor.is_vat_inclusive||(e.tax_rate=0,e.tax_amount=0)),e.details=e.itemize?e.items:null,e.expense_type_id=e.expense_type?e.expense_type.id:null,e.sub_type_id=e.sub_type?e.sub_type.id:null,e.user_id=e.user?e.user.id:null,e.vendor_id=e.vendor?e.vendor.id:null,e.reimbursable_amount=e.amount_to_reimburse,a.a.store(e).then((function(e){r.mixin_successDialog(e.data.status,e.data.message),r.$router.go(-1),r.loading=!1,r.formDataLoaded=!0})).catch((function(e){r.mixin_showErrors(e),r.errors=e.response.data.errors,r.formDataLoaded=!0}))}}},l=t(4),_=Object(l.a)(u,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[e.formDataLoaded?t("v-card",{staticClass:"elevation-0 pt-0"},[t("v-card-title",{staticClass:"pt-0"},[t("v-btn",{staticClass:"mr-3",attrs:{icon:""},on:{click:function(r){return e.$router.go(-1)}}},[t("v-icon",[e._v("mdi-arrow-left")])],1),e._v(" "),t("v-spacer"),e._v(" "),t("h4",{staticClass:"title green--text"},[e._v("New Expense")])],1),e._v(" "),t("v-container",[t("Form",{attrs:{errors:e.errors,expenseForm:e.form,rules:e.rules},on:{"on-save":e.onSave},scopedSlots:e._u([{key:"userSelector",fn:function(){return[t("v-row",[t("v-col",[t("v-text-field",{attrs:{value:e.form.user?e.form.user.full_name:"No Employee","error-messages":e.errors.user_id,label:"Employee",readonly:""},on:{input:function(r){e.errors.user_id=[]}},scopedSlots:e._u([e.mixin_can("select specific users on expenses")?{key:"append",fn:function(){return[t("UserDialogSelector",{ref:"userDialogSelector",attrs:{selectedUser:e.form.user,usersParameters:e.usersParameters,itemize:e.itemize},on:{selectUser:e.selectUser,onReset:e.resetUser},scopedSlots:e._u([{key:"openDialog",fn:function(r){var s=r.bind,n=r.on;return[t("v-btn",e._g(e._b({attrs:{fab:"",color:"primary",text:"","x-small":""}},"v-btn",s,!1),n),[t("v-icon",{attrs:{dark:""}},[e._v("mdi-magnify")])],1)]}}],null,!1,2729772431)})]},proxy:!0}:null],null,!0)})],1)],1)]},proxy:!0}])})],1)],1):t("loader-component")],1)}),[],!1,null,null,null);r.default=_.exports}}]);